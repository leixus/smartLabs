import{_ as Q}from"./index-BpMzQZqs.js";/* empty css             *//* empty css               */import{_ as X}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-D0lzutwe.js";/* empty css                  *//* empty css                */import"./el-tab-pane-l0sNRNKZ.js";/* empty css                     */import{T as Y}from"./index-BgOfTxXv.js";import{d as ee,p as _,j as le,i as w,o as C,w as a,a as $,b as t,I as ae,y as te,ap as oe,u as n,B as R,Z as N,aq as ne,bq as se,D as ie,a7 as re,e as d,O as ue,c as pe,t as z,ad as de,V as E}from"./index-Djyl84eR.js";import{_ as me}from"./_plugin-vue_export-helper-DlAUqK2U.js";const fe={class:"-mt-15px min-h-350px"},ce={key:0},be={class:"mt-20px"},ve=ee({__name:"index",props:{orgTreeApi:{},positionTreeApi:{},roleTreeApi:{},userSelectorApi:{},multiple:{type:Boolean,default:!1},maxCount:{},biz:{type:Boolean,default:!1}},emits:{successful:null},setup(I,{expose:P,emit:S}){const k=_("org"),D=S,b=_(!1),m=I,F=m.biz?"人员":"用户",V=m.biz?"职位":"岗位",q=m.biz?"机构":"组织",f=le({}),g=_(),u=_(),A=[{type:"selection",fixed:"left",width:50},{prop:"operation",label:"操作",width:80,fixed:"left"},{prop:"account",label:"账号",search:{el:"input",span:2}},{prop:"name",label:"姓名"}];function O(e=[]){b.value=!0,r.value=e,o.value=e}function W(){b.value=!1,r.value=[],o.value=[]}function j(){b.value=!1,D("successful",o.value)}function H(e){g.value.pageable.pageNum=1,e!=""?f.orgId=e:f.orgId=null}function L(e,l){g.value.pageable.pageNum=1,l.isPosition?f.positionId=e:f.positionId=null}function U(e,l){g.value.pageable.pageNum=1,l.isRole?f.roleId=e:f.roleId=null}const o=_([]),r=_([]);function y(e){var l;if(m.multiple){if(e=e.filter(i=>!o.value.find(c=>c.id==i.id)),m.maxCount&&m.maxCount<e.length+o.value.length){E.warning("最多选择"+m.maxCount+"条");return}o.value=o.value.concat(e),r.value=o.value}else{if(o.value.length>0||e.length>1){E.warning("只可选择一条");return}o.value=e,r.value=o.value}(l=u.value)==null||l.refresh()}function T(e){var l;o.value=o.value.filter(i=>!e.includes(i)),r.value=o.value,(l=u.value)==null||l.refresh()}function M(){var e,l,i;(l=(e=u.value)==null?void 0:e.searchParam)!=null&&l.account&&(r.value=r.value.filter(c=>{var v;return c.account.includes((v=u.value)==null?void 0:v.searchParam.account)}),(i=u.value)==null||i.refresh())}function Z(){var e;r.value=o.value,(e=u.value)==null||e.refresh()}return P({showSelector:O}),(e,l)=>{const i=Y,c=se,v=ne,G=oe,x=te,p=ie,B=X,J=ae,K=Q;return C(),w(K,de({modelValue:n(b),"onUpdate:modelValue":l[3]||(l[3]=s=>R(b)?b.value=s:null),title:`${n(F)}选择`,"form-size":"90%"},e.$attrs),{footer:a(()=>[$("div",be,[t(p,{onClick:W},{default:a(()=>l[10]||(l[10]=[d(" 取消 ")])),_:1}),t(p,{type:"primary",onClick:j},{default:a(()=>l[11]||(l[11]=[d(" 确定 ")])),_:1})])]),default:a(()=>[$("div",fe,[t(J,{gutter:12,justify:"space-between"},{default:a(()=>[t(x,{span:4},{default:a(()=>[t(G,{modelValue:n(k),"onUpdate:modelValue":l[0]||(l[0]=s=>R(k)?k.value=s:null),type:"card",stretch:"",class:"min-h-350px"},{default:a(()=>[t(v,{label:`${n(q)}`,class:"ml-5px mr-5px",name:"org"},{default:a(()=>[t(c,{"max-height":"650px"},{default:a(()=>[t(i,{label:"name",class:"filterWidth",title:`${n(q)}列表`,"show-all":!e.biz,"default-expand-all":!1,"request-api":e.orgTreeApi,onChange:H},null,8,["title","show-all","request-api"])]),_:1})]),_:1},8,["label"]),e.positionTreeApi?(C(),w(v,{key:0,label:`${n(V)}`,class:"ml-5px mr-5px",name:"pos"},{default:a(()=>[t(c,{"max-height":"650px"},{default:a(()=>[t(i,{label:"name",class:"filterWidth",title:`${n(V)}列表`,"show-all":!e.biz,"default-expand-all":!1,"request-api":e.positionTreeApi,onChange:L},null,8,["title","show-all","request-api"])]),_:1})]),_:1},8,["label"])):N("",!0),e.roleTreeApi?(C(),w(v,{key:1,label:"角色",class:"ml-5px mr-5px",name:"role"},{default:a(()=>[t(c,{"max-height":"650px"},{default:a(()=>[t(i,{label:"name",class:"filterWidth",title:"角色列表","show-all":!e.biz,"default-expand-all":!1,"request-api":e.roleTreeApi,onChange:U},null,8,["show-all","request-api"])]),_:1})]),_:1})):N("",!0)]),_:1},8,["modelValue"])]),_:1}),t(x,{span:10},{default:a(()=>[t(B,{ref_key:"userTable",ref:g,columns:A,"tool-button":!1,"init-param":n(f),"request-api":e.userSelectorApi},{tableHeader:a(s=>[t(p,{type:"primary",onClick:l[1]||(l[1]=h=>y(n(g).tableData))},{default:a(()=>l[4]||(l[4]=[d("添加当前")])),_:1}),t(p,{type:"primary",plain:"",disabled:!s.isSelected,onClick:h=>y(s.selectedList)},{default:a(()=>l[5]||(l[5]=[d("添加选中")])),_:2},1032,["disabled","onClick"])]),operation:a(s=>[t(p,{type:"primary",link:"",icon:n(re),plain:"",onClick:h=>y([s.row])},{default:a(()=>l[6]||(l[6]=[d("添加")])),_:2},1032,["icon","onClick"])]),_:1},8,["init-param","request-api"])]),_:1}),t(x,{span:10},{default:a(()=>[t(B,{ref_key:"chooseTable",ref:u,columns:A,"tool-button":!0,data:n(r),onSearch:M,onReset:Z},{tableHeader:a(s=>[t(p,{type:"danger",onClick:l[2]||(l[2]=h=>T(n(u).tableData))},{default:a(()=>l[7]||(l[7]=[d("删除当前")])),_:1}),t(p,{type:"danger",plain:"",disabled:!s.isSelected,onClick:h=>T(s.selectedList)},{default:a(()=>l[8]||(l[8]=[d("删除选中")])),_:2},1032,["disabled","onClick"])]),toolButton:a(()=>[$("span",null,"已选择:"+z(n(o).length)+"人",1),e.maxCount?(C(),pe("span",ce,",最多选择:"+z(e.maxCount)+"人",1)):N("",!0)]),operation:a(s=>[t(p,{type:"danger",link:"",icon:n(ue),plain:"",onClick:h=>T([s.row])},{default:a(()=>l[9]||(l[9]=[d("删除")])),_:2},1032,["icon","onClick"])]),_:1},8,["data"])]),_:1})]),_:1})])]),_:1},16,["modelValue","title"])}}}),Ve=me(ve,[["__scopeId","data-v-b2c8e56c"]]);export{Ve as _};
