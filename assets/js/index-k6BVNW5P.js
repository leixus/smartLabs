import{_ as R}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-D0lzutwe.js";/* empty css             *//* empty css               *//* empty css                *//* empty css               *//* empty css                */import"./index-C6bx8goA.js";import{d as D,p as c,q as I,ae as V,b2 as A,c as X,o as L,b as a,I as O,w as e,y as P,z as S,a as t,u as U,g as q,e as B,t as v,bY as G,s as M}from"./index-Djyl84eR.js";import{i as y}from"./install-CPD1cr-Y.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                 *//* empty css                    *//* empty css                 *//* empty css                  *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                  *//* empty css                   *//* empty css                  */import"./sortable.esm-C83syoBY.js";const Y={class:"tab-content"},$={class:"chart-container"},j={class:"chart-container"},F={class:"chart-container"},H=D({__name:"index",setup(J,{expose:b}){const m=c(null),u=c(null),f=c(null);let s=null,i=null,o=null;const g=c([{taskId:"EXP-2023-001",taskName:"材料拉伸强度测试",actualTime:5.2,standardTime:4,deviation:1.2,efficiency:3.5,status:"已完成",completionDate:"2025-03-10 15:30:00"},{taskId:"EXP-2023-002",taskName:"复合材料弯曲测试",actualTime:3.5,standardTime:4,deviation:-.5,efficiency:4.5,status:"已完成",completionDate:"2025-03-12 10:15:00"},{taskId:"EXP-2023-003",taskName:"金属疲劳测试",actualTime:8,standardTime:6,deviation:2,efficiency:3,status:"已完成",completionDate:"2025-03-14 18:45:00"},{taskId:"EXP-2023-004",taskName:"陶瓷材料硬度测试",actualTime:2.5,standardTime:3,deviation:-.5,efficiency:4,status:"已完成",completionDate:"2025-03-16 09:20:00"},{taskId:"EXP-2023-005",taskName:"高分子材料热变形测试",actualTime:6.5,standardTime:5,deviation:1.5,efficiency:3,status:"进行中",completionDate:"-"}]),h=[{type:"index",label:"序号",width:"80px"},{label:"任务编号",prop:"taskId"},{label:"任务名称",prop:"taskName"},{label:"实际耗时(h)",prop:"actualTime"},{label:"标准耗时(h)",prop:"standardTime"},{label:"偏差值(h)",prop:"deviation",width:"120px"},{label:"效率评分",prop:"efficiency",width:"120px"},{label:"状态",prop:"status",width:"120px"},{label:"完成时间",prop:"completionDate",width:"180px"}],k=l=>{switch(l){case"已完成":return"success";case"进行中":return"warning";case"未开始":return"info";case"已取消":return"danger";default:return"info"}},T=()=>{if(m.value){s=y(m.value);const l={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["实际耗时","标准耗时"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:["样品准备","设备调试","数据采集","数据分析","报告编写"]},yAxis:{type:"value",name:"耗时(小时)"},series:[{name:"实际耗时",type:"bar",data:[2.5,1.8,3.2,2,1.5]},{name:"标准耗时",type:"bar",data:[2,1.5,2.5,1.5,1]}]};s.setOption(l)}if(u.value){i=y(u.value);const l={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:10,data:["样品准备","设备调试","数据采集","数据分析","报告编写"]},series:[{name:"耗时占比",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:2.5,name:"样品准备"},{value:1.8,name:"设备调试"},{value:3.2,name:"数据采集"},{value:2,name:"数据分析"},{value:1.5,name:"报告编写"}]}]};i.setOption(l)}if(f.value){o=y(f.value);const l={tooltip:{trigger:"axis"},legend:{data:["总耗时趋势"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["1月","2月","3月","4月","5月","6月"]},yAxis:{type:"value",name:"平均耗时(小时)"},series:[{name:"总耗时趋势",type:"line",data:[12,11.5,10.8,11.2,10.5,9.8],markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}}]};o.setOption(l)}},x=()=>{s==null||s.resize(),i==null||i.resize(),o==null||o.resize()};return b({resize:()=>{setTimeout(()=>{s==null||s.resize(),i==null||i.resize(),o==null||o.resize()},300)}}),I(()=>{V(()=>{T(),window.addEventListener("resize",x)})}),A(()=>{window.removeEventListener("resize",x),s==null||s.dispose(),i==null||i.dispose(),o==null||o.dispose()}),(l,r)=>{const d=S,p=P,_=O,w=G,E=q,z=R;return L(),X("div",Y,[a(_,{gutter:10},{default:e(()=>[a(p,{span:24},{default:e(()=>[a(d,{class:"chart-card"},{header:e(()=>r[0]||(r[0]=[t("div",{class:"card-header"},[t("span",null,"试验时间统计")],-1)])),default:e(()=>[t("div",$,[t("div",{ref_key:"timeBarChartRef",ref:m,class:"chart"},null,512)])]),_:1})]),_:1})]),_:1}),a(_,{gutter:10,class:"mt-[10px]"},{default:e(()=>[a(p,{span:12},{default:e(()=>[a(d,{class:"chart-card"},{header:e(()=>r[1]||(r[1]=[t("div",{class:"card-header"},[t("span",null,"各步骤耗时占比")],-1)])),default:e(()=>[t("div",j,[t("div",{ref_key:"timePieChartRef",ref:u,class:"chart"},null,512)])]),_:1})]),_:1}),a(p,{span:12},{default:e(()=>[a(d,{class:"chart-card"},{header:e(()=>r[2]||(r[2]=[t("div",{class:"card-header"},[t("span",null,"试验流程优化趋势")],-1)])),default:e(()=>[t("div",F,[t("div",{ref_key:"trendLineChartRef",ref:f,class:"chart"},null,512)])]),_:1})]),_:1})]),_:1}),a(_,{gutter:10,class:"mt-[10px]"},{default:e(()=>[a(p,{span:24},{default:e(()=>[a(d,{class:"chart-card"},{header:e(()=>r[3]||(r[3]=[t("div",{class:"card-header"},[t("span",null,"试验任务耗时详情")],-1)])),default:e(()=>[a(z,{data:U(g),columns:h,"tool-button":!1,height:"400px"},{deviation:e(({row:n})=>[t("span",{class:M(n.deviation>0?"text-danger":"text-success")},v(n.deviation>0?"+":"")+v(n.deviation),3)]),efficiency:e(({row:n})=>[a(w,{modelValue:n.efficiency,"onUpdate:modelValue":N=>n.efficiency=N,disabled:"","text-color":"#ff9900","score-template":"{value}"},null,8,["modelValue","onUpdate:modelValue"])]),status:e(({row:n})=>[a(E,{type:k(n.status)},{default:e(()=>[B(v(n.status),1)]),_:2},1032,["type"])]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})])}}}),ke=W(H,[["__scopeId","data-v-6ac0a26e"]]);export{ke as default};
