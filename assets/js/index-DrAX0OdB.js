import{_ as P}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-D0lzutwe.js";/* empty css             *//* empty css                  *//* empty css                        *//* empty css                  *//* empty css                     *//* empty css                         *//* empty css                *//* empty css                 *//* empty css               */import{_ as V,u as H}from"./useHandleData-DKqFm39K.js";import{_ as q}from"./index.vue_vue_type_script_setup_true_name_SvgIcon_lang-DO1ZDfLA.js";import{d as O,cB as z,bf as J,p as f,b as r,X as Q,cz as X,c as Y,o as m,w as t,aJ as Z,u as l,P as j,E as G,Q as K,e as p,S as W,i as u,Z as E,T as ee,t as d,bv as oe,g as te,bg as T,cy as $}from"./index-Djyl84eR.js";import{F as c}from"./formEnum-CT3LisML.js";import{_ as ne}from"./form.vue_vue_type_script_setup_true_lang-VOQq4f5W.js";import{_ as re}from"./changeModule.vue_vue_type_script_setup_true_lang-mNVp9Hko.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang-rvkEGB_S.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                 *//* empty css                    *//* empty css                 *//* empty css                */import"./el-form-item-l0sNRNKZ.js";import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                 *//* empty css                  *//* empty css                   *//* empty css                  */import"./sortable.esm-C83syoBY.js";import"./index-BpMzQZqs.js";/* empty css                  *//* empty css               *//* empty css                  *//* empty css                        */import"./index.vue_vue_type_script_setup_true_name_MenuSelector_lang-B3gGVmdz.js";/* empty css                       */import"./index-Ckf08uTq.js";/* empty css                */import"./el-tab-pane-l0sNRNKZ.js";/* empty css                 */import"./index.vue_vue_type_script_setup_true_name_SRadioGroup_lang-DgQCsAK8.js";/* empty css                       *//* empty css                        */import"./index.vue_vue_type_script_setup_true_name_SFormItem_lang-BaPcQrZE.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_name_SInput_lang-C_fN4iWJ.js";/* empty css                   */import"./formRules-BdD8zfEi.js";import"./index.vue_vue_type_script_setup_true_name_SSelect_lang-CPJJatrh.js";import"./form.vue_vue_type_script_setup_true_lang-pn6ZHeCa.js";import"./batch.vue_vue_type_script_setup_true_lang-nzs8M-UE.js";const ie={class:"table-box"},pe=O({name:"sysMenu"}),se=O({...pe,setup(me){const B=z(),_=J(),w=B.moduleList.map(e=>({label:e.title,value:e.id})),b=f(),N=[{type:"selection",fixed:"left",width:50},{prop:"id",label:"Id",isShow:!1},{prop:"module",label:"应用模块",enum:w,search:{el:"select",props:{clearable:!1,placeholder:"请选择应用模块"},defaultValue:w[0].value},isShow:!1},{prop:"title",label:"菜单名称",width:150,align:"left",search:{el:"input"}},{prop:"icon",label:"菜单图标",render:e=>r(q,{icon:e.row.icon,class:"h-6 w-6"},null)},{prop:"menuType",label:"菜单类型"},{prop:"name",label:"组件名称"},{prop:"path",label:"路由地址",width:200,search:{el:"input"}},{prop:"component",label:"组件路径",width:250},{prop:"sortCode",label:"排序",width:80},{prop:"status",label:"状态"},{prop:"description",label:"说明"},{prop:"operation",label:"操作",width:230,fixed:"right"}],h=f(null);function C(e,n={}){var a,i;(i=h.value)==null||i.onOpen({opt:e,record:n,successful:()=>k()},(a=b.value)==null?void 0:a.searchParam.module)}async function g(e,n){await H($.delete,{ids:e},n),k()}function k(){var e;(e=b.value)==null||e.refresh()}const A=Q(()=>e=>e===X.MENU);let s=function(e){return e.ChangeModule="更改模块",e.Button="权限按钮",e}({});function M(e,n){return{row:e,command:n}}const S=f(null),D=f(null);function F(e){var n,a;switch(e.command){case s.ChangeModule:(n=S.value)==null||n.onOpen({moduleOptions:w,id:e.row.id,title:e.row.title,module:e.row.module,successful:()=>k()});break;case s.Button:(a=D.value)==null||a.onOpenTable(e.row.id);break}}return(e,n)=>{const a=V,i=te,v=Z,I=G,x=ee,R=W,L=j,U=P;return m(),Y("div",ie,[r(U,{ref_key:"proTable",ref:b,title:"菜单列表",indent:20,columns:N,"request-api":l($).tree,pagination:!1},{tableHeader:t(o=>[r(a,{suffix:"菜单",onClick:n[0]||(n[0]=y=>C(l(c).ADD))}),r(a,{suffix:"菜单",opt:l(c).DELETE,plain:"",disabled:!o.isSelected,onClick:y=>g(o.selectedListIds,"删除所选菜单")},null,8,["opt","disabled","onClick"])]),menuType:t(o=>[r(v,null,{default:t(()=>[r(i,null,{default:t(()=>[p(d(l(_).dictTranslation(l(T).MENU_TYPE,o.row.menuType)),1)]),_:2},1024),o.row.isHome===!0?(m(),u(i,{key:0,type:"warning"},{default:t(()=>n[1]||(n[1]=[p("首页")])),_:1})):E("",!0)]),_:2},1024)]),status:t(o=>[o.row.status===l(oe).ENABLE?(m(),u(i,{key:0,type:"success"},{default:t(()=>[p(d(l(_).dictTranslation(l(T).COMMON_STATUS,o.row.status)),1)]),_:2},1024)):(m(),u(i,{key:1,type:"danger"},{default:t(()=>[p(d(l(_).dictTranslation(l(T).COMMON_STATUS,o.row.status)),1)]),_:2},1024))]),operation:t(o=>[r(v,null,{default:t(()=>[r(a,{link:"",opt:l(c).EDIT,onClick:y=>C(l(c).EDIT,o.row)},null,8,["opt","onClick"]),r(a,{link:"",opt:l(c).DELETE,onClick:y=>g([o.row.id],`删除【${o.row.title}】菜单`)},null,8,["opt","onClick"]),r(L,{onCommand:F},{dropdown:t(()=>[r(R,null,{default:t(()=>[o.row.parentId===0?(m(),u(x,{key:0,command:M(o.row,s.ChangeModule)},{default:t(()=>[p(d(s.ChangeModule),1)]),_:2},1032,["command"])):E("",!0),l(A)(o.row.menuType)?(m(),u(x,{key:1,command:M(o.row,s.Button)},{default:t(()=>[p(d(s.Button),1)]),_:2},1032,["command"])):E("",!0)]),_:2},1024)]),default:t(()=>[r(I,{type:"primary",underline:!1,icon:l(K)},{default:t(()=>n[2]||(n[2]=[p(" 更多 ")])),_:1},8,["icon"])]),_:2},1024)]),_:2},1024)]),_:1},8,["request-api"]),r(ne,{ref_key:"formRef",ref:h},null,512),r(re,{ref_key:"changeModuleFormRef",ref:S},null,512),r(le,{ref_key:"buttonFormRef",ref:D},null,512)])}}}),so=ae(se,[["__scopeId","data-v-6ff6919c"]]);export{so as default};
