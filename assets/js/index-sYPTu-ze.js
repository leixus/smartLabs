import{_ as ne}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-dQS8jH7J.js";/* empty css             *//* empty css                  *//* empty css                        *//* empty css                  *//* empty css                     *//* empty css                         *//* empty css                    *//* empty css               */import{d as O,p as d,J as I,q as se,c as ie,o as h,a as pe,b as l,w as a,D as de,u as r,N as x,e as s,O as ue,P as me,x as ce,Q as fe,S as we,T as ge,g as ye,t as w,i as H,bP as be,ag as Te,bI as ve,bQ as _e,a7 as ke,H as Se,bR as Ee,B as m,bS as Ce,W as Ne,V as N}from"./index-yDSqlga2.js";import De from"./index-BkRamS7i.js";import Me from"./index-3Iwjle1T.js";import{_ as Ve}from"./index.vue_vue_type_script_setup_true_lang-BGm7s0r-.js";import he from"./index-CgYs9iJm.js";import Pe from"./index-Krsldzzk.js";import Le from"./index-Cm7HNogv.js";import Re from"./index-DPwt9rb5.js";import{M as Ae}from"./mock-Dosj8-Nv.js";/* empty css                       *//* empty css                 *//* empty css                   *//* empty css                 *//* empty css                   */import{_ as Ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                 *//* empty css                    *//* empty css                 *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                  *//* empty css                  */import"./sortable.esm-C83syoBY.js";/* empty css                        *//* empty css                       *//* empty css               */import"./index-rSGhd9To.js";/* empty css                  */import"./deviceLifecycle-Ct6WR7q2.js";import"./index-CWDYoZyp.js";import"./DetailInfo-Drq3w18g.js";/* empty css                             *//* empty css                  *//* empty css                         *//* empty css                       *//* empty css                        */import"./testReport-9uBwhu-u.js";import"./FileSaver.min-CGqg7FTX.js";const n=Ae.Random;n.extend({status:function(){const c=["NOT_STARTED","IN_PROGRESS","COMPLETED","ABNORMAL","CANCELLED"];return this.pick(c)},priority:function(){return this.pick(["高","中","低"])},testItems:function(){const c=["拉伸试验","冲击试验","硬度试验","疲劳试验","弯曲试验"];return this.pick(c)},department:function(){return this.pick(["生产部","质检部","研发部","技术部"])}});const xe=(c,y)=>{const D=()=>"id_"+Date.now()+"_"+Math.random().toString(36).substr(2,9);return{code:200,data:{list:Array.from({length:20},()=>({id:D(),planNo:n.id(),orderNo:n.id(),materialCode:n.id(),planName:n.ctitle(5,10),sampleNo:n.id(),testItems:n.testItems(),currentStep:n.pick(["样品准备","设备调试","试验执行","数据分析","报告编制","已完成","异常"]),progress:n.integer(0,100),planStartTime:n.datetime("yyyy-MM-dd HH:mm:ss"),planEndTime:n.datetime("yyyy-MM-dd HH:mm:ss"),actualStartTime:n.datetime("yyyy-MM-dd HH:mm:ss"),actualEndTime:n.datetime("yyyy-MM-dd HH:mm:ss"),status:n.status(),priority:n.priority(),responsiblePerson:n.cname(),resourceWarning:n.boolean(),delayStatus:n.pick(["正常","延迟"]),department:n.department(),remarks:n.cparagraph(1),deviceInfo:`${n.pick(["万能试验机","冲击试验机","硬度计","金相显微镜"])} ${n.integer(100,999)}`,resourceStatus:n.pick(["充足","紧张","不足"])})),pageNum:c,pageSize:y,total:56},msg:"获取成功"}},He={class:"main-box"},Oe={class:"table-box"},$e=O({name:"prodPlanning"}),Ye=O({...$e,setup(c){const y=[{type:"selection",width:60},{type:"index",label:"序号",width:80},{prop:"planNo",label:"计划编号",width:180,search:{el:"input",props:{placeholder:"请输入计划编号"}}},{prop:"planName",label:"计划名称",width:200,search:{el:"input",props:{placeholder:"请输入任务名称"}}},{prop:"orderNo",label:"委托编号",width:180,search:{el:"input",props:{placeholder:"请输入委托编号"}}},{prop:"materialCode",label:"物料编码",width:180,search:{el:"input",props:{placeholder:"请输入物料编码"}}},{prop:"sampleNo",label:"试样编号",width:180,search:{el:"input",props:{placeholder:"请输入试样编号"}}},{prop:"testItems",label:"检测项目",width:150},{prop:"currentStep",label:"当前步骤",width:150,tag:!0},{prop:"progress",label:"当前进度",width:250},{prop:"planStartTime",label:"计划开始时间",width:180,search:{el:"date-picker",props:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{prop:"planEndTime",label:"计划完成时间",width:180,search:{el:"date-picker",props:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{prop:"actualStartTime",label:"实际开始时间",width:180},{prop:"actualEndTime",label:"实际完成时间",width:180},{prop:"status",label:"状态",width:120,tag:!0,search:{el:"select",props:{options:[{label:"未开始",value:"NOT_STARTED"},{label:"执行中",value:"IN_PROGRESS"},{label:"已完成",value:"COMPLETED"},{label:"异常",value:"ABNORMAL"},{label:"已取消",value:"CANCELLED"}]}}},{prop:"priority",label:"优先级",width:100,tag:!0,search:{el:"select",props:{options:[{label:"高",value:"高"},{label:"中",value:"中"},{label:"低",value:"低"}]}}},{prop:"responsiblePerson",label:"负责人",width:120,search:{el:"input",props:{placeholder:"请输入负责人"}}},{prop:"resourceWarning",label:"资源预警",width:100,search:{el:"select",props:{placeholder:"请输入资源预警"}}},{prop:"delayStatus",label:"延误状态",width:100,search:{el:"select",props:{placeholder:"请输入延误状态"}}},{prop:"operation",label:"操作",width:280,fixed:"right"}],D=async o=>Promise.resolve(xe(o.pageNum,o.pageSize)),P={pageNum:1,pageSize:10},$=o=>(o.list=o.list.map(e=>({...e,testItemsText:e.testItems.text})),o),f=d(),g=d(!1),M=d("add"),p=d({}),b=d(!1),T=d(!1),v=d(!1),_=d(!1),k=d(!1),S=d(!1),L=d([{title:"资源预警",type:"warning",description:"冲击试验机 JB-300B 将在 3 天后需要进行校准，请提前安排。",updateTime:I().format("YYYY-MM-DD HH:mm:ss")},{title:"任务延误预警",type:"error",description:"任务 'TC4钛合金拉伸试验' 已延误 2 天，请及时处理。",updateTime:I().format("YYYY-MM-DD HH:mm:ss")}]),Y=()=>{L.value.forEach((o,e)=>{Ce({title:o.title,message:`${o.description}<br>${o.updateTime}`,type:o.type,position:"top-right",offset:130*e,duration:5e3,dangerouslyUseHTMLString:!0,onClose:()=>B(e)})})},B=o=>{L.value.splice(o,1)},R=(o,e)=>{M.value=o,p.value=e||null,g.value=!0},U=()=>{var o;g.value=!1,(o=f.value)==null||o.getTableList()},G=async o=>{var e;try{await Ne.confirm(`是否确认删除 ${o.planNo} 的数据？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),N.success("删除成功"),(e=f.value)==null||e.getTableList()}catch{}},A=o=>{p.value=o,b.value=!0},W=o=>{p.value=o,T.value=!0},j=o=>{p.value=o,v.value=!0},z=o=>{p.value=o,_.value=!0},q=()=>{N.info("批量调整功能开发中")},F=()=>{k.value=!0},J=()=>{N.success("导出成功")},Q=()=>{N.info("查看历史记录功能开发中")},K=o=>{p.value=o,S.value=!0},X=o=>({样品准备:"info",设备调试:"warning",试验执行:"warning",数据分析:"warning",报告编制:"info",已完成:"success",异常:"danger"})[o]||"info",Z=o=>({NOT_STARTED:"info",IN_PROGRESS:"warning",COMPLETED:"success",ABNORMAL:"danger",CANCELLED:"info"})[o]||"info",ee=o=>({高:"danger",中:"warning",低:"info"})[o]||"info",te=d([{id:"1",planNo:"PLAN-2023-001",planName:"冲击试验",startTime:"2025-03-20 09:00",endTime:"2025-03-25 18:00",status:"IN_PROGRESS",progress:60},{id:"2",planNo:"PLAN-2023-002",planName:"拉伸试验",startTime:"2025-03-26 09:00",endTime:"2025-03-30 18:00",status:"NOT_STARTED",progress:0}]);return se(()=>{Y()}),(o,e)=>{const u=de,E=ye,oe=ve,V=ce,C=ge,ae=we,le=me,re=ne;return h(),ie("div",He,[pe("div",Oe,[l(re,{ref_key:"proTable",ref:f,columns:y,"request-api":D,"init-param":P,"data-callback":$},{tableHeader:a(()=>[l(u,{type:"primary",icon:r(ke),onClick:e[0]||(e[0]=t=>R("add"))},{default:a(()=>e[11]||(e[11]=[s("新增")])),_:1},8,["icon"]),l(u,{type:"warning",icon:r(x),onClick:q},{default:a(()=>e[12]||(e[12]=[s("批量调整")])),_:1},8,["icon"]),l(u,{type:"success",icon:r(Se),onClick:J},{default:a(()=>e[13]||(e[13]=[s("导出")])),_:1},8,["icon"]),l(u,{type:"info",icon:r(Ee),onClick:Q},{default:a(()=>e[14]||(e[14]=[s("历史记录")])),_:1},8,["icon"])]),toolViewer:a(()=>[l(u,{type:"info",icon:r(_e),circle:"",onClick:F},null,8,["icon"])]),planNo:a(t=>[l(u,{type:"primary",link:"",onClick:i=>A(t.row)},{default:a(()=>[s(w(t.row.planNo),1)]),_:2},1032,["onClick"])]),testItems:a(t=>[l(u,{type:"primary",link:"",onClick:i=>z(t.row)},{default:a(()=>[s(w(t.row.testItems),1)]),_:2},1032,["onClick"])]),currentStep:a(t=>[l(E,{type:X(t.row.currentStep),effect:"light"},{default:a(()=>[s(w(t.row.currentStep),1)]),_:2},1032,["type"])]),progress:a(t=>[l(oe,{percentage:t.row.progress,status:t.row.progress===100?"success":t.row.planStatus==="DELAYED"?"exception":""},null,8,["percentage","status"])]),status:a(t=>[l(E,{type:Z(t.row.status),effect:"light"},{default:a(()=>[s(w({NOT_STARTED:"未开始",IN_PROGRESS:"执行中",COMPLETED:"已完成",ABNORMAL:"异常",CANCELLED:"已取消"}[t.row.status]),1)]),_:2},1032,["type"])]),priority:a(t=>[l(E,{type:ee(t.row.priority),effect:"light"},{default:a(()=>[s(w(t.row.priority),1)]),_:2},1032,["type"])]),resourceWarning:a(t=>[t.row.resourceWarning?(h(),H(V,{key:0,color:"#F56C6C",size:20},{default:a(()=>[l(r(be))]),_:1})):(h(),H(V,{key:1,color:"#67C23A",size:20},{default:a(()=>[l(r(Te))]),_:1}))]),delayStatus:a(t=>[l(E,{type:t.row.delayStatus==="正常"?"success":"danger",effect:"light"},{default:a(()=>[s(w(t.row.delayStatus),1)]),_:2},1032,["type"])]),operation:a(t=>[l(u,{type:"primary",link:"",icon:r(x),onClick:i=>R("edit",t.row)},{default:a(()=>e[15]||(e[15]=[s("编辑")])),_:2},1032,["icon","onClick"]),l(u,{type:"danger",link:"",icon:r(ue),onClick:i=>G(t.row)},{default:a(()=>e[16]||(e[16]=[s("删除")])),_:2},1032,["icon","onClick"]),l(le,{class:"text-sm pt-[2px] pl-[12px]"},{dropdown:a(()=>[l(ae,null,{default:a(()=>[l(C,{onClick:i=>A(t.row)},{default:a(()=>e[18]||(e[18]=[s("查看详情")])),_:2},1032,["onClick"]),l(C,{onClick:i=>W(t.row)},{default:a(()=>e[19]||(e[19]=[s("调整计划")])),_:2},1032,["onClick"]),l(C,{onClick:i=>j(t.row)},{default:a(()=>e[20]||(e[20]=[s("跟踪进度")])),_:2},1032,["onClick"]),l(C,{onClick:i=>K(t.row)},{default:a(()=>e[21]||(e[21]=[s("生成报告")])),_:2},1032,["onClick"])]),_:2},1024)]),default:a(()=>[l(u,{type:"primary",link:""},{default:a(()=>[e[17]||(e[17]=s(" 更多 ")),l(V,{class:"el-icon--right"},{default:a(()=>[l(r(fe))]),_:1})]),_:1})]),_:2},1024)]),_:1},512)]),l(De,{modelValue:r(g),"onUpdate:modelValue":e[1]||(e[1]=t=>m(g)?g.value=t:null),type:r(M),title:r(M)==="add"?"新增生产计划":"编辑生产计划","row-data":r(p),onSuccess:U},null,8,["modelValue","type","title","row-data"]),l(Me,{modelValue:r(b),"onUpdate:modelValue":e[2]||(e[2]=t=>m(b)?b.value=t:null),"show-card":!1,"row-data":r(p)},null,8,["modelValue","row-data"]),l(Ve,{modelValue:r(T),"onUpdate:modelValue":e[3]||(e[3]=t=>m(T)?T.value=t:null),"plan-data":r(p),onSuccess:e[4]||(e[4]=t=>{var i;return(i=r(f))==null?void 0:i.getTableList()})},null,8,["modelValue","plan-data"]),l(he,{modelValue:r(v),"onUpdate:modelValue":e[5]||(e[5]=t=>m(v)?v.value=t:null),"plan-data":r(p),onSuccess:e[6]||(e[6]=t=>{var i;return(i=r(f))==null?void 0:i.getTableList()})},null,8,["modelValue","plan-data"]),l(Pe,{modelValue:r(_),"onUpdate:modelValue":e[7]||(e[7]=t=>m(_)?_.value=t:null),"plan-data":r(p)},null,8,["modelValue","plan-data"]),l(Le,{modelValue:r(k),"onUpdate:modelValue":e[8]||(e[8]=t=>m(k)?k.value=t:null),"plan-data":r(te)},null,8,["modelValue","plan-data"]),l(Re,{modelValue:r(S),"onUpdate:modelValue":e[9]||(e[9]=t=>m(S)?S.value=t:null),"row-data":r(p),onSuccess:e[10]||(e[10]=t=>{var i;return(i=r(f))==null?void 0:i.getTableList()})},null,8,["modelValue","row-data"])])}}}),Ht=Ie(Ye,[["__scopeId","data-v-c5ade2fe"]]);export{Ht as default};
