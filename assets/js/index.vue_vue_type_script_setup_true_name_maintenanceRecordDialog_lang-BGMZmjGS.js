/* empty css             *//* empty css                  *//* empty css                   */import{_ as B}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-D0lzutwe.js";/* empty css               *//* empty css                  *//* empty css                       *//* empty css                 *//* empty css                 *//* empty css                   */import{d as m,p as V,X as C,i as E,o as N,w as a,a as M,b as i,g as R,e as l,t as S,D as U,ab as $,W as z,V as L}from"./index-Djyl84eR.js";const j={class:"table-box"},q=m({name:"maintenanceRecordDialog"}),Q=m({...q,props:{visible:{type:Boolean,default:!1},device:{type:Object,default:()=>({})}},emits:["update:visible"],setup(s,{emit:u}){const b=s,f=u,p=V(),c=C({get:()=>b.visible,set:t=>f("update:visible",t)}),g=[{type:"index",label:"序号",width:80},{prop:"maintenanceDate",label:"维修日期",width:120,search:{el:"date-picker"}},{prop:"faultDescription",label:"故障描述",width:200},{prop:"maintenanceType",label:"维修类型",width:120,search:{el:"select"}},{prop:"maintenanceUnit",label:"维修单位",width:150},{prop:"maintainer",label:"维修人员",width:120},{prop:"cost",label:"维修费用",width:120},{prop:"startTime",label:"开始时间",width:150},{prop:"endTime",label:"完成时间",width:150},{prop:"status",label:"维修状态",width:120,enum:[{label:"待维修",value:"待维修"},{label:"维修中",value:"维修中"},{label:"已完成",value:"已完成"}],search:{el:"select"}},{prop:"result",label:"维修结果",width:150},{prop:"remarks",label:"备注",width:200},{prop:"operation",label:"操作",width:150,fixed:"right"}],w=async t=>{const e=[{id:1,maintenanceDate:"2023-09-05",faultDescription:"设备显示屏故障，无法正常显示数据",maintenanceType:"硬件维修",maintenanceUnit:"科技维修服务有限公司",maintainer:"王工",cost:1200,startTime:"2023-09-05 10:00:00",endTime:"2023-09-05 15:30:00",status:"已完成",result:"更换显示屏，恢复正常",remarks:"建议每季度进行一次显示屏校准"},{id:2,maintenanceDate:"2023-11-12",faultDescription:"传感器数据异常，测量结果不准确",maintenanceType:"校准维修",maintenanceUnit:"内部维修",maintainer:"赵工",cost:500,startTime:"2023-11-12 09:00:00",endTime:"2023-11-12 12:00:00",status:"已完成",result:"重新校准传感器，测试正常",remarks:"需要定期校准以保证测量精度"}];return{code:200,data:{list:e,pageNum:t.pageNum||1,pageSize:t.pageSize||10,total:e.length}}},y=t=>({待维修:"danger",维修中:"warning",已完成:"success"})[t]||"info",_=()=>{},h=t=>{},v=t=>{z.confirm("确定要删除该维修记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var e;L.success("删除成功"),(e=p.value)==null||e.getTableList()})};return(t,e)=>{var d;const r=U,T=R,k=B,D=$;return N(),E(D,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=o=>c.value=o),title:`${((d=s.device)==null?void 0:d.deviceName)||""} - 维修记录`,width:"70%","close-on-click-modal":!1},{default:a(()=>{var o;return[M("div",j,[i(k,{ref_key:"proTableRef",ref:p,columns:g,"request-api":w,"init-param":{deviceId:(o=s.device)==null?void 0:o.id}},{tableHeader:a(()=>[i(r,{type:"primary",onClick:_},{default:a(()=>e[1]||(e[1]=[l("新增记录")])),_:1})]),operation:a(n=>[i(r,{type:"primary",link:"",onClick:x=>h(n.row)},{default:a(()=>e[2]||(e[2]=[l("编辑")])),_:2},1032,["onClick"]),i(r,{type:"danger",link:"",onClick:x=>v(n.row)},{default:a(()=>e[3]||(e[3]=[l("删除")])),_:2},1032,["onClick"])]),status:a(n=>[i(T,{type:y(n.row.status)},{default:a(()=>[l(S(n.row.status),1)]),_:2},1032,["type"])]),_:1},8,["init-param"])])]}),_:1},8,["modelValue","title"])}}});export{Q as _};
