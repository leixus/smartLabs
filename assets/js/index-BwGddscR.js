/* empty css             *//* empty css                  *//* empty css                   *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                 */import{_ as K}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-dQS8jH7J.js";/* empty css                  *//* empty css                  *//* empty css                  *//* empty css                   *//* empty css               */import{d as L,p as _,j as q,Y as U,i as f,o as s,ab as z,u as i,B as $,w as o,a as C,b as l,c as y,D as H,e as r,F as T,au as J,t as k,C as M,r as A,g as O,_ as ee,$ as ae,K as oe}from"./index-yDSqlga2.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const le={class:"test-items-container"},ne={class:"standard-tags"},se={key:0},de={key:1},ie={class:"dialog-footer"},re={class:"dialog-footer"},me=L({__name:"index",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","confirm"],setup(D,{emit:F}){const E=D,V=F,u=_(E.modelValue),P=_(),R=[{type:"radio",width:55},{prop:"name",label:"名称",minWidth:180,search:{el:"input",props:{placeholder:"请输入名称"}}},{prop:"code",label:"项目编号",minWidth:180,search:{el:"input",props:{placeholder:"请输入项目编号"}}},{prop:"alias",label:"别称",minWidth:180},{prop:"standards",label:"检测标准",minWidth:180},{prop:"testParams",label:"检测参数",minWidth:120},{prop:"isCommon",label:"常用项目",minWidth:100},{prop:"level",label:"所在分级",minWidth:120},{prop:"venue",label:"检测场所",minWidth:120}],x=_([{id:"2",name:"企业标准",alias:"",code:"",standards:[],testParams:[],isCommon:0,category:"",level:"--",venue:"--",children:[{id:"2-1",name:"冲击试验",alias:"冲击韧性测试",code:"GB/T 229",standards:[{code:"GB/T 229",name:"金属材料 夏比摆锤冲击试验方法",version:"2020"}],testParams:["冲击吸收能量","侧膨胀值","断口形貌"],isCommon:1,category:"力学性能",level:"国家标准",venue:"力学实验室"},{id:"2-2",name:"拉伸试验",alias:"拉伸性能测试",code:"GB/T 228.1",standards:[{code:"GB/T 228.1",name:"金属材料 拉伸试验 第1部分：室温试验方法",version:"2021"}],testParams:["抗拉强度","屈服强度","断后伸长率","断面收缩率"],isCommon:1,category:"力学性能",level:"国家标准",venue:"力学实验室"},{id:"2-3",name:"材料成分分析",alias:"成分分析",code:"Q/XYZ-003",standards:[{code:"Q/XYZ-003",name:"材料成分分析方法",version:"2023"}],testParams:["主要成分","杂质含量","微量元素","水分含量"],isCommon:0,category:"化学分析",level:"企业标准",venue:"化学分析室"},{id:"2-4",name:"产品包装测试",alias:"包装测试",code:"Q/XYZ-004",standards:[{code:"Q/XYZ-004",name:"产品包装测试规范",version:"2023"}],testParams:["跌落测试","振动测试","防潮性能","密封性"],isCommon:1,category:"包装测试",level:"企业标准",venue:"包装测试室"}]},{id:"3",name:"国家标准",alias:"",code:"",standards:[],testParams:[],isCommon:0,category:"",level:"--",venue:"--",children:[{id:"3-1",name:"冲击试验",alias:"冲击韧性测试",code:"GB/T 229",standards:[{code:"GB/T 229",name:"金属材料 夏比摆锤冲击试验方法",version:"2020"}],testParams:["冲击吸收能量","侧膨胀值","断口形貌"],isCommon:1,category:"力学性能",level:"国家标准",venue:"力学实验室"},{id:"3-2",name:"拉伸试验",alias:"拉伸性能测试",code:"GB/T 228.1",standards:[{code:"GB/T 228.1",name:"金属材料 拉伸试验 第1部分：室温试验方法",version:"2021"}],testParams:["抗拉强度","屈服强度","断后伸长率","断面收缩率"],isCommon:1,category:"力学性能",level:"国家标准",venue:"力学实验室"},{id:"3-3",name:"硬度试验",alias:"硬度测试",code:"GB/T 231.1",standards:[{code:"GB/T 231.1",name:"金属材料 布氏硬度试验 第1部分：试验方法",version:"2018"}],testParams:["布氏硬度","洛氏硬度","维氏硬度"],isCommon:1,category:"力学性能",level:"国家标准",venue:"力学实验室"},{id:"3-4",name:"弯曲试验",alias:"弯曲性能测试",code:"GB/T 232",standards:[{code:"GB/T 232",name:"金属材料 弯曲试验方法",version:"2010"}],testParams:["弯曲角度","弯曲半径","表面质量"],isCommon:0,category:"力学性能",level:"国家标准",venue:"力学实验室"}]}]),v=_(!1),h=_(),n=q({code:"",name:"",version:""}),S=t=>{h.value=t,v.value=!0},Y=()=>{h.value&&h.value.standards.push({...n}),v.value=!1,n.code="",n.name="",n.version=""},I=t=>{t.isEdit=!0},Q=t=>{t.isEdit=!1},X=t=>{t.isEdit=!1},g=()=>{u.value=!1,V("update:modelValue",!1)};function G(t){let e=[];return t.forEach(m=>{const{children:p,...w}=m;e.push(w),Array.isArray(p)&&p.length>0&&(e=e.concat(G(p)))}),e}const Z=()=>{var m;let t=(m=P.value)==null?void 0:m.radio,e=G(x.value).find(p=>p.id===t);u.value=!1,V("confirm",e),g()};return U(()=>E.modelValue,t=>{u.value=t}),U(()=>u.value,t=>{V("update:modelValue",t)}),(t,e)=>{const m=O,p=M,w=J,c=H,N=K,b=oe,B=ae,j=ee,W=z;return s(),f(W,{modelValue:i(u),"onUpdate:modelValue":e[5]||(e[5]=a=>$(u)?u.value=a:null),title:"检测项目",width:"70%","close-on-click-modal":!1,"destroy-on-close":!0,onClose:g},{footer:o(()=>[C("div",re,[l(c,{onClick:g},{default:o(()=>e[11]||(e[11]=[r("取消")])),_:1}),l(c,{type:"primary",onClick:Z},{default:o(()=>e[12]||(e[12]=[r("确定")])),_:1})])]),default:o(()=>[C("div",le,[l(N,{ref_key:"proTableRef",ref:P,columns:R,data:i(x),pagination:!1,"row-key":"id","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},{standards:o(a=>[C("div",ne,[(s(!0),y(T,null,A(a.row.standards,d=>(s(),f(m,{onClick:ue=>S(a.row),key:d.code,class:"mx-1"},{default:o(()=>[r(k(d.code),1)]),_:2},1032,["onClick"]))),128))])]),testParams:o(a=>[a.row.testParams.length===0?(s(),y("span",se,"--")):(s(),f(p,{key:1,placement:"top",width:200,trigger:"click"},{reference:o(()=>[l(m,{type:"info",class:"mx-1"},{default:o(()=>[r("集合 - "+k(a.row.testParams.length),1)]),_:2},1024)]),default:o(()=>[(s(!0),y(T,null,A(a.row.testParams,d=>(s(),f(m,{type:"info",key:d,class:"m-1"},{default:o(()=>[r(k(d),1)]),_:2},1024))),128))]),_:2},1024))]),isCommon:o(a=>[a.row.isEdit?(s(),f(w,{key:0,modelValue:a.row.isCommon,"onUpdate:modelValue":d=>a.row.isCommon=d,"active-text":"是","inactive-text":"否","active-value":1,"inactive-value":0},null,8,["modelValue","onUpdate:modelValue"])):(s(),y("span",de,k(a.row.isCommon?"是":"否"),1))]),operation:o(a=>[a.row.isEdit?(s(),y(T,{key:1},[l(c,{type:"success",link:"",onClick:d=>Q(a.row)},{default:o(()=>e[7]||(e[7]=[r("保存")])),_:2},1032,["onClick"]),l(c,{type:"danger",link:"",onClick:d=>X(a.row)},{default:o(()=>e[8]||(e[8]=[r("取消")])),_:2},1032,["onClick"])],64)):(s(),f(c,{key:0,type:"primary",link:"",onClick:d=>I(a.row)},{default:o(()=>e[6]||(e[6]=[r("编辑")])),_:2},1032,["onClick"]))]),_:1},8,["data"])]),l(W,{modelValue:i(v),"onUpdate:modelValue":e[4]||(e[4]=a=>$(v)?v.value=a:null),title:"添加检测标准",width:"50%","append-to-body":""},{footer:o(()=>[C("div",ie,[l(c,{onClick:e[3]||(e[3]=a=>v.value=!1)},{default:o(()=>e[9]||(e[9]=[r("取消")])),_:1}),l(c,{type:"primary",onClick:Y},{default:o(()=>e[10]||(e[10]=[r("确定")])),_:1})])]),default:o(()=>[l(j,{model:i(n),"label-width":"100px"},{default:o(()=>[l(B,{label:"标准编号"},{default:o(()=>[l(b,{modelValue:i(n).code,"onUpdate:modelValue":e[0]||(e[0]=a=>i(n).code=a),placeholder:"请输入标准编号"},null,8,["modelValue"])]),_:1}),l(B,{label:"标准名称"},{default:o(()=>[l(b,{modelValue:i(n).name,"onUpdate:modelValue":e[1]||(e[1]=a=>i(n).name=a),placeholder:"请输入标准名称"},null,8,["modelValue"])]),_:1}),l(B,{label:"版本"},{default:o(()=>[l(b,{modelValue:i(n).version,"onUpdate:modelValue":e[2]||(e[2]=a=>i(n).version=a),placeholder:"请输入版本号"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}}),Te=te(me,[["__scopeId","data-v-89587b0f"]]);export{Te as T};
