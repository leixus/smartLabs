/* empty css             *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                  *//* empty css                    *//* empty css                  *//* empty css                 */import"./el-form-item-l0sNRNKZ.js";/* empty css               *//* empty css                  *//* empty css                     *//* empty css                  */import{d as D,p as d,j as B,i as F,o as N,w as t,b as e,_ as j,$ as I,L,M as O,K as R,a5 as S,D as $,e as b,a as _,ab as K}from"./index-yDSqlga2.js";const M={class:"dialog-footer"},T={name:"EventEditDialog"},oe=D({...T,emits:["submit"],setup(z,{expose:V,emit:y}){const n=d(!1),f=d(!1),v=d(!1),p=d(),i=d([]),a=B({type:"",device:"",description:"",impact:"",impactAnalysis:"",measures:"",status:"",attachments:[]}),x={type:[{required:!0,message:"请选择异常类型",trigger:"change"}],device:[{required:!0,message:"请输入设备或试验名称",trigger:"blur"}],description:[{required:!0,message:"请输入异常描述",trigger:"blur"}],impact:[{required:!0,message:"请选择影响程度",trigger:"change"}],impactAnalysis:[{required:!0,message:"请输入影响分析",trigger:"blur"}],measures:[{required:!0,message:"请输入处理措施",trigger:"blur"}],status:[{required:!0,message:"请选择处理状态",trigger:"change"}]},E=r=>{i.value=i.value.slice(-5)},w=async()=>{if(p.value)try{await p.value.validate(),v.value=!0;const r={...a,attachments:i.value};q("submit",r),n.value=!1}catch(r){console.error("表单验证失败:",r)}finally{v.value=!1}},U=r=>{var l;r?(f.value=!0,Object.assign(a,r),i.value=r.attachments||[]):(f.value=!1,(l=p.value)==null||l.resetFields(),i.value=[]),n.value=!0},q=y;return V({show:U}),(r,l)=>{const s=O,c=L,u=I,m=R,g=$,k=S,A=j,C=K;return N(),F(C,{modelValue:n.value,"onUpdate:modelValue":l[8]||(l[8]=o=>n.value=o),title:f.value?"编辑异常事件":"新增异常事件",width:"800px","destroy-on-close":""},{footer:t(()=>[_("span",M,[e(g,{onClick:l[7]||(l[7]=o=>n.value=!1)},{default:t(()=>l[11]||(l[11]=[b("取消")])),_:1}),e(g,{type:"primary",onClick:w,loading:v.value},{default:t(()=>l[12]||(l[12]=[b("确定")])),_:1},8,["loading"])])]),default:t(()=>[e(A,{ref_key:"formRef",ref:p,model:a,rules:x,"label-width":"100px"},{default:t(()=>[e(u,{label:"异常类型",prop:"type"},{default:t(()=>[e(c,{modelValue:a.type,"onUpdate:modelValue":l[0]||(l[0]=o=>a.type=o),placeholder:"请选择异常类型"},{default:t(()=>[e(s,{label:"设备故障",value:"设备故障"}),e(s,{label:"参数异常",value:"参数异常"}),e(s,{label:"操作错误",value:"操作错误"}),e(s,{label:"数据异常",value:"数据异常"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"设备/试验",prop:"device"},{default:t(()=>[e(m,{modelValue:a.device,"onUpdate:modelValue":l[1]||(l[1]=o=>a.device=o),placeholder:"请输入设备或试验名称"},null,8,["modelValue"])]),_:1}),e(u,{label:"异常描述",prop:"description"},{default:t(()=>[e(m,{modelValue:a.description,"onUpdate:modelValue":l[2]||(l[2]=o=>a.description=o),type:"textarea",rows:3,placeholder:"请输入异常描述"},null,8,["modelValue"])]),_:1}),e(u,{label:"影响程度",prop:"impact"},{default:t(()=>[e(c,{modelValue:a.impact,"onUpdate:modelValue":l[3]||(l[3]=o=>a.impact=o),placeholder:"请选择影响程度"},{default:t(()=>[e(s,{label:"高",value:"高"}),e(s,{label:"中",value:"中"}),e(s,{label:"低",value:"低"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"影响分析",prop:"impactAnalysis"},{default:t(()=>[e(m,{modelValue:a.impactAnalysis,"onUpdate:modelValue":l[4]||(l[4]=o=>a.impactAnalysis=o),type:"textarea",rows:3,placeholder:"请输入影响分析"},null,8,["modelValue"])]),_:1}),e(u,{label:"处理措施",prop:"measures"},{default:t(()=>[e(m,{modelValue:a.measures,"onUpdate:modelValue":l[5]||(l[5]=o=>a.measures=o),type:"textarea",rows:3,placeholder:"请输入处理措施"},null,8,["modelValue"])]),_:1}),e(u,{label:"处理状态",prop:"status"},{default:t(()=>[e(c,{modelValue:a.status,"onUpdate:modelValue":l[6]||(l[6]=o=>a.status=o),placeholder:"请选择处理状态"},{default:t(()=>[e(s,{label:"未处理",value:"未处理"}),e(s,{label:"处理中",value:"处理中"}),e(s,{label:"已解决",value:"已解决"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"相关文件"},{default:t(()=>[e(k,{action:"#","auto-upload":!1,"on-change":E,"file-list":i.value},{tip:t(()=>l[10]||(l[10]=[_("div",{class:"text-gray-400 mt-1"},"可上传相关文档、图片等支持材料",-1)])),default:t(()=>[e(g,{type:"primary"},{default:t(()=>l[9]||(l[9]=[b("选择文件")])),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}});export{oe as _};
