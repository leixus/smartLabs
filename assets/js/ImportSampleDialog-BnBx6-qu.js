/* empty css             *//* empty css                  *//* empty css                   *//* empty css               *//* empty css                  */import{d as h,X as N,p as g,i as A,o as F,w as l,a as r,b as a,g as q,e as p,t as c,D as z,u as d,a7 as H,O as L,B as O,ab as U,V as u}from"./index-Djyl84eR.js";import{_ as v}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-D0lzutwe.js";import{g as X}from"./sampleManage-Bn7BfzMl.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                 *//* empty css                    *//* empty css                 *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                  *//* empty css                  */import"./sortable.esm-C83syoBY.js";import"./mock-DhPNTjQr.js";const G={class:"dialog-content"},J={class:"table-section"},K={class:"table-section"},P={class:"dialog-footer"},Q=h({name:"ImportSampleDialog"}),W=h({...Q,props:{modelValue:{type:Boolean,default:!1},initialSelectedSamples:{default:()=>[]}},emits:["update:modelValue","confirm"],setup(C,{emit:k}){const S=C,_=k,m=N({get:()=>S.modelValue,set:t=>_("update:modelValue",t)}),w=g(),V=g(),s=g(S.initialSelectedSamples||[]),b=t=>({待检验:"info",检验中:"warning",已完成:"success",异常:"danger"})[t]||"info",y=t=>({待接收:"info",已接收:"success",已退回:"danger"})[t]||"info",x=[{type:"selection",width:60},{type:"index",label:"序号",width:80},{label:"样品编号",prop:"sampleId",search:{el:"input",props:{placeholder:"请输入样品编号"}}},{label:"登记人",prop:"registrant",search:{el:"input",props:{placeholder:"请输入登记人"}}},{label:"检验状态",prop:"inspectionStatus"},{label:"流转状态",prop:"flowStatus"},{label:"检验部门",prop:"inspectionDepartment"},{label:"规格型号",prop:"specificationModel"}],D=[{type:"selection",width:60},{type:"index",label:"序号",width:80},{label:"样品编号",prop:"sampleId"},{label:"登记人",prop:"registrant"},{label:"检验状态",prop:"inspectionStatus"},{label:"流转状态",prop:"flowStatus"},{label:"检验部门",prop:"inspectionDepartment"},{label:"规格型号",prop:"specificationModel"},{label:"操作",prop:"operation",width:120}],T=async t=>X(t.pageNum,t.pageSize),I=t=>{},M=t=>{if(!(t!=null&&t.length)){u.warning("请选择要导入的样品");return}const e=t.filter(n=>!s.value.some(i=>i.sampleId===n)).map(n=>w.value.tableData.find(i=>i.sampleId===n));if(e.length===0){u.warning("选中的样品已经在已选列表中");return}s.value=[...s.value,...e],s.value,u.success(`成功添加 ${e.length} 个样品`)},B=t=>{s.value=s.value.filter(e=>t.sampleId===e.sampleId),u.success(`成功移除 ${t.sampleId}`)},f=()=>{m.value=!1},R=()=>{if(s.value.length===0){u.warning("请至少选择一个样品");return}_("confirm",s.value),f()};return(t,e)=>{const n=z,i=q,$=U;return F(),A($,{modelValue:d(m),"onUpdate:modelValue":e[0]||(e[0]=o=>O(m)?m.value=o:null),title:"导入样品",width:"70%",top:"100px","destroy-on-close":!0,onClose:f},{footer:l(()=>[r("div",P,[a(n,{onClick:f},{default:l(()=>e[5]||(e[5]=[p("取消")])),_:1}),a(n,{type:"primary",onClick:R},{default:l(()=>e[6]||(e[6]=[p("确定导入")])),_:1})])]),default:l(()=>[r("div",G,[r("div",J,[e[2]||(e[2]=r("div",{class:"section-title"},"可导入样品",-1)),a(v,{ref_key:"allSamplesTableRef",ref:w,columns:x,"request-api":T,pagination:!0,"row-key":"sampleId","max-height":"250",onSelectionChange:I},{tableHeader:l(o=>[a(n,{type:"primary",icon:d(H),onClick:E=>M(o.selectedListIds)},{default:l(()=>e[1]||(e[1]=[p(" 添加到已选 ")])),_:2},1032,["icon","onClick"])]),inspectionStatus:l(o=>[a(i,{type:b(o.row.inspectionStatus),effect:"light"},{default:l(()=>[p(c(o.row.inspectionStatus),1)]),_:2},1032,["type"])]),flowStatus:l(o=>[a(i,{type:y(o.row.flowStatus),effect:"light"},{default:l(()=>[p(c(o.row.flowStatus),1)]),_:2},1032,["type"])]),_:1},512)]),r("div",K,[e[4]||(e[4]=r("div",{class:"section-title"},"已选样品",-1)),a(v,{ref_key:"selectedSamplesTableRef",ref:V,columns:D,"tool-button":!1,data:d(s),pagination:!1},{inspectionStatus:l(o=>[a(i,{type:b(o.row.inspectionStatus),effect:"light"},{default:l(()=>[p(c(o.row.inspectionStatus),1)]),_:2},1032,["type"])]),flowStatus:l(o=>[a(i,{type:y(o.row.flowStatus),effect:"light"},{default:l(()=>[p(c(o.row.flowStatus),1)]),_:2},1032,["type"])]),operation:l(o=>[a(n,{type:"danger",link:"",icon:d(L),onClick:E=>B(o.row)},{default:l(()=>e[3]||(e[3]=[p(" 移除 ")])),_:2},1032,["icon","onClick"])]),_:1},8,["data"])])])]),_:1},8,["modelValue"])}}}),he=j(W,[["__scopeId","data-v-54e152b5"]]);export{he as default};
