/* empty css             *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                  *//* empty css                 *//* empty css                        */import{_ as c}from"./index.vue_vue_type_script_setup_true_name_SFormItem_lang-BaPcQrZE.js";import{_ as A}from"./index.vue_vue_type_script_setup_true_name_SRadioGroup_lang-DgQCsAK8.js";import{d as y,bf as V,bg as N,p as f,j as R,Y as S,i as H,o as U,_ as v,u as o,w as u,b as t,am as F,$ as x,D as K,e as g,cF as Y,cG as M}from"./index-Djyl84eR.js";const Q=y({__name:"loginForm",props:{loginPolicy:{type:Array,required:!0,default:()=>[]}},setup(L){const p=V(),i=p.getDictList(N.YES_NO),d=p.getDictList(N.CAPTCHA_TYPE),s=f(!1),m=f(),l=R({LOGIN_SINGLE_OPEN:i[0].value,LOGIN_CAPTCHA_OPEN:i[0].value,LOGIN_CAPTCHA_TYPE:d[0].value,LOGIN_ERROR_COUNT:5,LOGIN_ERROR_RESET_TIME:5,LOGIN_ERROR_LOCK:30}),I=L;S(()=>I.loginPolicy,a=>{a.forEach(e=>{typeof l[e.configKey]=="number"?l[e.configKey]=Number(e.configValue):l[e.configKey]=e.configValue})});const C=R({LOGIN_ERROR_COUNT:[{required:!0,message:"请输入允许登录错误次数",trigger:"blur"}],LOGIN_ERROR_RESET_TIME:[{required:!0,message:"请输入登录错误重置时间",trigger:"blur"}],LOGIN_ERROR_LOCK:[{required:!0,message:"请输入登录错误次数过多账号锁定时长",trigger:"blur"}],LOGIN_CAPTCHA_TYPE:[{required:!0,message:"请选择登录验证码类型",trigger:"blur"}],LOGIN_SINGLE_OPEN:[{required:!0,message:"请选择单用户登录开关",trigger:"blur"}],LOGIN_CAPTCHA_OPEN:[{required:!0,message:"请选择登录验证码开关",trigger:"blur"}]});function G(){var a;(a=m.value)==null||a.validate(async e=>{if(!e)return;s.value=!0;const _=Object.entries(l).map(n=>({id:0,category:Y.LOGIN_POLICY,configKey:n[0],configValue:typeof n[1]=="object"?JSON.stringify(n[1]):String(n[1])}));M.configEditForm(_).finally(()=>{s.value=!1})})}function T(){var a;(a=m.value)==null||a.resetFields()}return(a,e)=>{const _=A,n=c,O=F,E=K,P=x,b=v;return U(),H(b,{ref_key:"loginFormRef",ref:m,rules:o(C),model:o(l),"label-width":"auto","label-suffix":" :","label-position":"top"},{default:u(()=>[t(n,{label:"单用户登录开关",prop:"LOGIN_SINGLE_OPEN"},{default:u(()=>[t(_,{modelValue:o(l).LOGIN_SINGLE_OPEN,"onUpdate:modelValue":e[0]||(e[0]=r=>o(l).LOGIN_SINGLE_OPEN=r),options:o(i)},null,8,["modelValue","options"])]),_:1}),t(n,{label:"允许登录错误次数",prop:"LOGIN_ERROR_COUNT"},{default:u(()=>[t(O,{modelValue:o(l).LOGIN_ERROR_COUNT,"onUpdate:modelValue":e[1]||(e[1]=r=>o(l).LOGIN_ERROR_COUNT=r),modelModifiers:{number:!0},min:1,max:999},null,8,["modelValue"])]),_:1}),t(n,{label:"登录错误重置时间(分)",prop:"LOGIN_ERROR_RESET_TIME"},{default:u(()=>[t(O,{modelValue:o(l).LOGIN_ERROR_RESET_TIME,"onUpdate:modelValue":e[2]||(e[2]=r=>o(l).LOGIN_ERROR_RESET_TIME=r),modelModifiers:{number:!0},min:1,max:999},null,8,["modelValue"])]),_:1}),t(n,{label:"登录错误次数过多账号锁定时长:(分)",prop:"LOGIN_ERROR_LOCK"},{default:u(()=>[t(O,{modelValue:o(l).LOGIN_ERROR_LOCK,"onUpdate:modelValue":e[3]||(e[3]=r=>o(l).LOGIN_ERROR_LOCK=r),modelModifiers:{number:!0},min:1,max:999},null,8,["modelValue"])]),_:1}),t(n,{label:"登录验证码开关",prop:"LOGIN_CAPTCHA_OPEN"},{default:u(()=>[t(_,{modelValue:o(l).LOGIN_CAPTCHA_OPEN,"onUpdate:modelValue":e[4]||(e[4]=r=>o(l).LOGIN_CAPTCHA_OPEN=r),options:o(i)},null,8,["modelValue","options"])]),_:1}),t(n,{label:"登录验证码类型",prop:"LOGIN_CAPTCHA_TYPE"},{default:u(()=>[t(_,{modelValue:o(l).LOGIN_CAPTCHA_TYPE,"onUpdate:modelValue":e[5]||(e[5]=r=>o(l).LOGIN_CAPTCHA_TYPE=r),options:o(d)},null,8,["modelValue","options"])]),_:1}),t(P,null,{default:u(()=>[t(E,{type:"primary",loading:o(s),onClick:e[6]||(e[6]=r=>G())},{default:u(()=>e[7]||(e[7]=[g("保存")])),_:1},8,["loading"]),t(E,{style:{"margin-left":"10px"},onClick:T},{default:u(()=>e[8]||(e[8]=[g("重置")])),_:1})]),_:1})]),_:1},8,["rules","model"])}}});export{Q as _};
