/* empty css             *//* empty css                *//* empty css                 *//* empty css                       *//* empty css                 *//* empty css                  */import"./el-form-item-l0sNRNKZ.js";/* empty css               *//* empty css                  *//* empty css                     *//* empty css                  */import{l as z}from"./pathPlanning-DQCgwyW3.js";import{d as I,p as v,j as M,Y as L,c as p,o as r,b as t,Z as N,a as i,w as o,$ as G,L as K,F as y,r as b,i as V,M as O,D as Y,e as P,ak as Z,al as q,K as A,_ as H,t as $,V as x}from"./index-ClSyKtod.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"shortest-path-container"},X={key:0},S={class:"flex items-center w-100"},ee={key:0,class:"path-result border border-gray-300 rounded p-4 mb-4"},le={class:"mb-2"},te={class:"path-visualization border border-gray-300 rounded p-2 h-120"},ae=I({__name:"index",emits:["pathCalculated"],setup(oe,{expose:E,emit:w}){const g=v(z.facilities.map(u=>u.name)),n=v([]),l=M({startPoint:"",endPoint:"",routeType:"auxiliary",routeName:""}),c=v(null),F=v(),U=()=>{n.value.push("")},W=u=>{n.value.splice(u,1)},B=u=>g.value.filter(e=>{if(e===l.startPoint||e===l.endPoint)return!1;for(let s=0;s<n.value.length;s++)if(s!==u&&n.value[s]===e)return!1;return!0});L([()=>l.startPoint,()=>l.endPoint,n],([u,e])=>{if(u&&e)if(n.value.length>0){const s=n.value.filter(d=>d);s.length>0?l.routeName=`${u}-${s.join("-")}-${e}路线`:l.routeName=`${u}-${e}路线`}else l.routeName=`${u}-${e}路线`},{deep:!0});const h=()=>{if(!l.startPoint||!l.endPoint){x.warning("请选择起点和终点");return}if(n.value.filter(d=>!d).length>0){x.warning("请选择所有途经点或删除空的途经点");return}const e=[l.startPoint,...n.value,l.endPoint],s=500;c.value={path:e,distance:s},D("pathCalculated",c.value)},D=w;return E({calculatePath:h,getCalculatedPath:()=>c.value}),(u,e)=>{const s=O,d=K,m=G,k=Y,C=q,R=Z,T=A,j=H;return r(),p("div",Q,[t(j,{model:l,"label-width":"100px",class:"mb-4"},{default:o(()=>[t(m,{label:"起点"},{default:o(()=>[t(d,{modelValue:l.startPoint,"onUpdate:modelValue":e[0]||(e[0]=a=>l.startPoint=a),placeholder:"选择起点",class:"w-full"},{default:o(()=>[(r(!0),p(y,null,b(g.value,a=>(r(),V(s,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n.value.length>0?(r(),p("div",X,[(r(!0),p(y,null,b(n.value,(a,f)=>(r(),V(m,{key:f,label:`途经点 ${f+1}`},{default:o(()=>[i("div",S,[t(d,{modelValue:n.value[f],"onUpdate:modelValue":_=>n.value[f]=_,placeholder:"选择途经点",class:"flex-1 mr-2"},{default:o(()=>[(r(!0),p(y,null,b(B(f),_=>(r(),V(s,{key:_,label:_,value:_},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),t(k,{type:"danger",icon:"Delete",circle:"",onClick:_=>W(f)},null,8,["onClick"])])]),_:2},1032,["label"]))),128))])):N("",!0),t(m,null,{default:o(()=>[t(k,{type:"primary",plain:"",onClick:U},{default:o(()=>e[4]||(e[4]=[P("添加途经点")])),_:1})]),_:1}),t(m,{label:"终点"},{default:o(()=>[t(d,{modelValue:l.endPoint,"onUpdate:modelValue":e[1]||(e[1]=a=>l.endPoint=a),placeholder:"选择终点",class:"w-full"},{default:o(()=>[(r(!0),p(y,null,b(g.value,a=>(r(),V(s,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"路线类型"},{default:o(()=>[t(R,{modelValue:l.routeType,"onUpdate:modelValue":e[2]||(e[2]=a=>l.routeType=a)},{default:o(()=>[t(C,{label:"main"},{default:o(()=>e[5]||(e[5]=[P("主路线")])),_:1}),t(C,{label:"auxiliary"},{default:o(()=>e[6]||(e[6]=[P("辅助路线")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"路线名称"},{default:o(()=>[t(T,{modelValue:l.routeName,"onUpdate:modelValue":e[3]||(e[3]=a=>l.routeName=a),placeholder:"输入路线名称"},null,8,["modelValue"])]),_:1}),t(m,null,{default:o(()=>[t(k,{type:"primary",onClick:h},{default:o(()=>e[7]||(e[7]=[P("计算最短路径")])),_:1})]),_:1})]),_:1},8,["model"]),c.value?(r(),p("div",ee,[e[10]||(e[10]=i("h3",{class:"text-lg font-medium mb-2"},"计算结果",-1)),i("div",le,[e[8]||(e[8]=i("span",{class:"font-medium"},"路径: ",-1)),i("span",null,$(c.value.path.join(" → ")),1)]),i("div",null,[e[9]||(e[9]=i("span",{class:"font-medium"},"距离: ",-1)),i("span",null,$(c.value.distance)+" 米",1)])])):N("",!0),i("div",te,[i("div",{ref_key:"pathVisualizationRef",ref:F,class:"w-full h-full"},null,512)])])}}}),Ve=J(ae,[["__scopeId","data-v-1978ba1c"]]);export{Ve as default};
