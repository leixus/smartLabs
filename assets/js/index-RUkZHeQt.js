/* empty css             *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css                  *//* empty css                         *//* empty css                 */import{d as T,p,az as $,Y as _,ae as L,X as O,a9 as U,c as E,o as V,Z as X,a as x,b as s,t as A,K as Y,P as Z,w as r,x as j,S as G,T as H,e as v,bq as J,aF as Q,u as N,bs as W,aa as ee}from"./index-ClSyKtod.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const le={class:"card filter"},ae={key:0,class:"title sle"},oe={class:"search"},ne={class:"el-tree-node__label"},se=T({name:"TreeFilter"}),de=T({...se,props:{requestApi:{},data:{},title:{},id:{default:"id"},label:{default:"label"},multiple:{type:Boolean,default:!1},defaultValue:{},defaultExpandAll:{type:Boolean,default:!0},defaultExpandLevel:{default:1},checkStrictly:{type:Boolean,default:!1},topName:{default:"全部"},showAll:{type:Boolean,default:!0}},emits:["change"],setup(D,{expose:B,emit:S}){const l=D,K={children:"children",label:l.label},d=p(),f=p([]),c=p([]),m=p(),h=()=>{l.multiple?m.value=Array.isArray(l.defaultValue)?l.defaultValue:[l.defaultValue]:m.value=typeof l.defaultValue=="string"?l.defaultValue:""};$(async()=>{h(),await C()}),_(()=>l.defaultValue,()=>L(()=>h()),{deep:!0,immediate:!0});const g=e=>{l.showAll?c.value=[{id:"",[l.label]:l.topName},...e]:c.value=e};_(()=>l.data,()=>{var e;(e=l.data)!=null&&e.length&&(f.value=l.data,g(l.data))},{deep:!0,immediate:!0});const k=p("");_(k,e=>{d.value.filter(e)});const I=(e,t,o)=>{if(!e)return!0;let a=o.parent,n=[o.label],i=1;for(;i<o.level;)n=[...n,a.label],a=a.parent,i++;return n.some(y=>y.indexOf(e)!==-1)},w=e=>{var o;let t=(o=d.value)==null?void 0:o.store.nodesMap;if(t)for(const a in t)t.hasOwnProperty(a)&&(t[a].expanded=e)},b=S,M=e=>{l.multiple||b("change",e[l.id],e)},q=()=>{var e,t;(e=d.value)==null||e.getCheckedKeys(),b("change",(t=d.value)==null?void 0:t.getCheckedKeys())},R=async()=>{var e,t;(e=d.value)==null||e.setCheckedKeys([]),(t=d.value)==null||t.setCurrentKey(""),h(),await C()},C=async()=>{const{data:e}=await l.requestApi();f.value=e,g(e)},z=O(()=>{if(!l.defaultExpandAll){let e=[];const t=(o,a)=>{o.forEach(n=>{n.children&&n.children.length>0&&a>=1&&(t(n.children,a-1),e.push(n.id))})};return t(c.value,l.defaultExpandLevel),e}return[]});return B({treeData:f,treeAllData:c,treeRef:d,refresh:R}),(e,t)=>{const o=Y,a=U("More"),n=j,i=H,y=G,F=Z,P=J;return V(),E("div",le,[e.title?(V(),E("h4",ae,A(e.title),1)):X("",!0),x("div",oe,[s(o,{modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=u=>k.value=u),placeholder:"输入关键字进行过滤",clearable:""},null,8,["modelValue"]),s(F,{trigger:"click"},{dropdown:r(()=>[s(y,null,{default:r(()=>[s(i,{onClick:t[1]||(t[1]=u=>w(!0))},{default:r(()=>t[3]||(t[3]=[v("展开全部")])),_:1}),s(i,{onClick:t[2]||(t[2]=u=>w(!1))},{default:r(()=>t[4]||(t[4]=[v("折叠全部")])),_:1})]),_:1})]),default:r(()=>[s(n,{size:"20"},{default:r(()=>[s(a)]),_:1})]),_:1})]),s(P,{style:Q({height:e.title?"calc(100% - 95px)":"calc(100% - 56px)"})},{default:r(()=>[s(N(W),{ref_key:"treeRef",ref:d,"default-expand-all":e.defaultExpandAll,"node-key":e.id,data:e.multiple?f.value:c.value,"show-checkbox":e.multiple,"check-strictly":e.checkStrictly,"current-node-key":e.multiple?"":m.value,"highlight-current":!e.multiple,"expand-on-click-node":!1,"check-on-click-node":e.multiple,props:K,"filter-node-method":I,"default-checked-keys":e.multiple?m.value:[],"default-expanded-keys":N(z),onNodeClick:M,onCheck:q},{default:r(u=>[x("span",ne,[ee(e.$slots,"default",{row:u},()=>[v(A(u.node.label),1)],!0)])]),_:3},8,["default-expand-all","node-key","data","show-checkbox","check-strictly","current-node-key","highlight-current","check-on-click-node","default-checked-keys","default-expanded-keys"])]),_:3},8,["style"])])}}}),ye=te(de,[["__scopeId","data-v-8e6adac6"]]);export{ye as T};
