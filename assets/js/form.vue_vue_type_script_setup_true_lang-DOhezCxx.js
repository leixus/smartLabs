import{_ as $}from"./index-DKovId2h.js";/* empty css             *//* empty css                  *//* empty css                *//* empty css                  *//* empty css                 *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  */import{_ as B}from"./index.vue_vue_type_script_setup_true_name_OrgSelector_lang-ONhJMdgU.js";import{_ as N}from"./index.vue_vue_type_script_setup_true_name_SRadioGroup_lang-CjHYIDxt.js";import{_ as T}from"./index.vue_vue_type_script_setup_true_name_SFormItem_lang-CkA160Xq.js";import{_ as q}from"./index.vue_vue_type_script_setup_true_name_SInput_lang-Byk8g2NW.js";import{d as G,p as g,bf as L,bg as y,j as D,i as S,o as v,w as a,b as r,_ as j,u as o,Z as z,cD as M,bm as H,aH as P,D as Y,e as C,aI as Z,B as J,bz as K,bG as O}from"./index-ClSyKtod.js";import{F as R}from"./formEnum-CT3LisML.js";import{r as i}from"./formRules-BdD8zfEi.js";import Q from"./dataScopeSelector-oL6TDhH2.js";const _e=G({__name:"form",setup(W,{expose:U}){const n=g(!1),m=L(),p=m.getDictList(y.ROLE_CATEGORY),c=m.getDictList(y.COMMON_STATUS),e=D({opt:R.ADD,record:{},disabled:!1}),k=D({name:[i("请输入角色名称")],orgId:[i("请选择所属组织")],category:[i("请选择角色类型")],status:[i("请选择状态")]});function E(s){Object.assign(e,s),s.opt==R.ADD&&(e.record.sortCode=99,e.record.category=p[0].value,e.record.status=c[0].value,e.record.defaultDataScope=K.dataScopeOptions[0]),n.value=!0,s.record.id&&O.detail({id:s.record.id}).then(t=>{e.record=t.data})}const f=g();async function w(){var s;(s=f.value)==null||s.validate(async t=>{t&&await O.submitForm(e.record,e.record.id!=null).then(()=>{e.successful()}).finally(()=>{u()})})}function u(){n.value=!1}return U({onOpen:E}),(s,t)=>{const _=q,d=T,b=N,x=B,F=H,A=j,V=Y,I=$;return v(),S(I,{modelValue:o(n),"onUpdate:modelValue":t[7]||(t[7]=l=>J(n)?n.value=l:null),title:`${o(e).opt}角色`,"form-size":"800px",onClose:u},{footer:a(()=>[r(V,{onClick:u},{default:a(()=>t[8]||(t[8]=[C(" 取消 ")])),_:1}),P(r(V,{type:"primary",onClick:w},{default:a(()=>t[9]||(t[9]=[C(" 确定 ")])),_:1},512),[[Z,!o(e).disabled]])]),default:a(()=>[r(A,{ref_key:"sysRoleFormRef",ref:f,rules:o(k),disabled:o(e).disabled,model:o(e).record,"hide-required-asterisk":o(e).disabled,"label-width":"auto","label-suffix":" :"},{default:a(()=>[r(d,{label:"角色名称",prop:"name"},{default:a(()=>[r(_,{modelValue:o(e).record.name,"onUpdate:modelValue":t[0]||(t[0]=l=>o(e).record.name=l)},null,8,["modelValue"])]),_:1}),r(d,{label:"角色分类",prop:"category"},{default:a(()=>[r(b,{modelValue:o(e).record.category,"onUpdate:modelValue":t[1]||(t[1]=l=>o(e).record.category=l),options:o(p),button:""},null,8,["modelValue","options"])]),_:1}),o(e).record.category===o(M).ORG?(v(),S(d,{key:0,label:"所属组织",prop:"orgId"},{default:a(()=>[r(x,{"org-value":o(e).record.orgId,"onUpdate:orgValue":t[2]||(t[2]=l=>o(e).record.orgId=l)},null,8,["org-value"])]),_:1})):z("",!0),r(d,{label:"角色编码",prop:"code"},{default:a(()=>[r(_,{modelValue:o(e).record.code,"onUpdate:modelValue":t[3]||(t[3]=l=>o(e).record.code=l),placeholder:"请填写角色编码,不填则为随机值"},null,8,["modelValue"])]),_:1}),r(d,{label:"默认数据范围",prop:"code"},{default:a(()=>[r(Q,{modelValue:o(e).record.defaultDataScope,"onUpdate:modelValue":t[4]||(t[4]=l=>o(e).record.defaultDataScope=l)},null,8,["modelValue"])]),_:1}),r(d,{label:"状态",prop:"status"},{default:a(()=>[r(b,{modelValue:o(e).record.status,"onUpdate:modelValue":t[5]||(t[5]=l=>o(e).record.status=l),options:o(c),button:""},null,8,["modelValue","options"])]),_:1}),r(d,{label:"排序",prop:"sortCode"},{default:a(()=>[r(F,{modelValue:o(e).record.sortCode,"onUpdate:modelValue":t[6]||(t[6]=l=>o(e).record.sortCode=l),"show-input":"",min:1},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","disabled","model","hide-required-asterisk"])]),_:1},8,["modelValue","title"])}}});export{_e as _};
