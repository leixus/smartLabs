/* empty css             *//* empty css                  *//* empty css                   */import{_ as E}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-dQS8jH7J.js";/* empty css               *//* empty css                  */import{d as P,p as c,c as B,o as $,b as o,ab as M,u as n,B as z,w as t,a as m,g as A,e as p,t as _,D as F,a7 as H,O as I,V as d}from"./index-yDSqlga2.js";import{g as O}from"./deviceLifecycle-Ct6WR7q2.js";/* empty css                 *//* empty css                   */import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                 *//* empty css                    *//* empty css                 *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                  *//* empty css                  */import"./sortable.esm-C83syoBY.js";import"./mock-Dosj8-Nv.js";const j={class:"equipment-selector"},G={class:"table-box"},J={class:"table-box"},K=P({__name:"index",emits:["update:modelValue","select"],setup(L,{expose:g,emit:y}){const v=y,s=c(!1),C=[{type:"selection",width:60},{type:"index",label:"序号",width:80},{prop:"deviceCode",label:"设备编号",width:150,search:{el:"input",props:{placeholder:"请输入设备编号"}}},{prop:"deviceName",label:"设备名称",width:150,search:{el:"input",props:{placeholder:"请输入设备名称"}}},{prop:"deviceStatus",label:"设备状态",width:100,enum:[{label:"正常",value:"正常"},{label:"维修中",value:"维修中"},{label:"报废",value:"报废"},{label:"闲置",value:"闲置"}],search:{el:"select",props:{placeholder:"请选择设备状态",clearable:!0}}},{prop:"runningStatus",label:"运行状态",width:100,enum:[{label:"运行中",value:"运行中"},{label:"停用",value:"停用"},{label:"待机",value:"待机"}],search:{el:"select",props:{placeholder:"请选择运行状态",clearable:!0}}},{prop:"specification",label:"规格型号",width:120},{prop:"accuracyRequirement",label:"精度要求",width:120},{prop:"quantity",label:"数量（台/套）",width:140},{prop:"manufacturer",label:"制造厂商",width:150},{prop:"storageLocation",label:"存放地点",width:150,search:{el:"input",props:{placeholder:"请输入存放地点"}}},{prop:"responsiblePerson",label:"设备责任人",width:120,search:{el:"input",props:{placeholder:"请输入设备责任人"}}},{prop:"assetNumber",label:"资产编号",width:120},{prop:"supplierPhone",label:"供货商联系电话",width:150},{prop:"remarks",label:"备注",width:200}],k=[{type:"selection",width:60},{type:"index",label:"序号",width:80},{prop:"deviceCode",label:"设备编号",width:150},{prop:"deviceName",label:"设备名称",width:150},{prop:"deviceStatus",label:"设备状态",width:100,enum:[{label:"正常",value:"正常"},{label:"维修中",value:"维修中"},{label:"报废",value:"报废"},{label:"闲置",value:"闲置"}]},{prop:"runningStatus",label:"运行状态",width:100,enum:[{label:"运行中",value:"运行中"},{label:"停用",value:"停用"},{label:"待机",value:"待机"}]},{prop:"specification",label:"规格型号",width:120},{prop:"accuracyRequirement",label:"精度要求",width:120},{prop:"quantity",label:"数量（台/套）",width:140},{prop:"manufacturer",label:"制造厂商",width:150},{prop:"storageLocation",label:"存放地点",width:150},{prop:"responsiblePerson",label:"设备责任人",width:120},{prop:"assetNumber",label:"资产编号",width:120},{prop:"supplierPhone",label:"供货商联系电话",width:150},{prop:"remarks",label:"备注",width:200},{prop:"operation",label:"操作",width:150,fixed:"right"}],x=l=>Promise.resolve(O(l.pageNum,l.pageSize)),r=c([]),b=c(!1),h=c(),V=()=>{s.value=!0,N()},N=async l=>{b.value=!0;try{}finally{b.value=!1}},S=l=>{if(!(l!=null&&l.length)){d.warning("请选择要导入的样品");return}const e=l.filter(i=>!r.value.some(u=>u.deviceCode===i.deviceCode));if(e.length===0){d.warning("选中的样品已经在已选列表中");return}r.value=[...r.value,...e],d.success(`成功添加 ${e.length} 个设备`)},T=l=>{r.value=r.value.filter(e=>l.deviceCode===e.deviceCode),d.success(`成功移除 "${l.deviceName}"`)},q=()=>{if(r.value.length===0){d.warning("请选择设备");return}v("select",r.value),f()},f=()=>{s.value=!1,v("update:modelValue",!1)};return g({open:V}),(l,e)=>{const i=F,u=A,w=E,R=M;return $(),B("div",j,[o(R,{modelValue:n(s),"onUpdate:modelValue":e[0]||(e[0]=a=>z(s)?s.value=a:null),title:"选择设备",width:"80%",top:"50px","destroy-on-close":!0,onClose:f},{footer:t(()=>[o(i,{onClick:f},{default:t(()=>e[3]||(e[3]=[p("取消")])),_:1}),o(i,{type:"primary",onClick:q},{default:t(()=>e[4]||(e[4]=[p("确定")])),_:1})]),default:t(()=>[e[5]||(e[5]=m("div",{class:"form-title !mt-0"},"所有设备",-1)),m("div",G,[o(w,{ref_key:"proTableRef",ref:h,columns:C,"request-api":x,"row-key":"deviceCode"},{tableHeader:t(a=>[o(i,{type:"primary",icon:n(H),onClick:D=>S(a.selectedList)},{default:t(()=>e[1]||(e[1]=[p(" 添加到已选 ")])),_:2},1032,["icon","onClick"])]),status:t(a=>[o(u,{type:a.row.status==="正常"?"success":"danger"},{default:t(()=>[p(_(a.row.status),1)]),_:2},1032,["type"])]),_:1},512)]),e[6]||(e[6]=m("div",{class:"form-title"},"已选设备",-1)),m("div",J,[o(w,{ref_key:"proTableRef",ref:h,columns:k,data:n(r),loading:n(b),"tool-button":!1,"row-key":"deviceCode"},{status:t(a=>[o(u,{type:a.row.status==="正常"?"success":"danger"},{default:t(()=>[p(_(a.row.status),1)]),_:2},1032,["type"])]),operation:t(a=>[o(i,{type:"danger",link:"",icon:n(I),onClick:D=>T(a.row)},{default:t(()=>e[2]||(e[2]=[p(" 移除 ")])),_:2},1032,["icon","onClick"])]),_:1},8,["data","loading"])])]),_:1},8,["modelValue"])])}}}),ye=U(K,[["__scopeId","data-v-a20c8f9f"]]);export{ye as default};
