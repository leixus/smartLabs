/* empty css             *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                  */import"./el-form-item-l0sNRNKZ.js";/* empty css                  *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";/* empty css                         *//* empty css                  *//* empty css                    */import{d as H,X as $,p as c,i as y,o as _,w as a,a as s,e as u,b as o,t as i,bI as j,D as K,bN as X,c as k,F as Y,r as Z,u as l,bO as z,Z as J,ab as Q,B as S,_ as W,$ as ee,bm as te,L as se,M as oe,K as ae,V as D}from"./index-ClSyKtod.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const re={class:"progress-container"},ne={class:"progress-header"},ie={class:"progress-info"},de={class:"info-item"},pe={class:"value"},ue={class:"info-item"},me={class:"value"},ce={class:"info-item"},_e={class:"progress-actions"},fe={class:"progress-timeline"},ge={class:"timeline-content"},ve={class:"timeline-title"},Ve={class:"timeline-desc"},be={class:"timeline-meta"},Ee={class:"operator"},ye={key:0,class:"duration"},ke={class:"dialog-footer"},Se=H({__name:"index",props:{modelValue:{type:Boolean,default:!1},planData:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(d,{emit:C}){const b=d,N=C,f=$({get:()=>b.modelValue,set:r=>N("update:modelValue",r)}),p=c(!1),g=c(),n=c({progress:0,status:"NORMAL",remark:""}),T={0:"委托接收",10:"生成计划",40:"任务分解",80:"任务分配",90:"试验执行",100:"试验结束"},R={progress:[{required:!0,message:"请选择进度",trigger:"change"}],status:[{required:!0,message:"请选择完成情况",trigger:"change"}],remark:[{required:!0,message:"请输入备注说明",trigger:"blur"}]},w=c([{title:"开始执行",description:"任务开始执行",status:"SUCCESS",updateTime:"2025-03-15 09:00:00",operator:"张三",duration:"2小时"},{title:"完成第一阶段",description:"完成样品制备",status:"SUCCESS",updateTime:"2025-03-15 11:00:00",operator:"李四",duration:"1.5小时"},{title:"进行中",description:"正在进行力学性能测试",status:"PROCESSING",updateTime:"2025-03-15 12:30:00",operator:"王五"}]),U=r=>r>=100?"success":r>=80?"warning":"",I=r=>({SUCCESS:"success",PROCESSING:"primary",ERROR:"danger",NOT_STARTED:"info"})[r]||"info",O=()=>{n.value.progress=b.planData.progress||0,p.value=!0},x=()=>{D.info("查看历史记录")},B=async()=>{g.value&&await g.value.validate(r=>{r&&(D.success("进度更新成功"),p.value=!1)})};return(r,e)=>{const F=j,m=K,M=z,P=X,A=te,v=ee,V=oe,h=se,L=ae,q=W,E=Q;return _(),y(E,{modelValue:l(f),"onUpdate:modelValue":e[5]||(e[5]=t=>S(f)?f.value=t:null),title:"进度跟踪",width:"70%","destroy-on-close":""},{default:a(()=>[s("div",re,[s("div",ne,[s("div",ie,[s("div",de,[e[6]||(e[6]=s("span",{class:"label"},"计划编号：",-1)),s("span",pe,i(d.planData.planNo),1)]),s("div",ue,[e[7]||(e[7]=s("span",{class:"label"},"计划名称：",-1)),s("span",me,i(d.planData.planName),1)]),s("div",ce,[e[8]||(e[8]=s("span",{class:"label"},"当前进度：",-1)),o(F,{percentage:d.planData.progress,status:U(d.planData.progress)},null,8,["percentage","status"])])]),s("div",_e,[o(m,{type:"primary",onClick:O},{default:a(()=>e[9]||(e[9]=[u("更新进度")])),_:1}),o(m,{onClick:x},{default:a(()=>e[10]||(e[10]=[u("查看历史")])),_:1})])]),u(" "+i(d.planData)+" ",1),s("div",fe,[o(P,null,{default:a(()=>[(_(!0),k(Y,null,Z(l(w),(t,G)=>(_(),y(M,{key:G,type:I(t.status),timestamp:t.updateTime,hollow:t.status==="PENDING"},{default:a(()=>[s("div",ge,[s("div",ve,i(t.title),1),s("div",Ve,i(t.description),1),s("div",be,[s("span",Ee,"操作人："+i(t.operator),1),t.duration?(_(),k("span",ye," 耗时："+i(t.duration),1)):J("",!0)])])]),_:2},1032,["type","timestamp","hollow"]))),128))]),_:1})]),o(E,{modelValue:l(p),"onUpdate:modelValue":e[4]||(e[4]=t=>S(p)?p.value=t:null),title:"更新进度",width:"50%","append-to-body":""},{footer:a(()=>[s("span",ke,[o(m,{onClick:e[3]||(e[3]=t=>p.value=!1)},{default:a(()=>e[11]||(e[11]=[u("取消")])),_:1}),o(m,{type:"primary",onClick:B},{default:a(()=>e[12]||(e[12]=[u("确定")])),_:1})])]),default:a(()=>[o(q,{ref_key:"updateFormRef",ref:g,model:l(n),rules:R,"label-width":"100px"},{default:a(()=>[o(v,{label:"当前进度",prop:"progress",class:"!mb-10"},{default:a(()=>[o(A,{modelValue:l(n).progress,"onUpdate:modelValue":e[0]||(e[0]=t=>l(n).progress=t),marks:T},null,8,["modelValue"])]),_:1}),o(v,{label:"完成情况",prop:"status"},{default:a(()=>[o(h,{modelValue:l(n).status,"onUpdate:modelValue":e[1]||(e[1]=t=>l(n).status=t),placeholder:"请选择完成情况"},{default:a(()=>[o(V,{label:"正常",value:"NORMAL"}),o(V,{label:"延迟",value:"DELAYED"}),o(V,{label:"提前",value:"AHEAD"})]),_:1},8,["modelValue"])]),_:1}),o(v,{label:"备注说明",prop:"remark"},{default:a(()=>[o(L,{modelValue:l(n).remark,"onUpdate:modelValue":e[2]||(e[2]=t=>l(n).remark=t),type:"textarea",rows:3,placeholder:"请输入备注说明"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])}}}),Ge=le(Se,[["__scopeId","data-v-569ec04d"]]);export{Ge as default};
