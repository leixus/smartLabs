/* empty css             *//* empty css                  *//* empty css                   */import{_ as z}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-D0lzutwe.js";/* empty css                    *//* empty css               */import{d as F,p,Y as f,X as Y,i as P,o as i,w as a,a as y,b as u,bI as L,g as N,e as c,t as s,c as l,s as M,a8 as j,J}from"./index-Djyl84eR.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                 *//* empty css                    *//* empty css                 *//* empty css                  *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                  */import"./sortable.esm-C83syoBY.js";const U={class:"table-box"},W={class:"content-cell"},X={key:1,class:"task-content"},$={key:2,class:"route-content"},q={key:3},K={key:0,class:"task-tags-container"},Q={class:"task-tags"},Z={key:1,class:"no-task"},tt=F({__name:"AgvHistoryDrawer",props:{visible:{type:Boolean,default:!1},agvList:{type:Array,default:()=>[]}},emits:["update:visible"],setup(h,{emit:_}){const T=h,b=_,d=p(T.visible),k=[{label:"AGV ID",prop:"agvId",width:120,sortable:!0,search:{el:"input",props:{placeholder:"请输入AGV ID"}}},{label:"名称",prop:"name",width:150,search:{el:"input",props:{placeholder:"请输入AGV名称"}}},{label:"记录类型",prop:"type",width:150,sortable:!0},{label:"关联任务",prop:"task",width:150},{label:"当前位置",prop:"location",width:150},{label:"当前路线",prop:"route",width:150},{label:"设备状态",prop:"status",width:120},{label:"运行状态",prop:"runningStatus",width:120},{label:"消耗电量",prop:"battery",width:150,search:{el:"input",props:{placeholder:"请输入消耗电量"}}},{label:"内容",prop:"content",minWidth:200,showOverflowTooltip:!0},{label:"操作人",prop:"operator",width:120,sortable:!0,search:{el:"input",props:{placeholder:"请输入操作人"}}},{label:"任务开始时间",prop:"startTime",width:180,sortable:!0},{label:"任务结束时间",prop:"endTime",width:180,sortable:!0}];f(()=>T.visible,t=>{d.value=t}),f(()=>d.value,t=>{b("update:visible",t)});const n=p({agvId:"",type:"",dateRange:""}),v=p(1),A=p(10),V=p([{id:"H001",agvId:"AGV-001",name:"AGV-001",type:"status",task:"物料运输",location:"仓库A-3区",route:"A-B-C路线",status:"警告",runningStatus:"运行中",battery:15,content:"状态从 [正常] 变更为 [警告]",operator:"系统",startTime:"2025-03-01T08:30:00",endTime:"2025-03-01T09:30:00"},{id:"H002",agvId:"AGV-001",name:"AGV-001",type:"maintenance",task:"无",location:"维修车间",route:"无",status:"维护中",runningStatus:"停止",battery:100,content:"完成常规维护，更换电池",operator:"张工程师",startTime:"2025-03-02T14:15:00",endTime:"2025-03-02T16:15:00"},{id:"H003",agvId:"AGV-002",name:"AGV-002",type:"task",task:"物料运输",location:"生产线B-2区",route:"D-E-F路线",status:"正常",runningStatus:"繁忙",battery:85,content:"分配新任务: 物料运输",operator:"李调度",startTime:"2025-03-03T09:45:00",endTime:"2025-03-03T11:45:00"},{id:"H004",agvId:"AGV-003",name:"AGV-003",type:"status",task:"无",location:"仓库C-1区",route:"无",status:"故障",runningStatus:"停止",battery:0,content:"状态从 [正常] 变更为 [故障]",operator:"系统",startTime:"2025-03-04T16:20:00",endTime:"2025-03-04T17:20:00"},{id:"H005",agvId:"AGV-002",name:"AGV-002",type:"route",task:"无",location:"无",route:"路线变更: 从 [A-B-C路线] 到 [D-E-F路线]",status:"正常",runningStatus:"运行中",battery:85,content:"路线变更: 从 [A-B-C路线] 到 [D-E-F路线]",operator:"王调度",startTime:"2025-03-05T11:10:00",endTime:"2025-03-05T12:10:00"},{id:"H006",agvId:"AGV-001",name:"AGV-001",type:"task",task:"设备配送",location:"仓库A-1区",route:"无",status:"正常",runningStatus:"运行中",battery:100,content:"完成任务: 设备配送",operator:"系统",startTime:"2025-03-06T15:30:00",endTime:"2025-03-06T16:30:00"},{id:"H007",agvId:"AGV-003",name:"AGV-003",type:"maintenance",task:"无",location:"维修车间",route:"无",status:"维护中",runningStatus:"停止",battery:100,content:"紧急维修: 更换电机控制器",operator:"赵工程师",startTime:"2025-03-07T10:45:00",endTime:"2025-03-07T12:45:00"},{id:"H008",agvId:"AGV-004",name:"AGV-004",type:"status",task:"无",location:"仓库D-2区",route:"无",status:"正常",runningStatus:"运行中",battery:100,content:"状态从 [维护中] 变更为 [正常]",operator:"系统",startTime:"2025-03-08T09:15:00",endTime:"2025-03-08T10:15:00"},{id:"H009",agvId:"AGV-002",name:"AGV-002",type:"task",task:"成品转运",location:"生产线B-3区",route:"无",status:"正常",runningStatus:"繁忙",battery:85,content:"分配新任务: 成品转运",operator:"李调度",startTime:"2025-03-09T14:20:00",endTime:"2025-03-09T16:20:00"},{id:"H010",agvId:"AGV-001",name:"AGV-001",type:"route",task:"无",location:"无",route:"路线变更: 从 [D-E-F路线] 到 [A-B-C路线]",status:"正常",runningStatus:"运行中",battery:100,content:"路线变更: 从 [D-E-F路线] 到 [A-B-C路线]",operator:"王调度",startTime:"2025-03-10T11:30:00",endTime:"2025-03-10T12:30:00"},{id:"H011",agvId:"AGV-004",name:"AGV-004",type:"task",task:"巡检任务",location:"仓库D-1区",route:"无",status:"正常",runningStatus:"运行中",battery:100,content:"分配新任务: 巡检任务",operator:"李调度",startTime:"2025-03-11T08:45:00",endTime:"2025-03-11T10:45:00"},{id:"H012",agvId:"AGV-003",name:"AGV-003",type:"status",task:"无",location:"仓库C-2区",route:"无",status:"维护中",runningStatus:"停止",battery:100,content:"状态从 [故障] 变更为 [维护中]",operator:"系统",startTime:"2025-03-12T16:10:00",endTime:"2025-03-12T17:10:00"}]),G=Y(()=>{let t=[...V.value];if(n.value.agvId&&(t=t.filter(r=>r.agvId===n.value.agvId)),n.value.type&&(t=t.filter(r=>r.type===n.value.type)),n.value.dateRange&&n.value.dateRange[0]&&n.value.dateRange[1]){const r=new Date(n.value.dateRange[0]),o=new Date(n.value.dateRange[1]);o.setHours(23,59,59,999),t=t.filter(g=>{const m=new Date(g.startTime);return m>=r&&m<=o})}return t}),S=t=>J(t).format("YYYY-MM-DD HH:mm:ss"),w=t=>{switch(t){case"status":return"warning";case"task":return"success";case"maintenance":return"danger";case"route":return"info";default:return"info"}},D=t=>{switch(t){case"status":return"状态变更";case"task":return"任务分配";case"maintenance":return"维护记录";case"route":return"路线变更";default:return t}},I=t=>{A.value=t,v.value=1},H=t=>{v.value=t},C=t=>t.includes("正常")?"status-normal":t.includes("警告")?"status-warning":t.includes("故障")?"status-error":t.includes("维护中")?"status-maintenance":"",B=t=>{switch(t){case"正常":return"success";case"警告":return"warning";case"故障":return"danger";case"维护中":return"info";default:return"info"}},x=t=>{switch(t){case"空闲":return"info";case"繁忙":return"warning";case"运行中":return"success";case"充电中":return"warning";case"停止":return"danger";default:return"info"}},E=t=>t>=50?"success":t>=20?"warning":"exception";return(t,r)=>{const o=N,g=L,m=z,R=j;return i(),P(R,{modelValue:d.value,"onUpdate:modelValue":r[0]||(r[0]=e=>d.value=e),title:"AGV历史记录",size:"100%","destroy-on-close":!1},{default:a(()=>[y("div",U,[u(m,{"row-key":"id",columns:k,data:G.value,onPageChange:H,onSizeChange:I,"max-height":"calc(100vh - 300px)"},{timestamp:a(({row:e})=>[c(s(S(e.startTime)),1)]),type:a(({row:e})=>[u(o,{type:w(e.type)},{default:a(()=>[c(s(D(e.type)),1)]),_:2},1032,["type"])]),content:a(({row:e})=>[y("div",W,[e.type==="status"?(i(),l("span",{key:0,class:M(C(e.content))},s(e.content),3)):e.type==="task"?(i(),l("span",X,s(e.content),1)):e.type==="route"?(i(),l("span",$,s(e.content),1)):(i(),l("span",q,s(e.content),1))])]),operator:a(({row:e})=>[u(o,{size:"small",type:e.operator==="系统"?"info":"success"},{default:a(()=>[c(s(e.operator),1)]),_:2},1032,["type"])]),task:a(({row:e})=>[e.task!=="无"?(i(),l("div",K,[y("div",Q,[u(o,{type:"success",class:"task-tag"},{default:a(()=>[c(s(e.task),1)]),_:2},1024)])])):(i(),l("span",Z,"无"))]),status:a(({row:e})=>[u(o,{type:B(e.status)},{default:a(()=>[c(s(e.status),1)]),_:2},1032,["type"])]),runningStatus:a(({row:e})=>[u(o,{type:x(e.runningStatus)},{default:a(()=>[c(s(e.runningStatus),1)]),_:2},1032,["type"])]),battery:a(({row:e})=>[u(g,{percentage:e.battery,status:E(e.battery)},null,8,["percentage","status"])]),_:1},8,["data"])])]),_:1},8,["modelValue"])}}}),At=O(tt,[["__scopeId","data-v-a6ccb744"]]);export{At as default};
