import{_ as U}from"./index-BhKoq_Rb.js";/* empty css             *//* empty css                  *//* empty css                *//* empty css                  *//* empty css                 *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  */import{_ as F}from"./index.vue_vue_type_script_setup_true_name_SRadioGroup_lang-DRblrf2T.js";import{_ as A}from"./index.vue_vue_type_script_setup_true_name_OrgSelector_lang-BiN7E4y6.js";import{_ as E}from"./index.vue_vue_type_script_setup_true_name_SFormItem_lang-CMD2z1PW.js";import{_ as I}from"./index.vue_vue_type_script_setup_true_name_SInput_lang-C8CF6EG3.js";import{d as $,p as c,bf as z,bg as B,j as _,i as q,o as N,w as l,b as r,_ as T,u as t,bh as j,bm as M,aH as H,D as L,e as b,aI as P,B as G,bz as J,bo as V}from"./index-yDSqlga2.js";import{F as g}from"./formEnum-CT3LisML.js";import{r as i}from"./formRules-BdD8zfEi.js";import K from"./dataScopeSelector-Cr-J-kh9.js";const fe=$({__name:"form",setup(Q,{expose:S}){const d=c(!1),u=z().getDictList(B.COMMON_STATUS),e=_({opt:g.ADD,record:{},disabled:!1}),v=_({name:[i("请输入角色名称")],orgId:[i("请选择所属组织")],category:[i("请选择角色类型")],status:[i("请选择状态")]});function D(s){Object.assign(e,s),s.opt==g.ADD&&(e.record.sortCode=99,e.record.status=u[0].value,e.record.defaultDataScope=J.dataScopeOptions[0]),d.value=!0,s.record.id&&V.detail({id:s.record.id}).then(o=>{e.record=o.data})}const p=c();async function y(){var s;(s=p.value)==null||s.validate(async o=>{o&&await V.submitForm(e.record,e.record.id!=null).then(()=>{e.successful()}).finally(()=>{m()})})}function m(){d.value=!1}return S({onOpen:D}),(s,o)=>{const C=I,n=E,w=A,O=F,R=M,k=T,f=L,x=U;return N(),q(x,{modelValue:t(d),"onUpdate:modelValue":o[5]||(o[5]=a=>G(d)?d.value=a:null),title:`${t(e).opt}角色`,"form-size":"800px",onClose:m},{footer:l(()=>[r(f,{onClick:m},{default:l(()=>o[6]||(o[6]=[b(" 取消 ")])),_:1}),H(r(f,{type:"primary",onClick:y},{default:l(()=>o[7]||(o[7]=[b(" 确定 ")])),_:1},512),[[P,!t(e).disabled]])]),default:l(()=>[r(k,{ref_key:"sysRoleFormRef",ref:p,rules:t(v),disabled:t(e).disabled,model:t(e).record,"hide-required-asterisk":t(e).disabled,"label-width":"auto","label-suffix":" :"},{default:l(()=>[r(n,{label:"角色名称",prop:"name"},{default:l(()=>[r(C,{modelValue:t(e).record.name,"onUpdate:modelValue":o[0]||(o[0]=a=>t(e).record.name=a)},null,8,["modelValue"])]),_:1}),r(n,{label:"所属组织",prop:"orgId"},{default:l(()=>[r(w,{"org-value":t(e).record.orgId,"onUpdate:orgValue":o[1]||(o[1]=a=>t(e).record.orgId=a),"org-tree-api":t(j).tree,"show-all":!1},null,8,["org-value","org-tree-api"])]),_:1}),r(n,{label:"默认数据范围",prop:"code"},{default:l(()=>[r(K,{modelValue:t(e).record.defaultDataScope,"onUpdate:modelValue":o[2]||(o[2]=a=>t(e).record.defaultDataScope=a)},null,8,["modelValue"])]),_:1}),r(n,{label:"状态",prop:"status"},{default:l(()=>[r(O,{modelValue:t(e).record.status,"onUpdate:modelValue":o[3]||(o[3]=a=>t(e).record.status=a),options:t(u),button:""},null,8,["modelValue","options"])]),_:1}),r(n,{label:"排序",prop:"sortCode"},{default:l(()=>[r(R,{modelValue:t(e).record.sortCode,"onUpdate:modelValue":o[4]||(o[4]=a=>t(e).record.sortCode=a),"show-input":"",min:1},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","disabled","model","hide-required-asterisk"])]),_:1},8,["modelValue","title"])}}});export{fe as _};
