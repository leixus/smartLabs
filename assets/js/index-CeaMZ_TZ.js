/* empty css             *//* empty css               *//* empty css                *//* empty css                *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                  *//* empty css                 *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";import"./el-form-item-l0sNRNKZ.js";import"./index-C6bx8goA.js";import{d as O,j as R,p as L,q as j,aB as q,c as _,o as v,b as o,z as $,w as s,_ as G,$ as Z,am as H,bm as J,L as K,M as Q,D as W,e as y,a as l,Z as X,F as Y,r as ee,g as te,t as w,V as S,ae as oe}from"./index-yDSqlga2.js";import{i as le}from"./install-CPD1cr-Y.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";const se={class:"panel-content grid grid-cols-1 lg:grid-cols-3 gap-4"},ie={class:"result-display h-64 border border-gray-300 rounded p-2"},ne={key:0,class:"h-full"},re={key:1,class:"flex items-center justify-center h-full text-gray-500"},de={key:0,class:"mt-4"},me={class:"bg-gray-100 p-2 rounded"},ue={class:"bg-gray-100 p-2 rounded mt-1"},pe=O({__name:"index",setup(ce,{expose:A}){const e=R({weight:100,volume:1.5,distance:500,battery:80,roadType:"flat"}),T=L();let i=null;const m=L(null),C=()=>{if(e.weight<=0||e.volume<=0||e.distance<=0){S.warning("请输入有效的负载参数");return}const c=e.weight/e.volume;let t=e.weight*e.distance*.01;const g={flat:1,slight_slope:1.3,steep_slope:1.8,rough:1.5}[e.roadType];t*=g;const u=Math.min(100,t/50);e.battery<u&&S.warning(`当前电量不足以完成任务，预计需要至少 ${Math.ceil(u)}% 的电量`);const p=[];c>500?p.push({text:"货物密度过高，建议分批运输以减少单次负载",priority:"high"}):c<100&&p.push({text:"货物密度较低，可考虑增加单次运输量以提高效率",priority:"medium"}),e.roadType==="steep_slope"?p.push({text:"陡峭坡度路段建议降低速度至60%，减少能耗",priority:"high"}):e.roadType==="rough"&&p.push({text:"不平整路面建议降低速度至70%，提高稳定性",priority:"medium"}),e.battery<30?p.push({text:"电量较低，建议先充电或选择更短的路径",priority:"high"}):e.battery<50&&p.push({text:"电量适中，建议开启节能模式",priority:"medium"}),e.weight>300?p.push({text:"重量较大，建议降低加速度以减少能耗",priority:"high"}):e.weight<50&&p.push({text:"重量较轻，可提高速度以增加效率",priority:"low"});const h=Math.round(Math.random()*15+10),z=Math.round(Math.random()*20+15),V=Math.round(Math.random()*10+5),f=Array.from({length:10},(n,r)=>Math.round(e.distance*(r+1)/10)),b=[10,20,30,40,45,45,40,30,20,10].map(n=>n*6.67),M=b.map((n,r)=>{let d=1;return e.roadType==="steep_slope"?d*=.6:e.roadType==="slight_slope"?d*=.8:e.roadType==="rough"&&(d*=.7),e.weight>300?d*=.7:e.weight>150&&(d*=.85),e.battery<30&&(d*=.8),Math.min(300,Math.max(0,Math.round(n*d)))}),a=f.map((n,r)=>{const d=r===0?n:n-f[r-1],x=b[r];return Math.round(d/x*60)}),E=f.map((n,r)=>{const d=r===0?n:n-f[r-1],x=M[r];return Math.round(d/x*60)}),N=f.map((n,r)=>{const d=a.slice(0,r+1).reduce((k,P)=>k+P,0)/5,x=E.slice(0,r+1).reduce((k,P)=>k+P,0)/5;return[Math.min(100,d),Math.min(100,x)]});m.value={energySaving:h,batteryLifeExtension:z,efficiencyImprovement:V,suggestions:p,speedProfile:M,timeProfile:E,batteryDrain:N.map(n=>n[1])},oe(()=>{U()}),S.success("负载优化计算完成")},U=()=>{if(!T.value||!m.value)return;i&&i.dispose(),i=le(T.value);const c=Array.from({length:10},(g,u)=>Math.round(e.distance*(u+1)/10)),t={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["速度(m/min)","时间(秒)","电池消耗(%)"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:c,name:"距离(m)"},yAxis:{type:"value",name:"数值"},series:[{name:"速度(m/min)",type:"line",data:m.value.speedProfile,smooth:!0,lineStyle:{width:3,color:"#409EFF"},symbol:"circle",symbolSize:8},{name:"时间(秒)",type:"bar",data:m.value.timeProfile,itemStyle:{color:"#67C23A"}},{name:"电池消耗(%)",type:"line",data:m.value.batteryDrain,smooth:!0,lineStyle:{width:2,type:"dashed",color:"#E6A23C"},symbol:"square",symbolSize:6}]};i.setOption(t)},D=()=>{e.weight=100,e.volume=1.5,e.distance=500,e.battery=80,e.roadType="flat",m.value=null,i&&(i.dispose(),i=null),S.info("已重置表单")},B=c=>{switch(c){case"high":return"danger";case"medium":return"warning";case"low":return"info";default:return"info"}},I=c=>{switch(c){case"high":return"高优先级";case"medium":return"中优先级";case"low":return"低优先级";default:return"建议"}},F=()=>{i==null||i.resize()};return j(()=>{window.addEventListener("resize",F)}),q(()=>{window.removeEventListener("resize",F),i==null||i.dispose()}),A({loadForm:e,optimizeLoad:C,resetForm:D}),(c,t)=>{const g=H,u=Z,p=J,h=Q,z=K,V=W,f=G,b=$,M=te;return v(),_("div",se,[o(b,{class:"h-full"},{header:s(()=>t[5]||(t[5]=[l("div",{class:"card-header"},[l("span",{class:"text-lg font-medium"},"负载参数设置")],-1)])),default:s(()=>[o(f,{model:e,"label-width":"100px",class:"w-full"},{default:s(()=>[o(u,{label:"货物重量(kg)"},{default:s(()=>[o(g,{modelValue:e.weight,"onUpdate:modelValue":t[0]||(t[0]=a=>e.weight=a),min:0,max:50},null,8,["modelValue"])]),_:1}),o(u,{label:"货物体积(m³)"},{default:s(()=>[o(g,{modelValue:e.volume,"onUpdate:modelValue":t[1]||(t[1]=a=>e.volume=a),min:0,max:1,precision:2},null,8,["modelValue"])]),_:1}),o(u,{label:"运输距离(m)"},{default:s(()=>[o(g,{modelValue:e.distance,"onUpdate:modelValue":t[2]||(t[2]=a=>e.distance=a),min:0,max:1e3},null,8,["modelValue"])]),_:1}),o(u,{label:"AGV电量(%)"},{default:s(()=>[o(p,{modelValue:e.battery,"onUpdate:modelValue":t[3]||(t[3]=a=>e.battery=a),min:0,max:100},null,8,["modelValue"])]),_:1}),o(u,{label:"路面类型"},{default:s(()=>[o(z,{modelValue:e.roadType,"onUpdate:modelValue":t[4]||(t[4]=a=>e.roadType=a),placeholder:"选择路面类型"},{default:s(()=>[o(h,{label:"平整路面",value:"flat"}),o(h,{label:"轻微坡度",value:"slight_slope"}),o(h,{label:"陡峭坡度",value:"steep_slope"}),o(h,{label:"不平整路面",value:"rough"})]),_:1},8,["modelValue"])]),_:1}),o(u,null,{default:s(()=>[o(V,{type:"primary",onClick:C},{default:s(()=>t[6]||(t[6]=[y("优化负载")])),_:1}),o(V,{onClick:D},{default:s(()=>t[7]||(t[7]=[y("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),o(b,{class:"h-full col-span-2"},{header:s(()=>t[8]||(t[8]=[l("div",{class:"card-header"},[l("span",{class:"text-lg font-medium"},"优化方案")],-1)])),default:s(()=>[l("div",ie,[m.value?(v(),_("div",ne,[l("div",{ref_key:"optimizationChartRef",ref:T,class:"w-full h-full"},null,512)])):(v(),_("div",re,"负载优化方案将在此显示"))]),m.value?(v(),_("div",de,[t[12]||(t[12]=l("div",{class:"text-sm font-medium mb-2"},"优化建议:",-1)),l("div",me,[(v(!0),_(Y,null,ee(m.value.suggestions,(a,E)=>(v(),_("div",{key:E,class:"mb-1"},[o(M,{type:B(a.priority),size:"small",class:"mr-1"},{default:s(()=>[y(w(I(a.priority)),1)]),_:2},1032,["type"]),y(" "+w(a.text),1)]))),128))]),t[13]||(t[13]=l("div",{class:"mt-2 text-sm font-medium"},"预计节能效果:",-1)),l("div",ue,[l("div",null,[t[9]||(t[9]=l("span",{class:"font-medium"},"能耗降低:",-1)),y(" "+w(m.value.energySaving)+"%",1)]),l("div",null,[t[10]||(t[10]=l("span",{class:"font-medium"},"电池寿命延长:",-1)),y(" "+w(m.value.batteryLifeExtension)+"%",1)]),l("div",null,[t[11]||(t[11]=l("span",{class:"font-medium"},"运行效率提升:",-1)),y(" "+w(m.value.efficiencyImprovement)+"%",1)])])])):X("",!0)]),_:1})])}}}),Ce=ae(pe,[["__scopeId","data-v-595538a6"]]);export{Ce as default};
