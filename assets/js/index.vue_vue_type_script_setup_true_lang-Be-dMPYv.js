import{_ as I}from"./index-BhKoq_Rb.js";/* empty css             *//* empty css                  */import{_ as B}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-dQS8jH7J.js";import{_ as R,u as V}from"./useHandleData-B5JvVrK5.js";import{d as N,p as i,c as L,o as P,b as o,u as a,B as S,w as s,a as h,e as k,D as A,cx as x}from"./index-yDSqlga2.js";import{F as p}from"./formEnum-CT3LisML.js";import{_ as F}from"./form.vue_vue_type_script_setup_true_lang-DIVbafcP.js";import{_ as H}from"./batch.vue_vue_type_script_setup_true_lang-CCBpbtGz.js";const J={class:"table-box min-h-300px"},Y=N({__name:"index",setup(q,{expose:C}){const r=i(!1),u=i(0),m=i(),E=[{type:"selection",fixed:"left",width:50},{prop:"title",label:"名称"},{prop:"code",label:"编码"},{prop:"sortCode",label:"排序"},{prop:"description",label:"说明"},{prop:"operation",label:"操作",width:150,fixed:"right"}],d=i(null);function _(t,e={parentId:u.value}){var n;(n=d.value)==null||n.onOpen({opt:t,record:e,successful:()=>c()})}const b=i(null);function T(){var t;(t=b.value)==null||t.onOpen({parentId:u.value,title:"",code:"",successful:c})}async function v(t,e){await V(x.delete,{ids:t},e),c()}function c(){var t;(t=m.value)==null||t.refresh()}function $(t){r.value=!0,u.value=t}function w(){r.value=!1}function y(t){let e=JSON.parse(JSON.stringify(t));return e.parentId=u.value,x.page(e)}return C({onOpenTable:$}),(t,e)=>{const n=R,D=B,O=A,g=I;return P(),L("div",null,[o(g,{modelValue:a(r),"onUpdate:modelValue":e[2]||(e[2]=l=>S(r)?r.value=l:null),title:"权限按钮","form-size":"60%"},{footer:s(()=>[o(O,{type:"primary",onClick:w},{default:s(()=>e[4]||(e[4]=[k(" 确定 ")])),_:1})]),default:s(()=>[h("div",J,[o(D,{ref_key:"proTable",ref:m,title:"按钮列表",class:"table",columns:E,"request-api":y},{tableHeader:s(l=>[o(n,{suffix:"按钮",onClick:e[0]||(e[0]=f=>_(a(p).ADD))}),o(n,{onClick:e[1]||(e[1]=f=>T())},{default:s(()=>e[3]||(e[3]=[k(" 批量新增 ")])),_:1}),o(n,{type:"danger",plain:"",suffix:"按钮",opt:a(p).DELETE,disabled:!l.isSelected,onClick:f=>v(l.selectedListIds,"删除所选按钮")},null,8,["opt","disabled","onClick"])]),operation:s(l=>[o(n,{link:"",opt:a(p).EDIT,onClick:f=>_(a(p).EDIT,l.row)},null,8,["opt","onClick"]),o(n,{link:"",opt:a(p).DELETE,onClick:f=>v([l.row.id],`删除【${l.row.title}】按钮`)},null,8,["opt","onClick"])]),_:1},512)])]),_:1},8,["modelValue"]),o(F,{ref_key:"formRef",ref:d},null,512),o(H,{ref_key:"batchRef",ref:b},null,512)])}}});export{Y as _};
