/* empty css             *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                  *//* empty css               */import{_ as ie}from"./index.vue_vue_type_script_setup_true_name_SRadioGroup_lang-DRblrf2T.js";import{_ as re}from"./index.vue_vue_type_script_setup_true_name_MenuSelector_lang-Ag--xU1K.js";import{_ as de}from"./index.vue_vue_type_script_setup_true_name_SInput_lang-C8CF6EG3.js";/* empty css               */import{_ as pe}from"./index.vue_vue_type_script_setup_true_name_SFormItem_lang-CMD2z1PW.js";/* empty css                        *//* empty css                  *//* empty css                    */import{d as x,cH as _e,p as R,aV as me,aw as q,bj as Se,br as fe,X as ce,a9 as N,c as U,o as Y,b as l,a as E,i as Q,Z as W,a5 as Oe,s as ge,w as o,F as h,x as ee,a4 as Ee,aa as J,cI as Te,cJ as Ye,bS as D,bf as Ce,bg as Z,j as K,ca as ye,Y as ve,cf as X,_ as Re,u as a,I as Ue,y as be,cy as Ve,r as Ie,e as I,t as Ne,g as Le,D as Ae,$ as Fe,ab as ke,B as Be,bm as Pe,cF as we,cG as De}from"./index-yDSqlga2.js";import{_ as Ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as c}from"./formRules-BdD8zfEi.js";const Ge={class:"upload-box"},He=["src"],$e={key:1,class:"upload-empty"},Me={class:"el-upload__tip"},We=x({name:"UploadImg"}),xe=x({...We,props:{imageUrl:{default:""},api:{},drag:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},fileSize:{default:5},fileType:{default:()=>["image/jpeg","image/png","image/gif"]},height:{default:"150px"},width:{default:"150px"},borderRadius:{default:"8px"},autoUpload:{type:Boolean,default:!0}},emits:["update:imageUrl"],setup(G,{emit:P}){_e(s=>({"06780534":s.width,fc2694f2:s.height,"7aca583e":s.borderRadius}));const O=G,w=R("id-"+me()),L=R(!1),g=q(Se,void 0),C=q(fe,void 0),t=ce(()=>O.disabled||(g==null?void 0:g.disabled)),A=P,H=async s=>{if(!O.autoUpload)M(s.file).then(u=>{A("update:imageUrl",u)});else{let u=new FormData;u.append("file",s.file);try{const m=O.api??Ye.uploadImg,{data:p}=await m(u);A("update:imageUrl",p.fileUrl),C!=null&&C.prop&&(g==null||g.validateField([C.prop]))}catch(m){s.onError(m)}}},T=()=>{A("update:imageUrl","")},y=()=>{const s=document.querySelector(`#${w.value} .el-upload__input`);s&&s.dispatchEvent(new MouseEvent("click"))},b=s=>{const u=s.size/1024/1024<O.fileSize,m=O.fileType.includes(s.type);return m||D({title:"温馨提示",message:"上传图片不符合所需的格式！",type:"warning"}),u||setTimeout(()=>{D({title:"温馨提示",message:`上传图片大小不能超过 ${O.fileSize}M！`,type:"warning"})},0),m&&u},d=()=>{O.autoUpload&&D({title:"温馨提示",message:"图片上传成功！",type:"success"})},$=()=>{D({title:"温馨提示",message:"图片上传失败，请您重新上传！",type:"error"})},M=s=>new Promise((u,m)=>{const p=new FileReader;p.readAsDataURL(s),p.onload=()=>u(p.result),p.onerror=F=>m(F)});return(s,u)=>{const m=N("Edit"),p=ee,F=N("ZoomIn"),i=N("Delete"),e=N("Plus"),S=Oe,_=Te;return Y(),U("div",Ge,[l(S,{id:w.value,action:"#",class:ge(["upload",t.value?"disabled":"",s.drag?"no-border":""]),multiple:!1,disabled:t.value,"show-file-list":!1,"http-request":H,"before-upload":b,"on-success":d,"on-error":$,drag:s.drag,accept:s.fileType.join(",")},{default:o(()=>[s.imageUrl?(Y(),U(h,{key:0},[E("img",{src:s.imageUrl,class:"upload-image"},null,8,He),E("div",{class:"upload-handle",onClick:u[1]||(u[1]=Ee(()=>{},["stop"]))},[t.value?W("",!0):(Y(),U("div",{key:0,class:"handle-icon",onClick:y},[l(p,null,{default:o(()=>[l(m)]),_:1}),u[3]||(u[3]=E("span",null,"编辑",-1))])),E("div",{class:"handle-icon",onClick:u[0]||(u[0]=V=>L.value=!0)},[l(p,null,{default:o(()=>[l(F)]),_:1}),u[4]||(u[4]=E("span",null,"查看",-1))]),t.value?W("",!0):(Y(),U("div",{key:1,class:"handle-icon",onClick:T},[l(p,null,{default:o(()=>[l(i)]),_:1}),u[5]||(u[5]=E("span",null,"删除",-1))]))])],64)):(Y(),U("div",$e,[J(s.$slots,"empty",{},()=>[l(p,null,{default:o(()=>[l(e)]),_:1})],!0)]))]),_:3},8,["id","class","disabled","drag","accept"]),E("div",Me,[J(s.$slots,"tip",{},void 0,!0)]),L.value?(Y(),Q(_,{key:0,"url-list":[s.imageUrl],onClose:u[2]||(u[2]=V=>L.value=!1)},null,8,["url-list"])):W("",!0)])}}}),ze=Ke(xe,[["__scopeId","data-v-724b2311"]]),je={class:"dialog-footer"},Ol=x({__name:"sysBaseConfig",props:{sysConfigs:{type:Array,required:!0,default:()=>[]}},setup(G){const P=Ce(),O=P.getDictList(Z.COMMON_STATUS),w=P.getDictList(Z.TENANT_OPTIONS),L=["image/x-icon"],g=R(!1),C=R(),t=K({SYS_NAME:"",SYS_LOGO:"",SYS_ICO:"",SYS_VERSION:"",SYS_COPYRIGHT:"",SYS_COPYRIGHT_URL:"",SYS_DEFAULT_WORKBENCH_DATA:{shortcut:[]},SYS_WEB_STATUS:O[0].value,SYS_WEB_CLOSE_PROMPT:"",SYS_TENANT_OPTIONS:ye.CLOSE,SYS_FOOTER_LINKS:[]}),A=G;ve(()=>A.sysConfigs,i=>{i.forEach(e=>{if(e.configKey==X.SYS_DEFAULT_WORKBENCH_DATA){const S=JSON.parse(e.configValue);t.SYS_DEFAULT_WORKBENCH_DATA=S}else if(e.configKey==X.SYS_FOOTER_LINKS){const S=JSON.parse(e.configValue);t.SYS_FOOTER_LINKS=S}else t[e.configKey]=e.configValue})});const H=K({SYS_NAME:[c("请输入系统名称")],SYS_LOGO:[c("请上传系统LOGO")],SYS_ICO:[c("请上传系统ICO")],SYS_VERSION:[c("请输入系统版本")],SYS_COPYRIGHT:[c("请输入系统版权")],SYS_COPYRIGHT_URL:[c("请输入系统版权链接")],SYS_DEFAULT_WORKBENCH_DATA:[c("请输入系统默认工作台数据")],SYS_WEB_STATUS:[c("请选择网站开启访问状态")],SYS_WEB_CLOSE_PROMPT:[c("请输入网站关闭提示")]}),T=R(!1),y=R({name:"",url:"",sortCode:99}),b=R(),d=K({name:"",url:"",sortCode:99}),$=K({name:[c("请输入超链接名称")],url:[c("请输入超链接地址")],sortCode:[c("请输入排序")]});function M(i){t.SYS_FOOTER_LINKS=t.SYS_FOOTER_LINKS.filter(e=>e.name!=i)}function s(i){y.value=i,d.name=i.name,d.url=i.url,d.sortCode=i.sortCode,T.value=!0}function u(){T.value=!0}function m(){var i;(i=b.value)==null||i.validate(async e=>{var S;e&&(y.value.name&&(t.SYS_FOOTER_LINKS=t.SYS_FOOTER_LINKS.filter(_=>_.name!=y.value.name)),t.SYS_FOOTER_LINKS.push({...d}),t.SYS_FOOTER_LINKS.sort((_,V)=>_.sortCode-V.sortCode),T.value=!1,y.value.name="",y.value.url="",y.value.sortCode=99,(S=b.value)==null||S.resetFields())})}function p(){var i;(i=C.value)==null||i.validate(async e=>{if(!e)return;g.value=!0;const S=Object.entries(t).map(_=>({id:0,category:we.SYS_BASE,configKey:_[0],configValue:typeof _[1]=="object"?JSON.stringify(_[1]):String(_[1])}));De.configEditForm(S).finally(()=>{g.value=!1})})}function F(){var i,e;(i=C.value)==null||i.resetFields(),(e=b.value)==null||e.resetFields()}return(i,e)=>{const S=N("Avatar"),_=ee,V=ze,r=pe,f=be,le=N("Picture"),k=Ue,v=de,oe=re,z=ie,te=Le,B=Ae,ae=Fe,j=Re,ne=Pe,se=ke;return Y(),U("div",null,[l(j,{ref_key:"sysConfigFormRef",ref:C,rules:a(H),model:a(t),"label-width":"auto","label-suffix":" :","label-position":"top"},{default:o(()=>[l(k,{gutter:16},{default:o(()=>[l(f,{span:8},{default:o(()=>[l(r,{label:"系统LOGO",prop:"SYS_LOGO"},{default:o(()=>[l(V,{"image-url":a(t).SYS_LOGO,"onUpdate:imageUrl":e[0]||(e[0]=n=>a(t).SYS_LOGO=n),width:"135px",height:"135px","file-size":3,"auto-upload":!1},{empty:o(()=>[l(_,null,{default:o(()=>[l(S)]),_:1}),e[17]||(e[17]=E("span",null,"请上传LOGO",-1))]),_:1},8,["image-url"])]),_:1})]),_:1}),l(f,{span:8},{default:o(()=>[l(r,{label:"系统ico文件",prop:"SYS_ICO"},{default:o(()=>[l(V,{"image-url":a(t).SYS_ICO,"onUpdate:imageUrl":e[1]||(e[1]=n=>a(t).SYS_ICO=n),width:"135px",height:"135px","file-size":1,"file-type":L,"auto-upload":!1},{empty:o(()=>[l(_,null,{default:o(()=>[l(le)]),_:1}),e[18]||(e[18]=E("span",null,"请上传.ICO文件",-1))]),_:1},8,["image-url"])]),_:1})]),_:1})]),_:1}),l(k,{gutter:16},{default:o(()=>[l(f,{span:8},{default:o(()=>[l(r,{label:"系统名称",prop:"SYS_NAME"},{default:o(()=>[l(v,{modelValue:a(t).SYS_NAME,"onUpdate:modelValue":e[2]||(e[2]=n=>a(t).SYS_NAME=n)},null,8,["modelValue"])]),_:1})]),_:1}),l(f,{span:8},{default:o(()=>[l(r,{label:"系统版本",prop:"SYS_VERSION"},{default:o(()=>[l(v,{modelValue:a(t).SYS_VERSION,"onUpdate:modelValue":e[3]||(e[3]=n=>a(t).SYS_VERSION=n)},null,8,["modelValue"])]),_:1})]),_:1}),l(f,{span:8},{default:o(()=>[l(r,{label:"默认快捷方式",prop:"SYS_DEFAULT_WORKBENCH_DATA"},{default:o(()=>[l(oe,{"menu-value":a(t).SYS_DEFAULT_WORKBENCH_DATA.shortcut,"onUpdate:menuValue":e[4]||(e[4]=n=>a(t).SYS_DEFAULT_WORKBENCH_DATA.shortcut=n),multiple:"","check-strictly":!1,"menu-tree-api":a(Ve).menuTreeSelector},null,8,["menu-value","menu-tree-api"])]),_:1})]),_:1})]),_:1}),l(k,{gutter:16},{default:o(()=>[l(f,{span:8},{default:o(()=>[l(r,{label:"多租户配置",prop:"SYS_TENANT_OPTIONS"},{default:o(()=>[l(z,{modelValue:a(t).SYS_TENANT_OPTIONS,"onUpdate:modelValue":e[5]||(e[5]=n=>a(t).SYS_TENANT_OPTIONS=n),options:a(w),button:""},null,8,["modelValue","options"])]),_:1})]),_:1}),l(f,{span:8},{default:o(()=>[l(r,{label:"版权信息",prop:"SYS_COPYRIGHT"},{default:o(()=>[l(v,{modelValue:a(t).SYS_COPYRIGHT,"onUpdate:modelValue":e[6]||(e[6]=n=>a(t).SYS_COPYRIGHT=n)},null,8,["modelValue"])]),_:1})]),_:1}),l(f,{span:8},{default:o(()=>[l(r,{label:"版权链接URL",prop:"SYS_COPYRIGHT_URL"},{default:o(()=>[l(v,{modelValue:a(t).SYS_COPYRIGHT_URL,"onUpdate:modelValue":e[7]||(e[7]=n=>a(t).SYS_COPYRIGHT_URL=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(k,{gutter:16},{default:o(()=>[l(f,{span:8},{default:o(()=>[l(r,{label:"底部超链接",prop:"SYS_FOOTER_LINKS"},{default:o(()=>[(Y(!0),U(h,null,Ie(a(t).SYS_FOOTER_LINKS,n=>(Y(),Q(te,{key:n.name,class:"mx-1",closable:"","disable-transitions":!1,onClose:ue=>M(n.name),onClick:ue=>s(n)},{default:o(()=>[I(Ne(n.name),1)]),_:2},1032,["onClose","onClick"]))),128)),l(B,{class:"ml-1",size:"small",onClick:e[8]||(e[8]=n=>u())},{default:o(()=>e[19]||(e[19]=[I("添加")])),_:1})]),_:1})]),_:1}),l(f,{span:8},{default:o(()=>[l(r,{label:"网站开启访问(仅业务)",prop:"SYS_WEB_STATUS"},{default:o(()=>[l(z,{modelValue:a(t).SYS_WEB_STATUS,"onUpdate:modelValue":e[9]||(e[9]=n=>a(t).SYS_WEB_STATUS=n),options:a(O),button:""},null,8,["modelValue","options"])]),_:1})]),_:1}),l(f,{span:8},{default:o(()=>[l(r,{label:"网站关闭提示",prop:"SYS_WEB_CLOSE_PROMPT"},{default:o(()=>[l(v,{modelValue:a(t).SYS_WEB_CLOSE_PROMPT,"onUpdate:modelValue":e[10]||(e[10]=n=>a(t).SYS_WEB_CLOSE_PROMPT=n),rows:3,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(k,{gutter:16},{default:o(()=>[l(f,{span:24},{default:o(()=>[l(ae,null,{default:o(()=>[l(B,{type:"primary",loading:a(g),onClick:e[11]||(e[11]=n=>p())},{default:o(()=>e[20]||(e[20]=[I("保存")])),_:1},8,["loading"]),l(B,{style:{"margin-left":"10px"},onClick:F},{default:o(()=>e[21]||(e[21]=[I("重置")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"]),l(se,{modelValue:a(T),"onUpdate:modelValue":e[16]||(e[16]=n=>Be(T)?T.value=n:null),title:"超链接信息",width:"30%","show-close":"","destroy-on-close":""},{footer:o(()=>[E("span",je,[l(B,{onClick:e[15]||(e[15]=n=>T.value=!1)},{default:o(()=>e[22]||(e[22]=[I("取消")])),_:1}),l(B,{type:"primary",onClick:m},{default:o(()=>e[23]||(e[23]=[I("确定")])),_:1})])]),default:o(()=>[l(j,{ref_key:"linkFormRef",ref:b,model:a(d),rules:a($),"label-width":"auto","label-suffix":" :","label-position":"top"},{default:o(()=>[l(r,{label:"超链接名称",prop:"name"},{default:o(()=>[l(v,{modelValue:a(d).name,"onUpdate:modelValue":e[12]||(e[12]=n=>a(d).name=n)},null,8,["modelValue"])]),_:1}),l(r,{label:"超链接地址",prop:"url"},{default:o(()=>[l(v,{modelValue:a(d).url,"onUpdate:modelValue":e[13]||(e[13]=n=>a(d).url=n)},null,8,["modelValue"])]),_:1}),l(r,{label:"排序",prop:"sortCode"},{default:o(()=>[l(ne,{modelValue:a(d).sortCode,"onUpdate:modelValue":e[14]||(e[14]=n=>a(d).sortCode=n),"show-input":"",min:1},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});export{Ol as _};
