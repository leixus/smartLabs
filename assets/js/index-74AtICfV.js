/* empty css             *//* empty css                       *//* empty css                 *//* empty css                     *//* empty css                  *//* empty css                  *//* empty css                *//* empty css                    *//* empty css               *//* empty css                  */import{g as ke,a as we,b as De,c as $e,d as xe}from"./abnormalWarningResponse-BHw2UIYS.js";import{_ as k}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-BVglHUD0.js";import{_ as Ae}from"./DetailDialog.vue_vue_type_script_setup_true_lang-1FBAh4D8.js";import Ve from"./DelayHandleDialog-Mps7CXOI.js";import Te from"./GuideDialog-mgnEw_KD.js";import{d as Le,p as v,Y as Pe,q as W,aB as Re,X as P,c as f,o as y,a,b as o,z as Se,w as l,F as R,r as S,t as i,g as Ne,e as n,aF as G,s as ze,bI as Ee,i as N,Z as Me,D as qe,L as Be,M as Ue,an as Fe,ae as Ie,V as H}from"./index-ClSyKtod.js";import{b7 as Oe,i as We,er as Ge,eq as He,ep as Qe,et as Xe,eo as Ye,en as Ze,es as je,eu as Je}from"./install-CPD1cr-Y.js";import{_ as Ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./mock-Lm0ig56v.js";/* empty css                 *//* empty css                    *//* empty css                 *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                   *//* empty css                  */import"./sortable.esm-C83syoBY.js";/* empty css                  *//* empty css                         *//* empty css                             *//* empty css                *//* empty css                 *//* empty css                */const et={class:"monitoring-container"},tt={class:"section-container"},at={class:"grid grid-cols-1 gap-4 mb-4"},st={class:"card-header"},lt={class:"flex items-center"},ot={class:"gantt-container"},nt={class:"test-info"},it={class:"test-name"},rt={class:"test-dates"},dt={class:"progress-bar-container"},ut={class:"stages-container"},pt={class:"stage-name"},ct={class:"test-actions"},mt={class:"section-container"},vt={class:"grid grid-cols-1 lg:grid-cols-2 gap-[10px]"},yt={class:"card-header"},gt={class:"section-container"},ft={class:"grid grid-cols-1 gap-4 mb-4"},_t={class:"card-header"},bt={class:"flex items-center"},Ct={class:"chart-container"},ht={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4"},kt={class:"card-header"},wt={class:"card-header"},Dt={class:"condition-item"},$t={class:"condition-required"},xt={class:"condition-item"},At={class:"condition-required"},Vt={class:"condition-item"},Tt={class:"condition-required"},Lt={key:1},Pt={class:"grid grid-cols-1 gap-4"},Rt={class:"card-header"},St={class:"section-container"},Nt={class:"card-header"},zt=Le({__name:"index",setup(Et,{expose:Q}){const X=[{prop:"name",label:"设备名称"},{prop:"lastCheck",label:"上次检查时间"},{prop:"status",label:"当前状态"},{prop:"operation",label:"操作"}],z=v([]),x=()=>{z.value=ke()};x();const Y=()=>{x()},Z=[{prop:"id",label:"ID",width:80},{prop:"time",label:"时间"},{prop:"description",label:"描述",minWidth:200},{prop:"severity",label:"严重程度"},{prop:"action",label:"处理措施",minWidth:150},{prop:"operation",label:"操作"}],j=s=>{switch(s){case"严重":return"danger";case"中等":return"warning";case"轻微":return"info";default:return"info"}},E=s=>{var e;(e=C.value)==null||e.show(s,s.name?"设备详情":"异常详情")},M=v([{label:"温度",value:"temperature"},{label:"湿度",value:"humidity"},{label:"加载力",value:"force"},{label:"应变",value:"strain"}]),p=v("temperature"),q=v([]),J=[{prop:"time",label:"操作时间"},{prop:"operator",label:"操作人员"},{prop:"operation",label:"操作内容"},{prop:"isAbnormal",label:"是否异常"}],K=()=>we(),ee=()=>De(),te=s=>{switch(s){case"正常":return"success";case"警告":return"warning";case"故障":return"danger";default:return"info"}};Oe([Ge,He,Qe,Xe,Ye,Ze,je,Je]);const A=v(null);let c=null;const ae=()=>{A.value&&(c=We(A.value),V())},V=()=>{if(!c)return;const s=$e(p.value),e={title:{text:`${T(p.value)}趋势图`,left:"center"},tooltip:{trigger:"axis",formatter:function(r){const h=r[0];return`${h.name}<br/>${T(p.value)}: ${h.value}${_(p.value)}`}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:s.dates,boundaryGap:!1},yAxis:{type:"value",name:_(p.value),axisLabel:{formatter:`{value}${_(p.value)}`}},visualMap:{show:!1,pieces:[{gt:s.normalRange[1],lte:100,color:"#F56C6C"},{gt:s.normalRange[0],lte:s.normalRange[1],color:"#67C23A"},{gt:-100,lte:s.normalRange[0],color:"#E6A23C"}]},series:[{name:T(p.value),type:"line",data:s.data.map(r=>r[1]),markLine:{silent:!0,lineStyle:{color:"#67C23A"},data:[{yAxis:s.normalRange[0],label:{formatter:`下限: ${s.normalRange[0]}${_(p.value)}`}},{yAxis:s.normalRange[1],label:{formatter:`上限: ${s.normalRange[1]}${_(p.value)}`}}]},markPoint:{symbol:"pin",symbolSize:40,data:s.markPoints}}]};c.setOption(e)},T=s=>{const e=M.value.find(r=>r.value===s);return e?e.label:""},_=s=>{switch(s){case"temperature":return"°C";case"humidity":return"%";case"force":return"kN";case"strain":return"mm/mm";default:return""}};Pe(p,()=>{V()});const se=()=>{V()},B=()=>{c==null||c.resize()};W(()=>{ae(),window.addEventListener("resize",B),x()}),Re(()=>{c&&(c.dispose(),c=null),window.removeEventListener("resize",B)}),Q({resizeAllCharts:()=>{Ie(()=>{c==null||c.resize()})}});const w=v([]),D=v("all"),le=()=>xe(),b=()=>{w.value=le()},oe=P(()=>{const s={all:"",tensile:"拉伸",impact:"冲击",hightemp:"高温",lowtemp:"低温",composite:"复合材料"};return w.value.filter(e=>D.value==="all"?!0:e.testName.includes(s[D.value]))}),ne=s=>{switch(s){case"正常":return"success";case"延迟":return"danger";default:return"info"}},ie=s=>{var e;(e=C.value)==null||e.show(s,"试验详情")},re=P(()=>w.value.map(s=>({id:s.id,testName:s.testName,dataCompleteness:s.validationResults.dataCompleteness,dataConsistency:s.validationResults.dataConsistency,outlierCheck:s.validationResults.outlierCheck,standardCompliance:s.validationResults.standardCompliance}))),$=s=>{switch(s){case"通过":return"success";case"警告":return"warning";case"失败":return"danger";case"未开始":return"info";default:return"info"}},de=()=>{b()},ue=s=>{var e;(e=C.value)==null||e.show(s,"数据验证详情")},pe=P(()=>w.value.map(s=>({id:s.id,testName:s.testName,temperature:s.environmentalConditions.temperature,humidity:s.environmentalConditions.humidity,pressure:s.environmentalConditions.pressure}))),L=s=>{switch(s){case"正常":return"success";case"异常":return"danger";default:return"info"}},ce=s=>s.temperature.status==="异常"||s.humidity.status==="异常"||s.pressure.status==="异常",me=s=>{},ve=()=>{b()};W(()=>{b()});const ye=[{prop:"testName",label:"试验名称",minWidth:180},{prop:"dataCompleteness",label:"数据完整性",width:100},{prop:"dataConsistency",label:"数据一致性",width:100},{prop:"outlierCheck",label:"异常值检查",width:100},{prop:"standardCompliance",label:"标准符合性",width:100},{prop:"operation",label:"操作",width:120}],ge=[{prop:"testName",label:"试验名称",minWidth:180},{prop:"temperature",label:"温度",width:150},{prop:"humidity",label:"湿度",width:150},{prop:"pressure",label:"压力",width:150},{prop:"operation",label:"操作",width:120}],C=v(),U=v(),F=v(),fe=s=>{var e;(e=U.value)==null||e.show(s)},_e=async s=>{try{H.success("处理方案已提交"),b()}catch{H.error("提交失败，请重试")}},I=s=>{var r;const e={description:s.description,steps:[{title:"初步检查",description:"检查基本参数和环境条件"},{title:"详细分析",description:"分析异常原因和影响范围"},{title:"制定方案",description:"根据分析结果制定处理方案"},{title:"执行处理",description:"按照方案执行处理步骤"},{title:"效果验证",description:"验证处理结果是否符合预期"}],notes:["处理过程中请注意记录所有操作步骤","如遇特殊情况请及时联系技术支持","确保所有安全措施到位"],documents:[{type:"操作手册",name:"异常处理指南v1.2",url:"#"},{type:"技术文档",name:"设备维护手册",url:"#"}],support:{name:"张工",role:"技术主管",phone:"13800138000",email:"support@example.com"},canProcess:!0};(r=F.value)==null||r.show(e,"处理指南")},O=s=>{var e;(e=C.value)==null||e.show(s,"处理异常")};return(s,e)=>{const r=Ue,h=Be,d=qe,m=Ne,be=Ee,g=Se,Ce=Fe;return y(),f("div",et,[a("div",tt,[e[7]||(e[7]=a("h3",{class:"section-title"},"检试验进程异常监控",-1)),a("div",at,[o(g,{class:"progress-card"},{header:l(()=>[a("div",st,[e[4]||(e[4]=a("span",null,"试验进度追踪",-1)),a("div",lt,[o(h,{modelValue:D.value,"onUpdate:modelValue":e[0]||(e[0]=t=>D.value=t),placeholder:"试验类型",class:"mr-2 !w-40"},{default:l(()=>[o(r,{label:"全部",value:"all"}),o(r,{label:"拉伸试验",value:"tensile"}),o(r,{label:"冲击试验",value:"impact"}),o(r,{label:"高温试验",value:"hightemp"}),o(r,{label:"低温试验",value:"lowtemp"}),o(r,{label:"复合材料试验",value:"composite"})]),_:1},8,["modelValue"]),o(d,{type:"primary",onClick:b},{default:l(()=>e[3]||(e[3]=[n("刷新")])),_:1})])])]),default:l(()=>[a("div",ot,[(y(!0),f(R,null,S(oe.value,t=>(y(),f("div",{key:t.id,class:"test-progress-item"},[a("div",nt,[a("div",it,i(t.testName),1),a("div",rt,i(t.startDate)+" 至 "+i(t.endDate),1),o(m,{type:ne(t.delayStatus),size:"small"},{default:l(()=>[n(i(t.delayStatus),1)]),_:2},1032,["type"])]),a("div",dt,[a("div",ut,[(y(!0),f(R,null,S(t.stages,(u,he)=>(y(),f("div",{key:he,class:ze(["stage-item",{completed:u.status==="已完成","in-progress":u.status==="进行中","not-started":u.status==="未开始"}]),style:G({width:`${100/t.stages.length}%`})},[a("div",{class:"stage-progress",style:G({width:`${u.progress}%`})},null,4),a("div",pt,i(u.name),1)],6))),128))]),o(be,{percentage:t.progress,status:t.delayStatus==="延迟"?"exception":"","stroke-width":15},null,8,["percentage","status"])]),a("div",ct,[o(d,{type:"primary",link:"",onClick:u=>ie(t)},{default:l(()=>e[5]||(e[5]=[n("查看详情")])),_:2},1032,["onClick"]),t.delayStatus==="延迟"?(y(),N(d,{key:0,type:"warning",link:"",onClick:u=>fe(t)},{default:l(()=>e[6]||(e[6]=[n("处理延迟")])),_:2},1032,["onClick"])):Me("",!0)])]))),128))])]),_:1})])]),a("div",mt,[e[13]||(e[13]=a("h3",{class:"section-title"},"设备状态概览",-1)),a("div",vt,[o(g,{class:"dashboard-card"},{header:l(()=>[a("div",yt,[e[9]||(e[9]=a("span",null,"设备状态仪表盘",-1)),o(d,{type:"primary"},{default:l(()=>e[8]||(e[8]=[n("刷新")])),_:1})])]),default:l(()=>[e[10]||(e[10]=a("div",{class:"dashboard-content"},[a("div",{class:"status-summary"},[a("div",{class:"status-item normal"},[a("div",{class:"status-count"},"12"),a("div",{class:"status-label"},"正常")]),a("div",{class:"status-item warning"},[a("div",{class:"status-count"},"3"),a("div",{class:"status-label"},"警告")]),a("div",{class:"status-item error"},[a("div",{class:"status-count"},"1"),a("div",{class:"status-label"},"故障")])]),a("div",{class:"device-list"},[a("p",{class:"text-center text-gray-500"},"点击设备查看详情")])],-1))]),_:1}),o(g,{class:"list-card aw-card"},{header:l(()=>e[11]||(e[11]=[a("div",{class:"card-header"},[a("span",null,"设备状态列表")],-1)])),default:l(()=>[o(k,{"row-key":"id",columns:X,"tool-button":!1,pagination:!1,data:K()},{status:l(t=>[o(m,{type:te(t.row.status)},{default:l(()=>[n(i(t.row.status),1)]),_:2},1032,["type"])]),operation:l(t=>[o(d,{type:"primary",link:"",onClick:u=>E(t.row)},{default:l(()=>e[12]||(e[12]=[n("查看详情")])),_:2},1032,["onClick"])]),_:1},8,["data"])]),_:1})])]),a("div",gt,[e[27]||(e[27]=a("h3",{class:"section-title"},"数据异常监控",-1)),a("div",ft,[o(g,{class:"chart-card"},{header:l(()=>[a("div",_t,[e[15]||(e[15]=a("span",null,"关键参数趋势",-1)),a("div",bt,[o(h,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=t=>p.value=t),placeholder:"选择参数",class:"mr-2 !w-40"},{default:l(()=>[(y(!0),f(R,null,S(M.value,t=>(y(),N(r,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(d,{type:"primary",onClick:se},{default:l(()=>e[14]||(e[14]=[n("查询")])),_:1})])])]),default:l(()=>[a("div",Ct,[a("div",{ref_key:"trendChartRef",ref:A,class:"h-64 w-full"},null,512)])]),_:1})]),a("div",ht,[o(g,{class:"validation-card aw-card"},{header:l(()=>[a("div",kt,[e[17]||(e[17]=a("span",null,"数据有效性验证",-1)),o(d,{type:"primary",onClick:de},{default:l(()=>e[16]||(e[16]=[n("刷新")])),_:1})])]),default:l(()=>[o(k,{columns:ye,data:re.value,"tool-button":!1,pagination:!1},{dataCompleteness:l(({row:t})=>[o(m,{type:$(t.dataCompleteness)},{default:l(()=>[n(i(t.dataCompleteness),1)]),_:2},1032,["type"])]),dataConsistency:l(({row:t})=>[o(m,{type:$(t.dataConsistency)},{default:l(()=>[n(i(t.dataConsistency),1)]),_:2},1032,["type"])]),outlierCheck:l(({row:t})=>[o(m,{type:$(t.outlierCheck)},{default:l(()=>[n(i(t.outlierCheck),1)]),_:2},1032,["type"])]),standardCompliance:l(({row:t})=>[o(m,{type:$(t.standardCompliance)},{default:l(()=>[n(i(t.standardCompliance),1)]),_:2},1032,["type"])]),operation:l(({row:t})=>[o(d,{type:"primary",link:"",onClick:u=>ue(t)},{default:l(()=>e[18]||(e[18]=[n("查看详情")])),_:2},1032,["onClick"])]),_:1},8,["data"])]),_:1}),o(g,{class:"conditions-card aw-card"},{header:l(()=>[a("div",wt,[e[20]||(e[20]=a("span",null,"环境条件符合性",-1)),o(d,{type:"primary",onClick:ve},{default:l(()=>e[19]||(e[19]=[n("刷新")])),_:1})])]),default:l(()=>[o(k,{columns:ge,data:pe.value,"tool-button":!1,pagination:!1},{temperature:l(({row:t})=>[a("div",Dt,[o(m,{type:L(t.temperature.status)},{default:l(()=>[n(i(t.temperature.value),1)]),_:2},1032,["type"]),a("div",$t,"要求: "+i(t.temperature.required),1)])]),humidity:l(({row:t})=>[a("div",xt,[o(m,{type:L(t.humidity.status)},{default:l(()=>[n(i(t.humidity.value),1)]),_:2},1032,["type"]),a("div",At,"要求: "+i(t.humidity.required),1)])]),pressure:l(({row:t})=>[a("div",Vt,[o(m,{type:L(t.pressure.status)},{default:l(()=>[n(i(t.pressure.value),1)]),_:2},1032,["type"]),a("div",Tt,"要求: "+i(t.pressure.required),1)])]),operation:l(({row:t})=>[ce(t)?(y(),N(d,{key:0,type:"warning",link:"",onClick:u=>me(t)},{default:l(()=>e[21]||(e[21]=[n(" 处理异常 ")])),_:2},1032,["onClick"])):(y(),f("span",Lt,"-"))]),_:1},8,["data"])]),_:1})]),a("div",Pt,[o(g,{class:"anomaly-card aw-card"},{header:l(()=>[a("div",Rt,[e[23]||(e[23]=a("span",null,"异常记录",-1)),o(d,{type:"primary",onClick:Y},{default:l(()=>e[22]||(e[22]=[n("刷新")])),_:1})])]),default:l(()=>[o(k,{columns:Z,data:z.value,"tool-button":!1,pagination:!1},{severity:l(({row:t})=>[o(m,{type:j(t.severity)},{default:l(()=>[n(i(t.severity),1)]),_:2},1032,["type"])]),operation:l(({row:t})=>[o(d,{type:"primary",link:"",onClick:u=>E(t)},{default:l(()=>e[24]||(e[24]=[n("查看")])),_:2},1032,["onClick"]),o(d,{type:"warning",link:"",onClick:u=>O(t)},{default:l(()=>e[25]||(e[25]=[n("处理")])),_:2},1032,["onClick"]),o(d,{type:"info",link:"",onClick:u=>I(t)},{default:l(()=>e[26]||(e[26]=[n("指南")])),_:2},1032,["onClick"])]),_:1},8,["data"])]),_:1})])]),a("div",St,[e[31]||(e[31]=a("h3",{class:"section-title"},"人员操作异常",-1)),o(g,{class:"operation-card aw-card"},{header:l(()=>[a("div",Nt,[e[29]||(e[29]=a("span",null,"操作日志",-1)),a("div",null,[o(Ce,{modelValue:q.value,"onUpdate:modelValue":e[2]||(e[2]=t=>q.value=t),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",class:"mr-2"},null,8,["modelValue"]),o(d,{type:"primary"},{default:l(()=>e[28]||(e[28]=[n("查询")])),_:1})])])]),default:l(()=>[o(k,{"row-key":"id",columns:J,"tool-button":!1,pagination:!1,data:ee()},{isAbnormal:l(t=>[o(m,{type:t.row.isAbnormal?"danger":"success"},{default:l(()=>[n(i(t.row.isAbnormal?"异常":"正常"),1)]),_:2},1032,["type"])]),operation:l(t=>[o(d,{type:"primary",link:"",disabled:!t.row.isAbnormal,onClick:u=>I(t.row)},{default:l(()=>e[30]||(e[30]=[n(" 查看指南 ")])),_:2},1032,["disabled","onClick"])]),_:1},8,["data"])]),_:1})]),o(Ae,{ref_key:"detailDialog",ref:C},null,512),o(Ve,{ref_key:"delayHandleDialog",ref:U,onSubmit:_e},null,512),o(Te,{ref_key:"guideDialog",ref:F,onProcess:O},null,512)])}}}),Ca=Ke(zt,[["__scopeId","data-v-88627266"]]);export{Ca as default};
