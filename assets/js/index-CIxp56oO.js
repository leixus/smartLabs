import{_ as N}from"./index-BhKoq_Rb.js";/* empty css             *//* empty css               */import{_ as F}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-dQS8jH7J.js";/* empty css                  *//* empty css                     */import{T as O}from"./index-DDYGGslX.js";import{d as j,p as _,j as H,i as L,o as z,w as l,a as M,b as a,I as U,y as W,bq as G,u as f,D as J,a7 as K,e as p,O as Q,ad as X,B as Y,V as w}from"./index-yDSqlga2.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"-mt-15px min-h-350px"},te=j({__name:"index",props:{orgTreeApi:{},roleSelectorApi:{},permission:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},maxCount:{}},emits:{successful:null},setup(h,{expose:$,emit:B}){const R=B,d=_(!1),b=h,g=H({}),C=_(),i=_(),x=[{type:"selection",fixed:"left",width:50},{prop:"operation",label:"操作",width:80,fixed:"left"},{prop:"name",label:"角色名",search:{el:"input",span:2}}];function S(t=[]){d.value=!0,s.value=t,n.value=t}function V(){d.value=!1,s.value=[],n.value=[]}function q(){d.value=!1,R("successful",n.value)}function D(t){C.value.pageable.pageNum=1,t!=""?g.orgId=t:g.orgId=null}const n=_([]),s=_([]);function k(t){var e;if(b.multiple){if(t=t.filter(r=>!n.value.find(c=>c.id==r.id)),b.maxCount&&b.maxCount<t.length+n.value.length){w.warning("最多选择"+b.maxCount+"条");return}n.value=n.value.concat(t),s.value=n.value}else{if(n.value.length>0||t.length>1){w.warning("只可选择一条");return}n.value=t,s.value=n.value}(e=i.value)==null||e.refresh()}function y(t){var e;n.value=n.value.filter(r=>!t.includes(r)),s.value=n.value,(e=i.value)==null||e.refresh()}function E(){var t,e,r;(e=(t=i.value)==null?void 0:t.searchParam)!=null&&e.name&&(s.value=s.value.filter(c=>{var m;return c.name.includes((m=i.value)==null?void 0:m.searchParam.name)}),(r=i.value)==null||r.refresh())}function P(){var t;s.value=n.value,(t=i.value)==null||t.refresh()}return $({showSelector:S}),(t,e)=>{const r=O,c=G,m=W,u=J,T=F,A=U,I=N;return z(),L(I,X({modelValue:f(d),"onUpdate:modelValue":e[2]||(e[2]=o=>Y(d)?d.value=o:null),title:"角色选择","form-size":"90%"},t.$attrs),{footer:l(()=>[a(u,{onClick:V},{default:l(()=>e[9]||(e[9]=[p(" 取消 ")])),_:1}),a(u,{type:"primary",onClick:q},{default:l(()=>e[10]||(e[10]=[p(" 确定 ")])),_:1})]),default:l(()=>[M("div",ee,[a(A,{gutter:12,justify:"space-between"},{default:l(()=>[a(m,{span:4},{default:l(()=>[a(c,{"max-height":"650px"},{default:l(()=>[a(r,{label:"name",class:"filterWidth",title:"组织列表","top-name":"全局","default-expand-all":!1,"request-api":t.orgTreeApi,onChange:D},null,8,["request-api"])]),_:1})]),_:1}),a(m,{span:10},{default:l(()=>[a(T,{ref_key:"userTable",ref:C,columns:x,"tool-button":!1,"init-param":f(g),"request-api":t.roleSelectorApi},{tableHeader:l(o=>[a(u,{type:"primary",onClick:e[0]||(e[0]=v=>k(f(C).tableData))},{default:l(()=>e[3]||(e[3]=[p("添加当前")])),_:1}),a(u,{type:"primary",plain:"",disabled:!o.isSelected,onClick:v=>k(o.selectedList)},{default:l(()=>e[4]||(e[4]=[p("添加选中")])),_:2},1032,["disabled","onClick"])]),operation:l(o=>[a(u,{type:"primary",link:"",icon:f(K),plain:"",onClick:v=>k([o.row])},{default:l(()=>e[5]||(e[5]=[p("添加")])),_:2},1032,["icon","onClick"])]),_:1},8,["init-param","request-api"])]),_:1}),a(m,{span:10},{default:l(()=>[a(T,{ref_key:"chooseTable",ref:i,columns:x,"tool-button":!0,data:f(s),onSearch:E,onReset:P},{tableHeader:l(o=>[a(u,{type:"danger",onClick:e[1]||(e[1]=v=>y(f(i).tableData))},{default:l(()=>e[6]||(e[6]=[p("删除当前")])),_:1}),a(u,{type:"danger",plain:"",disabled:!o.isSelected,onClick:v=>y(o.selectedList)},{default:l(()=>e[7]||(e[7]=[p("删除选中")])),_:2},1032,["disabled","onClick"])]),operation:l(o=>[a(u,{type:"danger",link:"",icon:f(Q),plain:"",onClick:v=>y([o.row])},{default:l(()=>e[8]||(e[8]=[p("删除")])),_:2},1032,["icon","onClick"])]),_:1},8,["data"])]),_:1})]),_:1})])]),_:1},16,["modelValue"])}}}),fe=Z(te,[["__scopeId","data-v-e16cbed9"]]);export{fe as _};
