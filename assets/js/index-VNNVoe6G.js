/* empty css             *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                         *//* empty css                *//* empty css                  *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                 */import{d as A,p as v,j as D,X,i as c,o as a,ab as Z,u as s,B as $,w as o,a as t,c as k,Z as h,t as r,b as n,e as b,_ as K,$ as O,K as G,ah as H,ai as J,aj as M,x as P,bX as Q,bU as W,bZ as Y,b_ as ee,bN as te,F as se,r as oe,bO as ne,D as le}from"./index-ClSyKtod.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ie={class:"approval-container"},ce={class:"device-info"},re={class:"info-content"},me={class:"info-item"},pe={class:"value"},de={class:"info-item"},ue={class:"value"},_e={class:"info-item"},fe={class:"value"},ve={class:"info-item"},be={class:"value"},ge={class:"scrap-reason"},ye={class:"approval-steps"},ke={key:0,class:"approval-history"},he={key:0,class:"timeline-comment"},we={class:"dialog-footer"},Ee=A({__name:"index",props:{device:{}},emits:["close","success"],setup(x,{emit:C}){const z=x,w=C,p=v(!0),g=v(),i=v(0),d=D({reason:""}),B=D({reason:[{required:!0,message:"请输入报废原因",trigger:"blur"},{min:5,message:"报废原因不能少于5个字符",trigger:"blur"}]}),u=X(()=>z.device||{}),m=v([]),I=async()=>{g.value&&await g.value.validate((V,e)=>{V&&(i.value=1,m.value.push({content:"设备管理员提交报废申请",timestamp:new Date().toLocaleString(),type:"primary",comment:`报废原因：${d.reason}`}),setTimeout(()=>{i.value=2,m.value.push({content:"部门主管审批通过",timestamp:new Date().toLocaleString(),type:"success",comment:"同意报废处理"}),setTimeout(()=>{i.value=3,m.value.push({content:"资产管理部审批通过",timestamp:new Date().toLocaleString(),type:"success",comment:"已确认资产处置方案，同意报废"}),setTimeout(()=>{i.value=4,m.value.push({content:"报废流程完成",timestamp:new Date().toLocaleString(),type:"success",comment:"设备已从资产账目中移除"}),w("success")},1e3)},1500)},2e3))})},E=()=>{p.value=!1,w("close")};return(V,e)=>{const N=G,T=O,L=K,y=M,_=P,f=J,F=H,R=ne,U=te,S=le,j=Z;return a(),c(j,{modelValue:s(p),"onUpdate:modelValue":e[1]||(e[1]=l=>$(p)?p.value=l:null),title:"设备报废审批流程",width:"70%","before-close":E,"destroy-on-close":""},{footer:o(()=>[t("span",we,[n(S,{onClick:E},{default:o(()=>e[10]||(e[10]=[b("关闭")])),_:1}),s(i)===0?(a(),c(S,{key:0,type:"primary",onClick:I},{default:o(()=>e[11]||(e[11]=[b(" 提交申请 ")])),_:1})):h("",!0)])]),default:o(()=>[t("div",ie,[t("div",ce,[e[6]||(e[6]=t("div",{class:"info-title"},"设备信息",-1)),t("div",re,[t("div",me,[e[2]||(e[2]=t("span",{class:"label"},"设备编号：",-1)),t("span",pe,r(s(u).deviceCode),1)]),t("div",de,[e[3]||(e[3]=t("span",{class:"label"},"设备名称：",-1)),t("span",ue,r(s(u).deviceName),1)]),t("div",_e,[e[4]||(e[4]=t("span",{class:"label"},"规格型号：",-1)),t("span",fe,r(s(u).specification),1)]),t("div",ve,[e[5]||(e[5]=t("span",{class:"label"},"使用部门：",-1)),t("span",be,r(s(u).department),1)])])]),t("div",ge,[e[7]||(e[7]=t("div",{class:"reason-title"},[b("报废原因"),t("span",{class:"required"},"*")],-1)),n(L,{ref_key:"formRef",ref:g,model:s(d),rules:s(B)},{default:o(()=>[n(T,{prop:"reason"},{default:o(()=>[n(N,{modelValue:s(d).reason,"onUpdate:modelValue":e[0]||(e[0]=l=>s(d).reason=l),type:"textarea",rows:3,placeholder:"请输入设备报废原因",disabled:s(i)>0},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["model","rules"])]),t("div",ye,[e[8]||(e[8]=t("div",{class:"steps-title"},"审批流程",-1)),n(F,{active:s(i),"finish-status":"success","align-center":""},{default:o(()=>[n(f,{title:"提交申请",description:"设备管理员提交"},{icon:o(()=>[s(i)>0?(a(),c(y,{key:0,size:24,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"})):(a(),c(_,{key:1},{default:o(()=>[n(s(Q))]),_:1}))]),_:1}),n(f,{title:"部门审批",description:"部门主管审批"},{icon:o(()=>[s(i)>1?(a(),c(y,{key:0,size:24,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"})):(a(),c(_,{key:1},{default:o(()=>[n(s(W))]),_:1}))]),_:1}),n(f,{title:"资产管理部审批",description:"资产管理部审批"},{icon:o(()=>[s(i)>2?(a(),c(y,{key:0,size:24,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"})):(a(),c(_,{key:1},{default:o(()=>[n(s(Y))]),_:1}))]),_:1}),n(f,{title:"完成",description:"审批完成"},{icon:o(()=>[n(_,null,{default:o(()=>[n(s(ee))]),_:1})]),_:1})]),_:1},8,["active"])]),s(i)>0?(a(),k("div",ke,[e[9]||(e[9]=t("div",{class:"history-title"},"审批记录",-1)),n(U,null,{default:o(()=>[(a(!0),k(se,null,oe(s(m),(l,q)=>(a(),c(R,{key:q,timestamp:l.timestamp,type:l.type,color:l.color,hollow:l.hollow,size:l.size},{default:o(()=>[b(r(l.content)+" ",1),l.comment?(a(),k("div",he,r(l.comment),1)):h("",!0)]),_:2},1032,["timestamp","type","color","hollow","size"]))),128))]),_:1})])):h("",!0)])]),_:1},8,["modelValue"])}}}),Re=ae(Ee,[["__scopeId","data-v-785c9e42"]]);export{Re as default};
