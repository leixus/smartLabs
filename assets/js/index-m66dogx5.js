/* empty css             *//* empty css                  *//* empty css                   *//* empty css               */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                  *//* empty css                   */import{u as K,P as lt,c as rt,d as s,b as dt,_ as ct}from"./style-DPyH3vHA.js";import{d as J,X as ot,b4 as R,c as $,o as l,aa as v,a,i as y,Z as P,u as n,aF as st,b6 as at,w as c,F as ut,b as d,v as N,p as q,m as r,b$ as k,ag as V,c0 as M,c1 as U,q as mt,Y as et,B as pt,x as ft,aW as ht,c2 as vt,t as L,s as _t,g as yt,e as gt,bW as wt,aK as bt,D as $t,c3 as kt,c4 as Pt,ac as Ct,a8 as At,ae as j}from"./index-Djyl84eR.js";import{_ as zt}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-D0lzutwe.js";import{_ as It}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                 *//* empty css                    *//* empty css                 *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                 *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                  */import"./sortable.esm-C83syoBY.js";var C=(t=>(t.Lines="lines",t.Dots="dots",t))(C||{});const it=function({dimensions:t,size:u,color:h}){return at("path",{stroke:h,"stroke-width":u,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})},nt=function({radius:t,color:u}){return at("circle",{cx:t,cy:t,r:t,fill:u})};C.Lines+"",C.Dots+"";const Lt={[C.Dots]:"#81818a",[C.Lines]:"#eee"},Vt=["id","x","y","width","height","patternTransform"],Nt={key:2,height:"100",width:"100"},Et=["fill"],St=["x","y","fill"],xt={name:"Background",compatConfig:{MODE:3}},Bt=J({...xt,props:{id:{},variant:{default:()=>C.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(t){const{id:u,viewport:h}=K(),p=ot(()=>{const o=h.value.zoom,[A,S]=Array.isArray(t.gap)?t.gap:[t.gap,t.gap],g=[A*o||1,S*o||1],z=t.size*o,[x,I]=Array.isArray(t.offset)?t.offset:[t.offset,t.offset],B=[x*o||1+g[0]/2,I*o||1+g[1]/2];return{scaledGap:g,offset:B,size:z}}),f=R(()=>`pattern-${u}${t.id?`-${t.id}`:""}`),b=R(()=>t.color||t.patternColor||Lt[t.variant||C.Dots]);return(o,A)=>(l(),$("svg",{class:"vue-flow__background vue-flow__container",style:st({height:`${o.height>100?100:o.height}%`,width:`${o.width>100?100:o.width}%`})},[v(o.$slots,"pattern-container",{id:f.value},()=>[a("pattern",{id:f.value,x:n(h).x%p.value.scaledGap[0],y:n(h).y%p.value.scaledGap[1],width:p.value.scaledGap[0],height:p.value.scaledGap[1],patternTransform:`translate(-${p.value.offset[0]},-${p.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[v(o.$slots,"pattern",{},()=>[o.variant===n(C).Lines?(l(),y(n(it),{key:0,size:o.lineWidth,color:b.value,dimensions:p.value.scaledGap},null,8,["size","color","dimensions"])):o.variant===n(C).Dots?(l(),y(n(nt),{key:1,color:b.value,radius:p.value.size/2},null,8,["color","radius"])):P("",!0),o.bgColor?(l(),$("svg",Nt,[a("rect",{width:"100%",height:"100%",fill:o.bgColor},null,8,Et)])):P("",!0)])],8,Vt)]),a("rect",{x:o.x,y:o.y,width:"100%",height:"100%",fill:`url(#${f.value})`},null,8,St),v(o.$slots,"default",{id:f.value})],4))}}),Rt={name:"ControlButton",compatConfig:{MODE:3}},Dt=(t,u)=>{const h=t.__vccOpts||t;for(const[p,f]of u)h[p]=f;return h},Ht={class:"vue-flow__controls-button"};function Ot(t,u,h,p,f,b){return l(),$("button",Ht,[v(t.$slots,"default")])}const E=Dt(Rt,[["render",Ot]]),Tt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Gt=a("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),Mt=[Gt];function Zt(t,u){return l(),$("svg",Tt,Mt)}const Ft={render:Zt},Xt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Yt=a("path",{d:"M0 0h32v4.2H0z"},null,-1),Wt=[Yt];function Ut(t,u){return l(),$("svg",Xt,Wt)}const jt={render:Ut},qt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Kt=a("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),Jt=[Kt];function Qt(t,u){return l(),$("svg",qt,Jt)}const te={render:Qt},ee={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},oe=a("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),se=[oe];function ae(t,u){return l(),$("svg",ee,se)}const ie={render:ae},ne={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},le=a("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),re=[le];function de(t,u){return l(),$("svg",ne,re)}const ce={render:de},ue={name:"Controls",compatConfig:{MODE:3}},me=J({...ue,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>lt.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(t,{emit:u}){const{nodesDraggable:h,nodesConnectable:p,elementsSelectable:f,setInteractive:b,zoomIn:o,zoomOut:A,fitView:S,viewport:g,minZoom:z,maxZoom:x}=K(),I=R(()=>h.value||p.value||f.value),B=R(()=>g.value.zoom<=z.value),D=R(()=>g.value.zoom>=x.value);function Z(){o(),u("zoomIn")}function F(){A(),u("zoomOut")}function H(){S(t.fitViewParams),u("fitView")}function X(){b(!I.value),u("interactionChange",!I.value)}return(e,i)=>(l(),y(n(rt),{class:"vue-flow__controls",position:e.position},{default:c(()=>[v(e.$slots,"top"),e.showZoom?(l(),$(ut,{key:0},[v(e.$slots,"control-zoom-in",{},()=>[d(E,{class:"vue-flow__controls-zoomin",disabled:D.value,onClick:Z},{default:c(()=>[v(e.$slots,"icon-zoom-in",{},()=>[(l(),y(N(n(Ft))))])]),_:3},8,["disabled"])]),v(e.$slots,"control-zoom-out",{},()=>[d(E,{class:"vue-flow__controls-zoomout",disabled:B.value,onClick:F},{default:c(()=>[v(e.$slots,"icon-zoom-out",{},()=>[(l(),y(N(n(jt))))])]),_:3},8,["disabled"])])],64)):P("",!0),e.showFitView?v(e.$slots,"control-fit-view",{key:1},()=>[d(E,{class:"vue-flow__controls-fitview",onClick:H},{default:c(()=>[v(e.$slots,"icon-fit-view",{},()=>[(l(),y(N(n(te))))])]),_:3})]):P("",!0),e.showInteractive?v(e.$slots,"control-interactive",{key:2},()=>[e.showInteractive?(l(),y(E,{key:0,class:"vue-flow__controls-interactive",onClick:X},{default:c(()=>[I.value?v(e.$slots,"icon-unlock",{key:0},()=>[(l(),y(N(n(ce))))]):P("",!0),I.value?P("",!0):v(e.$slots,"icon-lock",{key:1},()=>[(l(),y(N(n(ie))))])]),_:3})):P("",!0)]):P("",!0),v(e.$slots,"default")]),_:3},8,["position"]))}}),pe=()=>{const t=q([]);return{elements:t,initializeElements:p=>{t.value=p},updateNodePosition:(p,f)=>{const b=t.value.find(o=>o.id===p);b&&(b.position=f)}}},fe=[{id:"e1-2",source:"material",target:"commission",animated:!0,type:"smoothstep"},{id:"e2-3",source:"commission",target:"sample",animated:!0,type:"smoothstep"},{id:"e3-4",source:"sample",target:"project",animated:!0,type:"smoothstep"},{id:"e4-5",source:"project",target:"standard",animated:!0,type:"smoothstep"},{id:"e-task-1",source:"taskDistribution",target:"task1",animated:!0,type:"smoothstep"},{id:"e-task-2",source:"taskDistribution",target:"task2",animated:!0,type:"smoothstep"},{id:"e-task-3",source:"taskDistribution",target:"task3",animated:!0,type:"smoothstep"},{id:"e-task-4",source:"taskDistribution",target:"task4",animated:!0,type:"smoothstep"},{id:"e-test-1",source:"test1",target:"test2",animated:!0,type:"smoothstep"},{id:"e-test-2",source:"test2",target:"test3",animated:!0,type:"smoothstep"},{id:"e-test-3",source:"test3",target:"test4",animated:!0,type:"smoothstep"},{id:"e-result-1",source:"dataUpload",target:"verify1",animated:!0,type:"smoothstep"},{id:"e-result-2",source:"verify1",target:"verify2",animated:!0,type:"smoothstep"},{id:"e-result-3",source:"verify2",target:"warehouse",animated:!0,type:"smoothstep"},{id:"e-report-1",source:"verify1",target:"report1",animated:!0,type:"smoothstep"},{id:"e-report-2",source:"verify2",target:"report2",animated:!0,type:"smoothstep"},{id:"e-warehouse-1",source:"report1",target:"finalWarehouse1",animated:!0,type:"smoothstep"},{id:"e-warehouse-2",source:"report2",target:"finalWarehouse2",animated:!0,type:"smoothstep"}],he=()=>[{id:"material",type:"custom",position:{x:200,y:100},sourcePosition:s.Right,data:{label:"物料编号",status:"completed",time:"2024-01-01 09:00:00",handler:"系统",icon:r(k)}},{id:"commission",type:"custom",position:{x:800,y:100},sourcePosition:s.Right,targetPosition:s.Left,data:{label:"委托单号",status:"completed",time:"2024-01-01 09:30:00",handler:"系统",icon:r(k)}},{id:"sample",type:"custom",position:{x:1400,y:100},sourcePosition:s.Right,targetPosition:s.Left,data:{label:"样品编号",status:"completed",time:"2024-01-01 10:00:00",handler:"系统",icon:r(k)}},{id:"project",type:"custom",position:{x:2e3,y:100},sourcePosition:s.Right,targetPosition:s.Left,data:{label:"项目编号",status:"completed",time:"2024-01-01 10:30:00",handler:"系统",icon:r(k)}},{id:"standard",type:"custom",position:{x:2600,y:100},targetPosition:s.Left,data:{label:"检测标准",status:"completed",time:"2024-01-01 11:00:00",handler:"系统",icon:r(k)}},{id:"taskDistribution",type:"custom",position:{x:1400,y:400},sourcePosition:s.Right,data:{label:"任务编号",status:"completed",time:"2024-01-02 09:00:00",handler:"系统",icon:r(k)}},{id:"task1",type:"custom",position:{x:2600,y:300},targetPosition:s.Left,data:{label:"任务1",status:"completed",time:"2024-01-02 10:00:00",handler:"张工",icon:r(V)}},{id:"task2",type:"custom",position:{x:2600,y:400},targetPosition:s.Left,data:{label:"任务2",status:"completed",time:"2024-01-02 11:00:00",handler:"李工",icon:r(V)}},{id:"task3",type:"custom",position:{x:2600,y:500},targetPosition:s.Left,data:{label:"任务3",status:"processing",time:"2024-01-02 12:00:00",handler:"王工",icon:r(V)}},{id:"task4",type:"custom",position:{x:2600,y:600},targetPosition:s.Left,data:{label:"任务4",status:"pending",time:"",handler:"赵工",icon:r(V)}},{id:"test1",type:"custom",position:{x:800,y:800},sourcePosition:s.Right,targetPosition:s.Left,data:{label:"试验1",status:"completed",time:"2024-01-03 09:00:00",handler:"测试部",icon:r(M)}},{id:"test2",type:"custom",position:{x:1400,y:800},sourcePosition:s.Right,targetPosition:s.Left,data:{label:"试验2",status:"completed",time:"2024-01-03 10:00:00",handler:"测试部",icon:r(M)}},{id:"test3",type:"custom",position:{x:2e3,y:800},sourcePosition:s.Right,targetPosition:s.Left,data:{label:"试验3",status:"completed",time:"2024-01-03 11:00:00",handler:"测试部",icon:r(M)}},{id:"test4",type:"custom",position:{x:2600,y:800},targetPosition:s.Left,data:{label:"试验4",status:"pending",time:"",handler:"测试部",icon:r(M)}},{id:"dataUpload",type:"custom",position:{x:200,y:1200},sourcePosition:s.Right,data:{label:"数据上传",status:"completed",time:"2024-01-04 09:00:00",handler:"系统",icon:r(k)}},{id:"verify1",type:"custom",position:{x:800,y:1200},sourcePosition:s.Right,targetPosition:s.Left,data:{label:"冲突试验",status:"completed",time:"2024-01-04 10:00:00",handler:"质检部",icon:r(V)}},{id:"verify2",type:"custom",position:{x:1400,y:1200},sourcePosition:s.Right,targetPosition:s.Left,data:{label:"控制试验",status:"processing",time:"2024-01-04 11:00:00",handler:"质检部",icon:r(V)}},{id:"warehouse",type:"custom",position:{x:2e3,y:1200},targetPosition:s.Left,data:{label:"仓库",status:"pending",time:"",handler:"仓库部",icon:r(U)}},{id:"report1",type:"custom",position:{x:800,y:1500},sourcePosition:s.Right,targetPosition:s.Left,data:{label:"报告",status:"completed",time:"2024-01-05 09:00:00",handler:"报告部",icon:r(k)}},{id:"report2",type:"custom",position:{x:1400,y:1500},sourcePosition:s.Right,targetPosition:s.Left,data:{label:"报告",status:"pending",time:"",handler:"报告部",icon:r(k)}},{id:"finalWarehouse1",type:"custom",position:{x:800,y:1800},targetPosition:s.Left,data:{label:"仓库",status:"completed",time:"2024-01-06 09:00:00",handler:"仓库部",icon:r(U)}},{id:"finalWarehouse2",type:"custom",position:{x:1400,y:1800},targetPosition:s.Left,data:{label:"仓库",status:"pending",time:"",handler:"仓库部",icon:r(U)}},...fe],ve={class:"drawer-header"},_e={class:"title"},ye={class:"info"},ge={class:"value"},we={class:"value"},be={class:"actions"},$e={class:"view-switch"},ke={class:"flow-container"},Pe={class:"node-content"},Ce={class:"node-title"},Ae={class:"node-info"},ze={key:0},Ie={class:"group-title"},Le={name:"FlowTrackingDrawer"},Ve=J({...Le,props:{visible:{type:Boolean},materialData:{}},emits:["update:visible","closed"],setup(t,{emit:u}){const h=t,p=u,{elements:f,initializeElements:b,updateNodePosition:o}=pe(),{fitView:A,setViewport:S}=K(),g=q(h.visible),z=q("flow"),x=[{type:"index",label:"序号",width:80},{prop:"time",label:"时间"},{prop:"label",label:"节点"},{prop:"handler",label:"处理人"},{prop:"status",label:"状态",width:100}],I=ot(()=>f.value.filter(e=>e.type==="custom").map(e=>({id:e.id,time:e.data.time||"-",label:e.data.label,handler:e.data.handler||"-",status:e.data.status})).sort((e,i)=>!e.time||e.time==="-"?1:!i.time||i.time==="-"?-1:new Date(e.time).getTime()-new Date(i.time).getTime())),B=e=>({completed:"success",processing:"primary",pending:"info"})[e]||"info",D=e=>{z.value=e,e==="flow"&&j(()=>{H(),A({padding:.2})})},Z=()=>{S({x:0,y:0,zoom:1}),j(()=>{A({padding:.2})})},F=()=>{H(),j(()=>{A({padding:.2})})},H=()=>{["material","commission","sample","project","standard"].forEach((_,w)=>{o(_,{x:200+w*300,y:100})}),o("taskDistribution",{x:200+2*300,y:300}),["task1","task2","task3","task4"].forEach((_,w)=>{o(_,{x:200+4*300,y:100+w*(200/2)})}),["test1","test2","test3","test4"].forEach((_,w)=>{o(_,{x:200+w*(300/2),y:100+2*200})}),["dataUpload","verify1","verify2","warehouse"].forEach((_,w)=>{o(_,{x:200+w*300,y:100+3*200})}),["report1","report2"].forEach((_,w)=>{o(_,{x:200+(w+1)*300,y:100+4*200})}),["finalWarehouse1","finalWarehouse2"].forEach((_,w)=>{o(_,{x:200+(w+1)*300,y:100+5*200})})};mt(()=>{b(he())}),et(()=>h.visible,e=>{g.value=e}),et(g,e=>{p("update:visible",e)});const X=()=>{p("closed")};return(e,i)=>{const Y=wt,O=$t,T=bt,G=ft,Q=yt,tt=At;return l(),y(tt,{modelValue:g.value,"onUpdate:modelValue":i[4]||(i[4]=m=>g.value=m),"body-class":"flow-tracking-drawer",size:"100%","destroy-on-close":"","show-close":!1,onClosed:X},{header:c(()=>{var m,W;return[a("div",ve,[a("div",_e,[a("div",ye,[i[5]||(i[5]=a("span",{class:"label"},"物料编号：",-1)),a("span",ge,L(((m=e.materialData)==null?void 0:m.materialNo)||"-"),1),d(Y,{direction:"vertical"}),i[6]||(i[6]=a("span",{class:"label"},"委托单号：",-1)),a("span",we,L(((W=e.materialData)==null?void 0:W.commissionNo)||"-"),1)]),i[7]||(i[7]=a("div",{class:"sub-title"},"物料流程跟踪",-1))]),a("div",be,[a("div",$e,[d(T,{content:"流程视图",placement:"bottom"},{default:c(()=>[d(O,{type:z.value==="flow"?"primary":"default",icon:n(kt),circle:"",onClick:i[0]||(i[0]=_=>D("flow"))},null,8,["type","icon"])]),_:1}),d(T,{content:"表格视图",placement:"bottom"},{default:c(()=>[d(O,{type:z.value==="table"?"primary":"default",icon:n(Pt),circle:"",onClick:i[1]||(i[1]=_=>D("table"))},null,8,["type","icon"])]),_:1})]),d(Y,{direction:"vertical"}),d(T,{content:"关闭",placement:"bottom"},{default:c(()=>[d(O,{type:"danger",icon:n(Ct),circle:"",onClick:i[2]||(i[2]=_=>g.value=!1)},null,8,["icon"])]),_:1})])])]}),default:c(()=>[a("div",ke,[z.value==="flow"?(l(),y(n(dt),{key:0,modelValue:n(f),"onUpdate:modelValue":i[3]||(i[3]=m=>pt(f)?f.value=m:null),"default-zoom":1,"min-zoom":.2,"max-zoom":4,class:"flow-viewport","default-viewport":{x:0,y:0,zoom:1},"default-edge-options":{type:"smoothstep",animated:!0,markerEnd:{type:"arrowclosed",width:20,height:20,color:"#666"}}},{"node-custom":c(({data:m})=>[a("div",{class:_t(["custom-node",m.status])},[d(G,{class:"node-icon"},{default:c(()=>[(l(),y(N(m.icon)))]),_:2},1024),a("div",Pe,[a("div",Ce,L(m.label),1),a("div",Ae,[a("div",null,"状态: "+L(m.status),1),a("div",null,"时间: "+L(m.time||"-"),1),m.handler?(l(),$("div",ze,"处理人: "+L(m.handler),1)):P("",!0)])])],2)]),"node-group":c(({data:m})=>[a("div",{class:"group-node",style:st(m.style)},[a("div",Ie,L(m.label),1)],4)]),"connection-marker":c(()=>i[8]||(i[8]=[a("marker",{id:"arrowclosed",viewBox:"0 0 20 20",refX:"10",refY:"10",markerWidth:"10",markerHeight:"10",orient:"auto"},[a("path",{d:"M 0 0 L 10 10 L 0 20 z",fill:"#666"})],-1)])),default:c(()=>[d(n(Bt),{"pattern-color":"#aaa",gap:8}),d(n(me),null,{default:c(()=>[d(n(E),{title:"重置视图",onClick:Z},{default:c(()=>[d(G,null,{default:c(()=>[d(n(ht))]),_:1})]),_:1}),d(n(E),{title:"自动布局",onClick:F},{default:c(()=>[d(G,null,{default:c(()=>[d(n(vt))]),_:1})]),_:1})]),_:1}),d(n(ct))]),_:1},8,["modelValue"])):(l(),y(zt,{key:1,columns:x,data:I.value,pagination:!1,"tool-button":!1,search:!1},{status:c(m=>[d(Q,{type:B(m.row.status)},{default:c(()=>[gt(L(m.row.status),1)]),_:2},1032,["type"])]),_:1},8,["data"]))])]),_:1},8,["modelValue"])}}}),to=It(Ve,[["__scopeId","data-v-13e9815b"]]);export{to as default};
