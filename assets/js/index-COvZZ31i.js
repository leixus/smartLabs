/* empty css             *//* empty css                *//* empty css                  */import"./index-C6bx8goA.js";import{a as r}from"./pathPlanning-DQCgwyW3.js";import{d as w,p as v,q as b,aB as h,c as C,o as E,b as i,w as a,a as n,D as A,e as c,z as L}from"./index-ClSyKtod.js";import{i as z}from"./install-CPD1cr-Y.js";const $={class:"panel-content grid grid-cols-1 gap-4"},k={class:"map-container h-96"},B={class:"tracking-controls mt-2 flex space-x-2"},T=w({__name:"index",setup(R,{expose:f}){const l=v();let o=null;const y=()=>{l.value&&(o=z(l.value),d())},d=()=>{if(!o)return;const t={tooltip:{formatter:e=>{const s=r.agvs.find(p=>p.id===e.name);return s?`
          AGV ID: ${s.id}<br/>
          状态: ${s.status}<br/>
          电量: ${s.battery}%<br/>
          速度: ${s.speed} m/s<br/>
          位置: (${s.x}, ${s.y})
        `:""}},xAxis:{min:0,max:1e3,type:"value",splitLine:{show:!1}},yAxis:{min:0,max:600,type:"value",splitLine:{show:!1}},series:[{type:"lines",data:r.layout.map(e=>({coords:[[e.x1,e.y1],[e.x2,e.y2]]})),lineStyle:{color:"#333",width:2},silent:!0},{type:"scatter",data:r.agvs.map(e=>({name:e.id,value:[e.x,e.y],itemStyle:{color:x(e.status)},symbolSize:20,symbolRotate:e.direction})),label:{show:!0,position:"top",formatter:"{@[2]}"}}]};o.setOption(t)},x=t=>{switch(t){case"正常":return"#67C23A";case"警告":return"#E6A23C";case"故障":return"#F56C6C";case"维护中":return"#909399";default:return"#409EFF"}};let u;const _=()=>{u=window.setInterval(()=>{r.agvs.forEach(t=>{t.status==="正常"&&(t.x=(t.x+t.speed*10)%1e3,t.y=(t.y+Math.sin(t.x/100)*5)%600)}),d()},1e3)},m=()=>{o==null||o.resize()};return b(()=>{y(),_(),window.addEventListener("resize",m)}),h(()=>{window.removeEventListener("resize",m),clearInterval(u),o==null||o.dispose()}),f({updateLocationMap:d}),(t,e)=>{const s=A,p=L;return E(),C("div",$,[i(p,{class:"h-full"},{header:a(()=>e[0]||(e[0]=[n("div",{class:"card-header"},[n("span",{class:"text-lg font-medium"},"AGV实时位置地图")],-1)])),default:a(()=>[n("div",k,[n("div",{ref_key:"locationMapRef",ref:l,class:"w-full h-full"},null,512)]),n("div",B,[i(s,{type:"primary"},{default:a(()=>e[1]||(e[1]=[c("刷新位置")])),_:1}),i(s,{type:"warning"},{default:a(()=>e[2]||(e[2]=[c("显示警告")])),_:1}),i(s,{type:"info"},{default:a(()=>e[3]||(e[3]=[c("历史轨迹")])),_:1})])]),_:1})])}}});export{T as default};
