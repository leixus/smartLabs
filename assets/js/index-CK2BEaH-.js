import{_ as q}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-dQS8jH7J.js";/* empty css             *//* empty css               *//* empty css                  */import{R as z,d as x,af as G,j as D,p as g,c as I,o as J,a as O,b as a,w as i,D as W,u as n,N as Z,e as l,O as T,ag as F,t as h,g as K,U as Q,B as y,J as N,W as V,V as R}from"./index-yDSqlga2.js";import{m as r}from"./mock-Dosj8-Nv.js";import X from"./index-D8khwCHm.js";import L from"./index-DwXFnLys.js";import{S as ee}from"./SelectItemDetails-D9pB2pxV.js";/* empty css                 *//* empty css                   *//* empty css                       *//* empty css                 *//* empty css                   */import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                 *//* empty css                    *//* empty css                 *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                  */import"./sortable.esm-C83syoBY.js";/* empty css                  *//* empty css                    *//* empty css                       *//* empty css                        *//* empty css               */import"./ImportSampleDialog-C1hA8XNf.js";/* empty css                  */import"./sampleManage-D1E_GeJ8.js";import"./index-BwGddscR.js";/* empty css                   *//* empty css                       *//* empty css                *//* empty css                  *//* empty css                */import"./el-tab-pane-l0sNRNKZ.js";/* empty css                             */const oe=(u=10)=>{const m=[];for(let p=0;p<u*2;p++)m.push({id:r.Random.id(),tag:r.Random.pick(["重要","普通","紧急"]),commissionNumber:`GZ-${r.Random.string("number",8)}-25-${r.Random.string("number",5)}`,commissionName:r.Random.ctitle(4,8)+"检测委托",witnessSamplingNumber:r.Random.string("number",10),status:r.Random.pick(["正常","异常"]),commissioningUnit:r.Random.ctitle(4,10)+"有限公司",commissioner:r.Random.cname(),commissionerPhone:r.Random.string("number",11),inspectionProject:r.Random.pick(["冲击检测","拉伸检测","摆锤检测"]),inspectionDepartment:r.Random.pick(["检测一部","检测二部","检测三部"]),inspectionVenue:r.Random.pick(["实验室1","实验室2","实验室3"]),inspectionCategory:r.Random.pick(["常规检测","特殊检测","紧急检测"]),paymentMethod:r.Random.pick(["现金","转账","支票"]),reportCopies:r.Random.integer(1,5),sampleNumber:`SP-${r.Random.string("number",6)}`,remarks:r.Random.cparagraph(1),reportCirculation:r.Random.boolean(),registrant:r.Random.cname(),registrationSite:r.Random.pick(["总部","分部一","分部二"]),registrationDepartment:r.Random.pick(["业务部","技术部","综合部"]),registrationTime:r.Random.datetime(),completionTime:r.Random.datetime()});return m},re=(u,m)=>{const p=oe(m);return{code:z.SUCCESS,msg:"success",data:{list:p,total:u*m,pageNum:u,pageSize:m}}},ie={class:"main-box"},ae={class:"table-box"},ne=x({name:"inspectionTestCommission"}),se=x({...ne,setup(u){const m=G(),p=[{type:"selection",width:60},{type:"index",label:"序号",width:80},{prop:"tag",label:"标签",width:80},{prop:"commissionNumber",label:"委托单号",width:200,search:{el:"input",props:{placeholder:"请输入委托单号"}}},{prop:"commissionName",label:"委托名称",width:200,search:{el:"input",props:{placeholder:"请输入委托名称"}}},{prop:"status",label:"状态",width:120,search:{el:"select",props:{placeholder:"请选择状态"}}},{prop:"commissioningUnit",label:"委托单位",width:200},{prop:"commissioner",label:"委托人",width:120},{prop:"commissionerPhone",label:"委托人联系电话",width:150},{prop:"completionTime",label:"委托完成时间",width:180,formatter:e=>e.completionTime?N(e.completionTime).format("YYYY-MM-DD HH:mm:ss"):""},{prop:"inspectionProject",label:"检测项目",width:150},{prop:"inspectionDepartment",label:"检测部门",width:150},{prop:"reportCopies",label:"报告交付份数",width:120},{prop:"sampleNumber",label:"样品编号",width:200},{prop:"remarks",label:"备注",width:200},{prop:"registrant",label:"登记人",width:120},{prop:"registrationSite",label:"登记站点",width:150},{prop:"registrationDepartment",label:"登记部门",width:150},{prop:"registrationTime",label:"登记时间",width:180,formatter:e=>e.registrationTime?N(e.registrationTime).format("YYYY-MM-DD HH:mm:ss"):""},{prop:"operation",label:"操作",width:220,fixed:"right"}],S=D({pageNum:1,pageSize:10}),P=async e=>Promise.resolve(re(e.pageNum,e.pageSize)),$=e=>e,b=g(),f=g(!1),c=D({title:"新增委托",type:"add",rowData:null}),_=(e,t)=>{c.type=e,c.title=e==="add"?"新增委托":"编辑委托",c.rowData=t,f.value=!0},B=()=>{var e;(e=b.value)==null||e.refresh()},M=e=>{V.confirm("确定要删除该条数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{R.success("删除成功"),b.value.getTableList()}).catch(t=>{console.error("error",t)})},E=e=>{const t=e;if(!(e!=null&&e.length)){R.warning("请选择要删除的数据");return}V.confirm(`确定要删除选中的 ${t.length} 条数据吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var s;R.success("删除成功"),(s=b.value)==null||s.refresh()}).catch(s=>{console.error("error",s)})},w=g(!1),C=g(null),Y=e=>{C.value=e,w.value=!0},j=()=>{var e;(e=b.value)==null||e.refresh()},k=g(!1),U=e=>{k.value=!0},H=e=>{m.push({path:"/biz/inspectionTestManage/sampleManage",query:{sampleId:e.id,sampleNumber:e.sampleNumber,commissionNumber:e.commissionNumber}})};return(e,t)=>{const s=W,v=K,A=q;return J(),I("div",ie,[O("div",ae,[a(A,{ref_key:"proTable",ref:b,columns:p,"request-api":P,"init-param":n(S),"data-callback":$},{tableHeader:i(o=>[a(s,{type:"primary",icon:n(Q),onClick:t[0]||(t[0]=d=>_("add"))},{default:i(()=>t[4]||(t[4]=[l("新增")])),_:1},8,["icon"]),a(s,{type:"danger",icon:n(T),onClick:d=>E(o.selectedListIds)},{default:i(()=>t[5]||(t[5]=[l("删除")])),_:2},1032,["icon","onClick"])]),tag:i(o=>[a(v,{type:o.row.tag==="重要"?"danger":o.row.tag==="紧急"?"warning":"success"},{default:i(()=>[l(h(o.row.tag),1)]),_:2},1032,["type"])]),status:i(o=>[a(v,{type:o.row.status==="正常"?"success":"danger"},{default:i(()=>[l(h(o.row.status),1)]),_:2},1032,["type"])]),inspectionProject:i(o=>[a(s,{type:"primary",link:"",onClick:d=>U(o.row)},{default:i(()=>[l(h(o.row.inspectionProject),1)]),_:2},1032,["onClick"])]),sampleNumber:i(o=>[a(s,{type:"primary",link:"",onClick:d=>H(o.row)},{default:i(()=>[l(h(o.row.sampleNumber),1)]),_:2},1032,["onClick"])]),operation:i(o=>[a(s,{type:"primary",link:"",icon:n(Z),onClick:d=>_("edit",o.row)},{default:i(()=>t[6]||(t[6]=[l("编辑")])),_:2},1032,["icon","onClick"]),a(s,{type:"danger",link:"",icon:n(T),onClick:d=>M(o.row)},{default:i(()=>t[7]||(t[7]=[l("删除")])),_:2},1032,["icon","onClick"]),a(s,{type:"success",link:"",icon:n(F),onClick:d=>Y(o.row)},{default:i(()=>t[8]||(t[8]=[l("审核")])),_:2},1032,["icon","onClick"])]),_:1},8,["init-param"]),a(X,{modelValue:n(f),"onUpdate:modelValue":t[1]||(t[1]=o=>y(f)?f.value=o:null),type:n(c).type,title:n(c).title,"row-data":n(c).rowData,onSuccess:B},null,8,["modelValue","type","title","row-data"]),a(L,{modelValue:n(w),"onUpdate:modelValue":t[2]||(t[2]=o=>y(w)?w.value=o:null),"row-data":n(C),onSuccess:j},null,8,["modelValue","row-data"]),a(ee,{modelValue:n(k),"onUpdate:modelValue":t[3]||(t[3]=o=>y(k)?k.value=o:null)},null,8,["modelValue"])])])}}}),Xe=te(se,[["__scopeId","data-v-09e9afcf"]]);export{Xe as default};
