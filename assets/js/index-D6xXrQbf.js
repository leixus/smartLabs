import{_ as oe}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-D0lzutwe.js";/* empty css             *//* empty css                  *//* empty css                        *//* empty css                  *//* empty css                     *//* empty css                         *//* empty css               */import{d as E,p,j as le,c as re,o as g,a as ne,b as r,w as l,D as ae,u as n,N as ie,e as a,O as P,P as se,x as pe,Q as ue,S as ce,T as de,i as x,Z as D,g as me,t as d,U as fe,B as v,W as R,V as u}from"./index-Djyl84eR.js";import we from"./index-DoKDniXN.js";import ye from"./index-p5Qy750c.js";import ge from"./index-1oQRh6bb.js";import ve from"./index-QoCh0A5N.js";import{g as he}from"./sampleManage-Bn7BfzMl.js";import{S as _e}from"./SelectItemDetails-BfphgY-D.js";/* empty css                       *//* empty css                 *//* empty css                   *//* empty css                 *//* empty css                   */import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                 *//* empty css                    *//* empty css                 *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                  *//* empty css                  */import"./sortable.esm-C83syoBY.js";/* empty css                  *//* empty css                    *//* empty css                       *//* empty css               */import"./index-Ci6BNAvR.js";/* empty css                  *//* empty css                   *//* empty css                             *//* empty css                       */import"./mock-DhPNTjQr.js";/* empty css                */import"./el-tab-pane-l0sNRNKZ.js";const ke={class:"main-box"},Ce={class:"table-box"},xe=E({name:"sampleManage"}),De=E({...xe,setup(Ve){const M=[{type:"selection",width:60},{type:"index",label:"序号",width:80},{label:"样品编号",prop:"sampleId",width:180,search:{el:"input",props:{placeholder:"请输入样品编号"}}},{label:"样品名称",prop:"sampleName",width:180,search:{el:"input",props:{placeholder:"请输入样品名称"}}},{label:"委托单号",prop:"reportId",width:180,search:{el:"input",props:{placeholder:"请输入委托单号"}}},{label:"物料编码",prop:"materialCode",width:180,search:{el:"input",props:{placeholder:"请输入物料编码"}}},{label:"检测项目",prop:"inspectionCategory",width:180,search:{el:"input",props:{placeholder:"请输入检测项目"}}},{label:"检验状态",prop:"inspectionStatus",width:120},{label:"流转状态",prop:"flowStatus",width:120},{label:"当前工序",prop:"currentProcess",width:120},{label:"当前位置",prop:"currentLocation",width:120},{label:"下一工序",prop:"nextProcess",width:120},{label:"下一工序位置",prop:"nextLocation",width:120},{label:"完成期限",prop:"completionDeadline",width:180},{label:"剩余时间",prop:"remainingTime",width:120},{label:"委托单位",prop:"entrustedUnit",width:180},{label:"规格型号",prop:"specificationModel",width:180},{label:"原始编号",prop:"originalId",width:180},{label:"登记人",prop:"registrant",width:120},{label:"登记时间",prop:"registrationTime",width:180,search:{el:"date-picker",props:{placeholder:"请选择登记时间"}}},{label:"样品描述",prop:"sampleDescription",width:200,showOverflowTooltip:!0},{prop:"operation",label:"操作",width:260,fixed:"right"}],c=p(),h=p(!1),m=le({title:"新增样品",type:"add",rowData:null}),_=p(!1),B=p({}),b=p(!1),k=p(null),y=p(!1),V=p("confirm"),S=p(null),j=o=>Promise.resolve(he(o.pageNum,o.pageSize)),C=p(!1),I=o=>{C.value=!0},T=(o,e)=>{m.type=o,m.title=o==="add"?"新增样品":"编辑样品",m.rowData=e,h.value=!0},N=()=>{var o;(o=c.value)==null||o.refresh()},U=o=>{R.confirm("确定要删除该条数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{var e;try{u.success("删除成功"),(e=c.value)==null||e.refresh()}catch(i){console.error("删除失败:",i),u.error("删除失败")}}).catch(()=>{})},L=o=>{if(!(o!=null&&o.length)){u.warning("请选择要删除的数据");return}R.confirm(`确定要删除选中的 ${o.length} 条数据吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{var e;try{u.success("批量删除成功"),(e=c.value)==null||e.refresh()}catch(i){console.error("批量删除失败:",i),u.error("批量删除失败")}}).catch(()=>{})},q=o=>{R.confirm("确定要复制该条数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(()=>{var e;({...o},o.id),u.success("复制成功"),(e=c.value)==null||e.refresh()}).catch(()=>{})},O=o=>{B.value=o,_.value=!0},z=o=>{},F=o=>{T("edit",o)},H=o=>{k.value=o,b.value=!0},Q=o=>{var e;u.success("样品驳回成功"),(e=c.value)==null||e.refresh()},W=()=>{k.value=null},Z=o=>({待检验:"info",检验中:"warning",已完成:"success",已驳回:"danger"})[o]||"info",A=o=>({待流转:"info",流转中:"warning",已完成:"success",已驳回:"danger"})[o]||"info",G=o=>{S.value=o,V.value="confirm",y.value=!0},J=o=>{S.value=o,V.value="review",y.value=!0},K=o=>{var e;u.success(`${o.type==="confirm"?"确认":"复核"}收样成功`),(e=c.value)==null||e.refresh()};return(o,e)=>{var $;const i=ae,f=me,X=pe,w=de,Y=ce,ee=se,te=oe;return g(),re("div",ke,[ne("div",Ce,[r(te,{ref_key:"proTable",ref:c,columns:M,"request-api":j},{tableHeader:l(t=>[r(i,{type:"primary",icon:n(fe),onClick:e[0]||(e[0]=s=>T("add"))},{default:l(()=>e[6]||(e[6]=[a("新增")])),_:1},8,["icon"]),r(i,{type:"danger",icon:n(P),onClick:s=>L(t.selectedListIds)},{default:l(()=>e[7]||(e[7]=[a("删除")])),_:2},1032,["icon","onClick"])]),inspectionStatus:l(t=>[r(f,{type:Z(t.row.inspectionStatus),effect:"light"},{default:l(()=>[a(d(t.row.inspectionStatus),1)]),_:2},1032,["type"])]),flowStatus:l(t=>[r(f,{type:A(t.row.flowStatus),effect:"light"},{default:l(()=>[a(d(t.row.flowStatus),1)]),_:2},1032,["type"])]),inspectionCategory:l(t=>[r(i,{type:"primary",link:"",onClick:s=>I(t.row)},{default:l(()=>[a(d(t.row.inspectionCategory),1)]),_:2},1032,["onClick"])]),currentProcess:l(t=>[t.row.currentProcess?(g(),x(f,{key:0,type:"primary",effect:"light"},{default:l(()=>[a(d(t.row.currentProcess),1)]),_:2},1024)):D("",!0)]),currentLocation:l(t=>[t.row.currentLocation?(g(),x(f,{key:0,type:"success",effect:"light"},{default:l(()=>[a(d(t.row.currentLocation),1)]),_:2},1024)):D("",!0)]),nextProcess:l(t=>[t.row.nextProcess?(g(),x(f,{key:0,type:"warning",effect:"light"},{default:l(()=>[a(d(t.row.nextProcess),1)]),_:2},1024)):D("",!0)]),nextLocation:l(t=>[t.row.nextLocation?(g(),x(f,{key:0,type:"info",effect:"light"},{default:l(()=>[a(d(t.row.nextLocation),1)]),_:2},1024)):D("",!0)]),operation:l(t=>[r(i,{type:"primary",link:"",icon:n(ie),onClick:s=>T("edit",t.row)},{default:l(()=>e[8]||(e[8]=[a("编辑")])),_:2},1032,["icon","onClick"]),r(i,{type:"danger",link:"",icon:n(P),onClick:s=>U(t.row)},{default:l(()=>e[9]||(e[9]=[a("删除")])),_:2},1032,["icon","onClick"]),r(ee,{class:"text-sm pt-[2px] pl-[12px]"},{dropdown:l(()=>[r(Y,null,{default:l(()=>[r(w,{onClick:s=>G(t.row)},{default:l(()=>e[11]||(e[11]=[a("确认收样")])),_:2},1032,["onClick"]),r(w,{onClick:s=>J(t.row)},{default:l(()=>e[12]||(e[12]=[a("复核收样")])),_:2},1032,["onClick"]),r(w,{onClick:s=>H(t.row),class:"!text-red-500"},{default:l(()=>e[13]||(e[13]=[a("退样")])),_:2},1032,["onClick"]),r(w,{onClick:s=>q(t.row),divided:""},{default:l(()=>e[14]||(e[14]=[a("复制")])),_:2},1032,["onClick"]),r(w,{onClick:s=>O(t.row),divided:""},{default:l(()=>e[15]||(e[15]=[a("详情")])),_:2},1032,["onClick"]),r(w,{onClick:s=>z(t.row)},{default:l(()=>e[16]||(e[16]=[a("委托单")])),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[r(i,{type:"primary",link:""},{default:l(()=>[e[10]||(e[10]=a(" 更多 ")),r(X,{class:"el-icon--right"},{default:l(()=>[r(n(ue))]),_:1})]),_:1})]),_:2},1024)]),_:1},512),r(we,{modelValue:n(h),"onUpdate:modelValue":e[1]||(e[1]=t=>v(h)?h.value=t:null),type:n(m).type,title:n(m).title,"row-data":n(m).rowData,onSuccess:N},null,8,["modelValue","type","title","row-data"]),r(ye,{modelValue:n(_),"onUpdate:modelValue":e[2]||(e[2]=t=>v(_)?_.value=t:null),title:"样品详情","row-data":n(B),onEdit:F},null,8,["modelValue","row-data"]),r(ge,{modelValue:n(b),"onUpdate:modelValue":e[3]||(e[3]=t=>v(b)?b.value=t:null),title:"退样","item-no":(($=n(k))==null?void 0:$.sampleId)||"","total-quantity":25,"inspection-quantity":22,"row-data":n(k),onSubmit:Q,onClose:W},null,8,["modelValue","item-no","row-data"]),r(ve,{modelValue:n(y),"onUpdate:modelValue":e[4]||(e[4]=t=>v(y)?y.value=t:null),type:n(V),"row-data":n(S),onSuccess:K},null,8,["modelValue","type","row-data"]),r(_e,{modelValue:n(C),"onUpdate:modelValue":e[5]||(e[5]=t=>v(C)?C.value=t:null)},null,8,["modelValue"])])])}}}),gt=be(De,[["__scopeId","data-v-da192a86"]]);export{gt as default};
